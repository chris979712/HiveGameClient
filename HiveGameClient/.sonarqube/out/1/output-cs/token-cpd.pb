¹
{C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Properties\AssemblyInfo.cs
[

 
assembly

 	
:

	 

AssemblyTitle

 
(

 
$str

 )
)

) *
]

* +
[ 
assembly 	
:	 

AssemblyDescription 
( 
$str !
)! "
]" #
[ 
assembly 	
:	 
!
AssemblyConfiguration  
(  !
$str! #
)# $
]$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str +
)+ ,
], -
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 

log4net 
. 
Config 
. 
XmlConfigurator )
() *
Watch* /
=0 1
true2 6
)6 7
]7 8
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[## 
assembly## 	
:##	 

	ThemeInfo## 
(## &
ResourceDictionaryLocation$$ 
.$$ 
None$$ #
,$$# $&
ResourceDictionaryLocation'' 
.'' 
SourceAssembly'' -
)** 
]** 
[44 
assembly44 	
:44	 

AssemblyVersion44 
(44 
$str44 $
)44$ %
]44% &
[55 
assembly55 	
:55	 

AssemblyFileVersion55 
(55 
$str55 (
)55( )
]55) *ú;
sC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\MainWindow.xaml.cs
	namespace 	
HiveGameWPFApp
 
{ 
public 

partial 
class 

MainWindow #
:$ %
Window& ,
{ 
public 

MainWindow 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
Closing 
+= 
MainWindowClosing -
;- .
} 	
private   
void   !
IntroVideo_MediaEnded   *
(  * +
object  + 1
sender  2 8
,  8 9
RoutedEventArgs  : I
e  J K
)  K L
{!! 	
NavigationFrame## 
.## 
Navigate## $
(##$ %
new##% (
Views##) .
.##. /
	LoginView##/ 8
(##8 9
)##9 :
)##: ;
;##; <
}%% 	
private'' 
void'' &
NavigationFrame_Navigating'' /
(''/ 0
object''0 6
sender''7 =
,''= >%
NavigatingCancelEventArgs''? X
e''Y Z
)''Z [
{(( 	
var)) 
fadeOutAnimation))  
=))! "
new))# &
DoubleAnimation))' 6
())6 7
$num))7 8
,))8 9
$num)): ;
,)); <
TimeSpan))= E
.))E F
FromSeconds))F Q
())Q R
$num))R U
)))U V
)))V W
;))W X
NavigationFrame** 
.** 
BeginAnimation** *
(*** +
Frame**+ 0
.**0 1
OpacityProperty**1 @
,**@ A
fadeOutAnimation**B R
)**R S
;**S T
}++ 	
private-- 
void-- %
NavigationFrame_Navigated-- .
(--. /
object--/ 5
sender--6 <
,--< =
NavigationEventArgs--> Q
e--R S
)--S T
{.. 	
var// 
fadeInAnimation// 
=//  !
new//" %
DoubleAnimation//& 5
(//5 6
$num//6 7
,//7 8
$num//9 :
,//: ;
TimeSpan//< D
.//D E
FromSeconds//E P
(//P Q
$num//Q T
)//T U
)//U V
;//V W
NavigationFrame00 
.00 
BeginAnimation00 *
(00* +
Frame00+ 0
.000 1
OpacityProperty001 @
,00@ A
fadeInAnimation00B Q
)00Q R
;00R S
}11 	
private33 
void33 
MainWindowClosing33 &
(33& '
object33' -
sender33. 4
,334 5
System336 <
.33< =
ComponentModel33= K
.33K L
CancelEventArgs33L [
e33\ ]
)33] ^
{44 	
LoggerManager55 
logger55  
=55! "
new55# &
LoggerManager55' 4
(554 5
this555 9
.559 :
GetType55: A
(55A B
)55B C
)55C D
;55D E
try66 
{77 $
UserSessionManagerClient88 (
sessionManager88) 7
=888 9
new88: =$
UserSessionManagerClient88> V
(88V W
)88W X
;88X Y
UserSession99 
session99 #
=99$ %%
VerifyExistingUserSession99& ?
(99? @
)99@ A
;99A B
if:: 
(:: 
	Constants:: 
.:: 
	IsInMatch:: '
)::' (
{;; 
sessionManager<< "
.<<" #

Disconnect<<# -
(<<- .
session<<. 5
,<<5 6
true<<6 :
)<<: ;
;<<; <
}== 
else>> 
{?? 
sessionManager@@ "
.@@" #

Disconnect@@# -
(@@- .
session@@. 5
,@@5 6
false@@6 ;
)@@; <
;@@< =
}AA 
}BB 
catchCC 
(CC %
EndpointNotFoundExceptionCC ,
endPointExceptionCC- >
)CC> ?
{DD 
loggerEE 
.EE 
LogErrorEE 
(EE  
endPointExceptionEE  1
)EE1 2
;EE2 3
DialogManagerFF 
.FF !
ShowErrorMessageAlertFF 3
(FF3 4

PropertiesFF4 >
.FF> ?
	ResourcesFF? H
.FFH I#
dialogEndPointExceptionFFI `
)FF` a
;FFa b
}GG 
catchHH 
(HH 
TimeoutExceptionHH #
timeOutExceptionHH$ 4
)HH4 5
{II 
loggerJJ 
.JJ 
LogErrorJJ 
(JJ  
timeOutExceptionJJ  0
)JJ0 1
;JJ1 2
DialogManagerKK 
.KK !
ShowErrorMessageAlertKK 3
(KK3 4

PropertiesKK4 >
.KK> ?
	ResourcesKK? H
.KKH I'
dialogComunicationExceptionKKI d
)KKd e
;KKe f
}LL 
catchMM 
(MM "
CommunicationExceptionMM )"
communicationExceptionMM* @
)MM@ A
{NN 
loggerOO 
.OO 
LogErrorOO 
(OO  "
communicationExceptionOO  6
)OO6 7
;OO7 8
DialogManagerPP 
.PP !
ShowErrorMessageAlertPP 3
(PP3 4

PropertiesPP4 >
.PP> ?
	ResourcesPP? H
.PPH I"
dialogTimeOutExceptionPPI _
)PP_ `
;PP` a
}QQ 
}SS 	
privateUU 
staticUU 
UserSessionUU "%
VerifyExistingUserSessionUU# <
(UU< =
)UU= >
{VV 	
intWW 
	idAccountWW 
;WW 
stringXX 
usernameXX 
;XX 
stringYY 
	codematchYY 
;YY 
UserSessionZZ 
sessionPlayerZZ %
=ZZ& '
newZZ( +
UserSessionZZ, 7
(ZZ7 8
)ZZ8 9
;ZZ9 :
if[[ 
([[  
UserProfileSingleton[[ #
.[[# $
username[[$ ,
==[[- /
null[[0 4
)[[4 5
{\\ 
	idAccount]] 
=]] 
$num]] 
;]] 
username^^ 
=^^ 
$str^^ .
;^^. /
	codematch__ 
=__ 
$str__ $
;__$ %
}`` 
elseaa 
{bb 
	idAccountcc 
=cc  
UserProfileSingletoncc 0
.cc0 1
	idAccountcc1 :
;cc: ;
usernamedd 
=dd  
UserProfileSingletondd /
.dd/ 0
usernamedd0 8
;dd8 9
ifee 
(ee 
MatchSingletonee !
.ee! "
	codeMatchee" +
==ee, .
nullee/ 3
)ee3 4
{ff 
	codematchgg 
=gg 
$strgg  (
;gg( )
}hh 
elseii 
{jj 
	codematchkk 
=kk 
MatchSingletonkk  .
.kk. /
	codeMatchkk/ 8
;kk8 9
}ll 
}mm 
sessionPlayernn 
.nn 
	codeMatchnn #
=nn$ %
	codematchnn& /
;nn/ 0
sessionPlayeroo 
.oo 
usernameoo "
=oo# $
usernameoo% -
;oo- .
sessionPlayerpp 
.pp 
	idAccountpp #
=pp$ %
	idAccountpp& /
;pp/ 0
returnqq 
sessionPlayerqq  
;qq  !
}rr 	
}tt 
}uu ë>
lC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\App.xaml.cs
	namespace 	
HiveGameWPFApp
 
{ 
public 

partial 
class 
App 
: 
Application *
{ 
private 
static 
readonly 
MediaPlayer  +
_mediaPlayer, 8
=9 :
new; >
MediaPlayer? J
(J K
)K L
;L M
private 
static 
string 
_currentMusicPath /
=0 1
string2 8
.8 9
Empty9 >
;> ?
private 
static 
bool 
_isMusicPlaying +
=, -
HiveGameWPFApp. <
.< =

Properties= G
.G H
SettingsH P
.P Q
DefaultQ X
.X Y
SoundY ^
==_ a
$strb f
;f g
public 
static 
MediaPlayer !
MediaPlayer" -
=>. 0
_mediaPlayer1 =
;= >
	protected 
override 
void 
	OnStartup  )
() *
StartupEventArgs* :
e; <
)< =
{ 	
base 
. 
	OnStartup 
( 
e 
) 
; 
string 
savedLanguage  
=! "
HiveGameWPFApp# 1
.1 2

Properties2 <
.< =
Settings= E
.E F
DefaultF M
.M N
LanguageN V
;V W
if 
( 
string 
. 
IsNullOrEmpty $
($ %
savedLanguage% 2
)2 3
)3 4
{ 
savedLanguage 
= 
CultureInfo  +
.+ ,
CurrentCulture, :
.: ;
Name; ?
.? @

StartsWith@ J
(J K
$strK O
)O P
?Q R
$strS Z
:[ \
$str] d
;d e
HiveGameWPFApp   
.   

Properties   )
.  ) *
Settings  * 2
.  2 3
Default  3 :
.  : ;
Language  ; C
=  D E
savedLanguage  F S
;  S T
HiveGameWPFApp!! 
.!! 

Properties!! )
.!!) *
Settings!!* 2
.!!2 3
Default!!3 :
.!!: ;
Save!!; ?
(!!? @
)!!@ A
;!!A B
}"" 
ChangeLanguage$$ 
($$ 
savedLanguage$$ (
)$$( )
;$$) *
if&& 
(&& 
_isMusicPlaying&& 
&&&&  "
!&&# $
string&&$ *
.&&* +
IsNullOrEmpty&&+ 8
(&&8 9
_currentMusicPath&&9 J
)&&J K
)&&K L
{'' 
	PlayMusic(( 
((( 
_currentMusicPath(( +
)((+ ,
;((, -
})) 
}** 	
public-- 
static-- 
void-- 
ChangeLanguage-- )
(--) *
string--* 0
cultureCode--1 <
)--< =
{.. 	
CultureInfo// 
culture// 
=//  !
new//" %
CultureInfo//& 1
(//1 2
cultureCode//2 =
)//= >
;//> ?
Thread00 
.00 
CurrentThread00  
.00  !
CurrentCulture00! /
=000 1
culture002 9
;009 :
Thread11 
.11 
CurrentThread11  
.11  !
CurrentUICulture11! 1
=112 3
culture114 ;
;11; <
HiveGameWPFApp22 
.22 

Properties22 %
.22% &
Settings22& .
.22. /
Default22/ 6
.226 7
Reset227 <
(22< =
)22= >
;22> ?
HiveGameWPFApp33 
.33 

Properties33 %
.33% &
Settings33& .
.33. /
Default33/ 6
.336 7
Language337 ?
=33@ A
cultureCode33B M
;33M N
HiveGameWPFApp44 
.44 

Properties44 %
.44% &
Settings44& .
.44. /
Default44/ 6
.446 7
Save447 ;
(44; <
)44< =
;44= >
}55 	
public88 
static88 
void88 
	PlayMusic88 $
(88$ %
string88% +
	musicPath88, 5
)885 6
{99 	
if:: 
(:: 
_currentMusicPath:: !
==::" $
	musicPath::% .
||::/ 1
!::2 3
_isMusicPlaying::3 B
)::B C
return::D J
;::J K
_mediaPlayer<< 
.<< 
Stop<< 
(<< 
)<< 
;<<  
_mediaPlayer== 
.== 
Open== 
(== 
new== !
Uri==" %
(==% &
	musicPath==& /
,==/ 0
UriKind==1 8
.==8 9
RelativeOrAbsolute==9 K
)==K L
)==L M
;==M N
_mediaPlayer>> 
.>> 

MediaEnded>> #
-=>>$ &"
MediaPlayer_MediaEnded>>' =
;>>= >
_mediaPlayer?? 
.?? 

MediaEnded?? #
+=??$ &"
MediaPlayer_MediaEnded??' =
;??= >
_mediaPlayer@@ 
.@@ 
Play@@ 
(@@ 
)@@ 
;@@  
_currentMusicPathAA 
=AA 
	musicPathAA  )
;AA) *
_mediaPlayerBB 
.BB 
VolumeBB 
=BB  !
$numBB" &
;BB& '
}CC 	
privateEE 
staticEE 
voidEE "
MediaPlayer_MediaEndedEE 2
(EE2 3
objectEE3 9
senderEE: @
,EE@ A
	EventArgsEEB K
eEEL M
)EEM N
{FF 	
_mediaPlayerGG 
.GG 
PositionGG !
=GG" #
TimeSpanGG$ ,
.GG, -
ZeroGG- 1
;GG1 2
_mediaPlayerHH 
.HH 
PlayHH 
(HH 
)HH 
;HH  
}II 	
publicKK 
staticKK 
voidKK 
ToggleMusicKK &
(KK& '
)KK' (
{LL 	
ifMM 
(MM 
_isMusicPlayingMM 
)MM  
{NN 
_mediaPlayerOO 
.OO 
PauseOO "
(OO" #
)OO# $
;OO$ %
_isMusicPlayingPP 
=PP  !
falsePP" '
;PP' (
HiveGameWPFAppQQ 
.QQ 

PropertiesQQ )
.QQ) *
SettingsQQ* 2
.QQ2 3
DefaultQQ3 :
.QQ: ;
SoundQQ; @
=QQA B
$strQQC H
;QQH I
HiveGameWPFAppRR 
.RR 

PropertiesRR )
.RR) *
SettingsRR* 2
.RR2 3
DefaultRR3 :
.RR: ;
SaveRR; ?
(RR? @
)RR@ A
;RRA B
}SS 
elseTT 
{UU 
_mediaPlayerVV 
.VV 
PlayVV !
(VV! "
)VV" #
;VV# $
_isMusicPlayingWW 
=WW  !
trueWW" &
;WW& '
HiveGameWPFAppXX 
.XX 

PropertiesXX )
.XX) *
SettingsXX* 2
.XX2 3
DefaultXX3 :
.XX: ;
SoundXX; @
=XXA B
$strXXC G
;XXG H
HiveGameWPFAppYY 
.YY 

PropertiesYY )
.YY) *
SettingsYY* 2
.YY2 3
DefaultYY3 :
.YY: ;
SaveYY; ?
(YY? @
)YY@ A
;YYA B
}ZZ 
}]] 	
public`` 
static`` 
bool`` 
IsMusicPlaying`` )
=>``* ,
_isMusicPlaying``- <
;``< =
}cc 
}dd b
C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\VerifyEmailAndUsername.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class "
VerifyEmailAndUsername /
:0 1
Page2 6
{ 
public "
VerifyEmailAndUsername %
(% &
)& '
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
Image_MouseDown $
($ %
object% +
sender, 2
,2 3 
MouseButtonEventArgs4 H
eI J
)J K
{ 	
GoToLoginView 
( 
) 
; 
}   	
private"" 
void"" 
GoToLoginView"" "
(""" #
)""# $
{## 	
	LoginView$$ 
	loginView$$ 
=$$  !
new$$" %
	LoginView$$& /
($$/ 0
)$$0 1
;$$1 2
this%% 
.%% 
NavigationService%% "
.%%" #
Navigate%%# +
(%%+ ,
	loginView%%, 5
)%%5 6
;%%6 7
}&& 	
private'' 
void'' 
BtnConfirm_Click'' %
(''% &
object''& ,
sender''- 3
,''3 4
RoutedEventArgs''5 D
e''E F
)''F G
{(( 	
txtb_Username)) 
.)) 
BorderBrush)) %
=))& '
Brushes))( /
.))/ 0
Yellow))0 6
;))6 7

txtb_Email** 
.** 
BorderBrush** "
=**# $
Brushes**% ,
.**, -
Yellow**- 3
;**3 4
if++ 
(++ 
ValidateFields++ 
(++ 
)++  
)++  !
{,, 
if-- 
(-- '
ValidateExistingUserAccount-- /
(--/ 0
)--0 1
)--1 2
{.. %
SendEmailVerificationCode// -
(//- .
)//. /
;/// 0
}00 
}11 
else22 
{33 
DialogManager44 
.44 !
ShowErrorMessageAlert44 3
(443 4

Properties444 >
.44> ?
	Resources44? H
.44H I
dialogWrongData44I X
)44X Y
;44Y Z
}55 
}66 	
private88 
void88 %
SendEmailVerificationCode88 .
(88. /
)88/ 0
{99 	
LoggerManager:: 
logger::  
=::! "
new::# &
LoggerManager::' 4
(::4 5
this::5 9
.::9 :
GetType::: A
(::A B
)::B C
)::C D
;::D E
try;; 
{<< 
	HiveProxy== 
.== 
UserManagerClient== +
userManagerClient==, =
===> ?
new==@ C
	HiveProxy==D M
.==M N
UserManagerClient==N _
(==_ `
)==` a
;==a b
	HiveProxy>> 
.>> *
EmailVerificationManagerClient>> 8*
emailVerificationManagerClient>>9 W
=>>X Y
new>>Z ]*
EmailVerificationManagerClient>>^ |
(>>| }
)>>} ~
;>>~ 
Profile?? 
userProfile?? #
=??$ %
userManagerClient??& 7
.??7 8$
GetUserProfileByUsername??8 P
(??P Q
txtb_Username??Q ^
.??^ _
Text??_ c
)??c d
;??d e
if@@ 
(@@ 
userProfile@@ 
.@@ 
	idProfile@@ (
==@@) +
	Constants@@, 5
.@@5 6
ErrorOperation@@6 D
)@@D E
{AA 
DialogManagerBB !
.BB! "!
ShowErrorMessageAlertBB" 7
(BB7 8

PropertiesBB8 B
.BBB C
	ResourcesBBC L
.BBL M
dialogDataBaseErrorBBM `
)BB` a
;BBa b
}CC 
elseDD 
{EE  
UserProfileSingletonFF (
.FF( )
InstanceFF) 1
.FF1 2
CreateInstanceFF2 @
(FF@ A
userProfileFFA L
)FFL M
;FFM N
intGG 
resultEmailSendedGG )
=GG* +*
emailVerificationManagerClientGG, J
.GGJ K!
SendVerificationEmailGGK `
(GG` a
userProfileGGa l
.GGl m
emailGGm r
)GGr s
;GGs t
ifHH 
(HH 
resultEmailSendedHH (
==HH) +
	ConstantsHH, 5
.HH5 6
SuccesOperationHH6 E
)HHE F
{II 
DialogManagerJJ %
.JJ% &#
ShowSuccessMessageAlertJJ& =
(JJ= >

PropertiesJJ> H
.JJH I
	ResourcesJJI R
.JJR S*
dialogEmailVerificationMessageJJS q
)JJq r
;JJr s
EditCredentialsViewKK +
editCredentialsViewKK, ?
=KK@ A
newKKB E
EditCredentialsViewKKF Y
(KKY Z
)KKZ [
;KK[ \
thisLL 
.LL 
NavigationServiceLL .
.LL. /
NavigateLL/ 7
(LL7 8
editCredentialsViewLL8 K
)LLK L
;LLL M
}MM 
elseNN 
{OO 
DialogManagerPP %
.PP% &!
ShowErrorMessageAlertPP& ;
(PP; <

PropertiesPP< F
.PPF G
	ResourcesPPG P
.PPP Q"
dialogCouldntSendEmailPPQ g
)PPg h
;PPh i
}QQ 
}RR 
}SS 
catchTT 
(TT %
EndpointNotFoundExceptionTT ,
endPointExceptionTT- >
)TT> ?
{UU 
loggerVV 
.VV 
LogFatalVV 
(VV  
endPointExceptionVV  1
)VV1 2
;VV2 3
DialogManagerWW 
.WW !
ShowErrorMessageAlertWW 3
(WW3 4

PropertiesWW4 >
.WW> ?
	ResourcesWW? H
.WWH I#
dialogEndPointExceptionWWI `
)WW` a
;WWa b
}XX 
catchYY 
(YY 
TimeoutExceptionYY #
timeOutExceptionYY$ 4
)YY4 5
{ZZ 
logger[[ 
.[[ 
LogWarn[[ 
([[ 
timeOutException[[ /
)[[/ 0
;[[0 1
DialogManager\\ 
.\\ !
ShowErrorMessageAlert\\ 3
(\\3 4

Properties\\4 >
.\\> ?
	Resources\\? H
.\\H I"
dialogTimeOutException\\I _
)\\_ `
;\\` a
}]] 
catch^^ 
(^^ "
CommunicationException^^ )"
communicationException^^* @
)^^@ A
{__ 
logger`` 
.`` 
LogFatal`` 
(``  "
communicationException``  6
)``6 7
;``7 8
DialogManageraa 
.aa !
ShowErrorMessageAlertaa 3
(aa3 4

Propertiesaa4 >
.aa> ?
	Resourcesaa? H
.aaH I'
dialogComunicationExceptionaaI d
)aad e
;aae f
}bb 
}cc 	
privateee 
boolee '
ValidateExistingUserAccountee 0
(ee0 1
)ee1 2
{ff 	
LoggerManagergg 
loggergg  
=gg! "
newgg# &
LoggerManagergg' 4
(gg4 5
thisgg5 9
.gg9 :
GetTypegg: A
(ggA B
)ggB C
)ggC D
;ggD E
boolhh 

validationhh 
=hh 
falsehh #
;hh# $
tryii 
{jj 
	HiveProxykk 
.kk 
UserManagerClientkk +
userManagerClientkk, =
=kk> ?
newkk@ C
	HiveProxykkD M
.kkM N
UserManagerClientkkN _
(kk_ `
)kk` a
;kka b
intll 
resultValidationll $
=ll% &
userManagerClientll' 8
.ll8 9&
VerifyExistingAccesAccountll9 S
(llS T

txtb_EmailllT ^
.ll^ _
Textll_ c
,llc d
txtb_Usernamelld q
.llq r
Textllr v
)llv w
;llw x
ifmm 
(mm 
resultValidationmm #
==mm$ &
	Constantsmm' 0
.mm0 1
DataMatchesmm1 <
)mm< =
{nn 

validationoo 
=oo  
trueoo! %
;oo% &
}pp 
elseqq 
ifqq 
(qq 
resultValidationqq (
==qq) +
	Constantsqq, 5
.qq5 6
NoDataMatchesqq6 C
)qqC D
{rr 
DialogManagerss !
.ss! "#
ShowWarningMessageAlertss" 9
(ss9 :

Propertiesss: D
.ssD E
	ResourcesssE N
.ssN O(
dialogCouldntFindUserAccountssO k
)ssk l
;ssl m
}tt 
elseuu 
ifuu 
(uu 
resultValidationuu (
==uu) +
	Constantsuu, 5
.uu5 6
ErrorOperationuu6 D
)uuD E
{vv 
DialogManagerww !
.ww! "!
ShowErrorMessageAlertww" 7
(ww7 8

Propertiesww8 B
.wwB C
	ResourceswwC L
.wwL M
dialogDataBaseErrorwwM `
)ww` a
;wwa b
}xx 
}yy 
catchzz 
(zz %
EndpointNotFoundExceptionzz ,
endPointExceptionzz- >
)zz> ?
{{{ 
logger|| 
.|| 
LogFatal|| 
(||  
endPointException||  1
)||1 2
;||2 3
DialogManager}} 
.}} !
ShowErrorMessageAlert}} 3
(}}3 4

Properties}}4 >
.}}> ?
	Resources}}? H
.}}H I#
dialogEndPointException}}I `
)}}` a
;}}a b
}~~ 
catch 
( 
TimeoutException #
timeOutException$ 4
)4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
return
 

validation
 
;
 
}
 	
private
 
bool
 
ValidateFields
 #
(
# $
)
$ %
{
 	
bool
 
validateUsername
 !
=
" #
	Validator
$ -
.
- .
ValidateUsername
. >
(
> ?
txtb_Username
? L
.
L M
Text
M Q
)
Q R
;
R S
bool
 
validateEmail
 
=
  
	Validator
! *
.
* +
ValidateEmail
+ 8
(
8 9

txtb_Email
9 C
.
C D
Text
D H
)
H I
;
I J
if
 
(
 
!
 
validateUsername
  
)
  !
{
 
txtb_Username
 
.
 
BorderBrush
 )
=
* +
Brushes
, 3
.
3 4
Red
4 7
;
7 8
}
 
if
 
(
 
!
 
validateEmail
 
)
 
{
 

txtb_Email
 
.
 
BorderBrush
 &
=
' (
Brushes
) 0
.
0 1
Red
1 4
;
4 5
}
 
return
 
validateUsername
 #
&&
$ &
validateEmail
' 4
;
4 5
}
 	
}
 
} ãt
}C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\StatisticsView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
StatisticsView '
:( )
Page* .
{ 
public  
ObservableCollection #
<# $
PlayerStatistic$ 3
>3 4
WorldStatisticsData5 H
{I J
getK N
;N O
setP S
;S T
}U V
public  
ObservableCollection #
<# $
PlayerStatistic$ 3
>3 4"
PersonalStatisticsData5 K
{L M
getN Q
;Q R
setS V
;V W
}X Y
public 
StatisticsView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
LoadSampleData   
(   
)   
;   
}"" 	
private$$ 
void$$ 
LoadSampleData$$ #
($$# $
)$$$ %
{%% 	
}(( 	
private** 
void** '
BtnPersonalStatistics_Click** 0
(**0 1
object**1 7
sender**8 >
,**> ?
RoutedEventArgs**@ O
e**P Q
)**Q R
{++ 	$
stckp_PersonalStatistics,, $
.,,$ %

Visibility,,% /
=,,0 1

Visibility,,2 <
.,,< =
Visible,,= D
;,,D E!
stckp_WorldStatistics-- !
.--! "

Visibility--" ,
=--- .

Visibility--/ 9
.--9 :
	Collapsed--: C
;--C D"
GetPersonalLeaderBoard.. "
(.." #
)..# $
;..$ %
}00 	
private22 
void22 "
GetPersonalLeaderBoard22 +
(22+ ,
)22, -
{33 	
LoggerManager44 
logger44  
=44! "
new44# &
LoggerManager44' 4
(444 5
this445 9
.449 :
GetType44: A
(44A B
)44B C
)44C D
;44D E
	HiveProxy55 
.55 $
LeaderBoardManagerClient55 .$
leaderBoardManagerClient55/ G
=55H I
new55J M
	HiveProxy55N W
.55W X$
LeaderBoardManagerClient55X p
(55p q
)55q r
;55r s
try66 
{77 
LeaderBoardPlayer88 !
leaderBoardPlayer88" 3
=884 5$
leaderBoardManagerClient886 N
.88N O"
GetPersonalLeaderBoard88O e
(88e f 
UserProfileSingleton88f z
.88z {
	idAccount	88{ 
)
88 
;
88 
if99 
(99 
leaderBoardPlayer99 $
.99$ %
	idAccount99% .
==99/ 1
	Constants992 ;
.99; <
NoDataMatches99< I
)99I J
{:: 
DialogManager;; !
.;;! "!
ShowErrorMessageAlert;;" 7
(;;7 8

Properties;;8 B
.;;B C
	Resources;;C L
.;;L M'
dialogNoPersonalLeaderboard;;M h
);;h i
;;;i j
}<< 
else== 
if== 
(== 
leaderBoardPlayer== )
.==) *
	idAccount==* 3
====4 6
	Constants==7 @
.==@ A
ErrorOperation==A O
)==O P
{>> 
DialogManager?? !
.??! "!
ShowErrorMessageAlert??" 7
(??7 8

Properties??8 B
.??B C
	Resources??C L
.??L M
dialogDataBaseError??M `
)??` a
;??a b
}@@ 
elseAA 
{BB "
PersonalStatisticsDataCC *
=CC+ ,
newCC- 0 
ObservableCollectionCC1 E
<CCE F
PlayerStatisticCCF U
>CCU V
{DD 
newEE 
PlayerStatisticEE +
{FF 
ProfileImageGG (
=GG) * 
UserProfileSingletonGG+ ?
.GG? @

imageRouteGG@ J
,GGJ K
NameHH  
=HH! "
leaderBoardPlayerHH# 4
.HH4 5
usernameHH5 =
,HH= >
WinsII  
=II! "
leaderBoardPlayerII# 4
.II4 5
totalWonMatchesII5 D
,IID E
LossesJJ "
=JJ# $
leaderBoardPlayerJJ% 6
.JJ6 7
totalLostMatchesJJ7 G
,JJG H

TotalGamesKK &
=KK' (
leaderBoardPlayerKK) :
.KK: ;
totalMatchesKK; G
}LL 
}MM 
;MM !
dg_PersonalStatisticsNN )
.NN) *
ItemsSourceNN* 5
=NN6 7"
PersonalStatisticsDataNN8 N
;NNN O
}OO 
}PP 
catchQQ 
(QQ %
EndpointNotFoundExceptionQQ ,
endPointExceptionQQ- >
)QQ> ?
{RR 
loggerSS 
.SS 
LogFatalSS 
(SS  
endPointExceptionSS  1
)SS1 2
;SS2 3
DialogManagerTT 
.TT !
ShowErrorMessageAlertTT 3
(TT3 4

PropertiesTT4 >
.TT> ?
	ResourcesTT? H
.TTH I#
dialogEndPointExceptionTTI `
)TT` a
;TTa b
}UU 
catchVV 
(VV 
TimeoutExceptionVV #
timeOutExceptionVV$ 4
)VV4 5
{WW 
loggerXX 
.XX 
LogWarnXX 
(XX 
timeOutExceptionXX /
)XX/ 0
;XX0 1
DialogManagerYY 
.YY !
ShowErrorMessageAlertYY 3
(YY3 4

PropertiesYY4 >
.YY> ?
	ResourcesYY? H
.YYH I"
dialogTimeOutExceptionYYI _
)YY_ `
;YY` a
}ZZ 
catch[[ 
([[ "
CommunicationException[[ )"
communicationException[[* @
)[[@ A
{\\ 
logger]] 
.]] 
LogFatal]] 
(]]  "
communicationException]]  6
)]]6 7
;]]7 8
DialogManager^^ 
.^^ !
ShowErrorMessageAlert^^ 3
(^^3 4

Properties^^4 >
.^^> ?
	Resources^^? H
.^^H I'
dialogComunicationException^^I d
)^^d e
;^^e f
}__ 
}`` 	
privatebb 
voidbb $
BtnWorldStatistics_Clickbb -
(bb- .
objectbb. 4
senderbb5 ;
,bb; <
RoutedEventArgsbb= L
ebbM N
)bbN O
{cc 	$
stckp_PersonalStatisticsdd $
.dd$ %

Visibilitydd% /
=dd0 1

Visibilitydd2 <
.dd< =
	Collapseddd= F
;ddF G!
stckp_WorldStatisticsee !
.ee! "

Visibilityee" ,
=ee- .

Visibilityee/ 9
.ee9 :
Visibleee: A
;eeA B!
GetGlobalLeaderboardsff !
(ff! "
)ff" #
;ff# $
}gg 	
privateii 
voidii !
GetGlobalLeaderboardsii *
(ii* +
)ii+ ,
{jj 	
LoggerManagerkk 
loggerkk  
=kk! "
newkk# &
LoggerManagerkk' 4
(kk4 5
thiskk5 9
.kk9 :
GetTypekk: A
(kkA B
)kkB C
)kkC D
;kkD E
	HiveProxyll 
.ll $
LeaderBoardManagerClientll .$
leaderBoardManagerClientll/ G
=llH I
newllJ M
	HiveProxyllN W
.llW X$
LeaderBoardManagerClientllX p
(llp q
)llq r
;llr s
trymm 
{nn 
LeaderBoardPlayeroo !
[oo! "
]oo" #
leaderBoardsoo$ 0
=oo1 2$
leaderBoardManagerClientoo3 K
.ooK L%
GetAllPlayersLeaderboardsooL e
(ooe f
)oof g
;oog h
Listpp 
<pp 
LeaderBoardPlayerpp &
>pp& '
leaderBoardsSortedpp( :
=pp; <
leaderBoardspp= I
.ppI J
OrderByDescendingppJ [
(pp[ \
leaderboardpp\ g
=>pph j
leaderboardppk v
.ppv w
totalWonMatches	ppw 
)
pp 
.
pp 
ToList
pp 
(
pp 
)
pp 
;
pp 
Listqq 
<qq 
PlayerStatisticqq $
>qq$ %
playerStatisticListqq& 9
=qq: ;
newqq< ?
Listqq@ D
<qqD E
PlayerStatisticqqE T
>qqT U
(qqU V
)qqV W
;qqW X
forrr 
(rr 
intrr #
indexLeaderBoardsSortedrr 0
=rr1 2
$numrr3 4
;rr4 5#
indexLeaderBoardsSortedrr6 M
<rrN O
leaderBoardsSortedrrP b
.rrb c
Countrrc h
;rrh i$
indexLeaderBoardsSorted	rrj 
++
rr 
)
rr 
{ss 
PlayerStatistictt #
playerStatistictt$ 3
=tt4 5
newtt6 9
PlayerStatistictt: I
(ttI J
)ttJ K
{uu 
Namevv 
=vv 
leaderBoardsSortedvv 1
[vv1 2#
indexLeaderBoardsSortedvv2 I
]vvI J
.vvJ K
usernamevvK S
,vvS T
ProfileImageww $
=ww% &
leaderBoardsSortedww' 9
[ww9 :#
indexLeaderBoardsSortedww: Q
]wwQ R
.wwR S
imageProfilewwS _
,ww_ `

TotalGamesxx "
=xx# $
leaderBoardsSortedxx% 7
[xx7 8#
indexLeaderBoardsSortedxx8 O
]xxO P
.xxP Q
totalMatchesxxQ ]
,xx] ^
Lossesyy 
=yy  
leaderBoardsSortedyy! 3
[yy3 4#
indexLeaderBoardsSortedyy4 K
]yyK L
.yyL M
totalLostMatchesyyM ]
,yy] ^
Winszz 
=zz 
leaderBoardsSortedzz 1
[zz1 2#
indexLeaderBoardsSortedzz2 I
]zzI J
.zzJ K
totalWonMatcheszzK Z
,zzZ [
Rank{{ 
={{ #
indexLeaderBoardsSorted{{ 6
+{{7 8
$num{{9 :
}|| 
;|| 
playerStatisticList}} '
.}}' (
Add}}( +
(}}+ ,
playerStatistic}}, ;
)}}; <
;}}< =
}~~ 
dg_WorldStatistics "
." #
ItemsSource# .
=/ 0
playerStatisticList1 D
;D E
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 
Image_MouseDown
 $
(
$ %
object
% +
sender
, 2
,
2 3"
MouseButtonEventArgs
4 H
e
I J
)
J K
{
 	
GoToMainMenuView
 
(
 
)
 
;
 
}
 	
private
 
void
 
GoToMainMenuView
 %
(
% &
)
& '
{
 	
MainMenu
 
mainMenu
 
=
 
new
  #
MainMenu
$ ,
(
, -
)
- .
;
. /
this
 
.
 
NavigationService
 "
.
" #
Navigate
# +
(
+ ,
mainMenu
, 4
)
4 5
;
5 6
}
 	
private
 
void
 !
DataGrid_LoadingRow
 (
(
( )
object
) /
sender
0 6
,
6 7"
DataGridRowEventArgs
8 L
e
M N
)
N O
{
 	
e
 
.
 
Row
 
.
 
Header
 
=
 
(
 
e
 
.
 
Row
 !
.
! "
GetIndex
" *
(
* +
)
+ ,
+
- .
$num
/ 0
)
0 1
.
1 2
ToString
2 :
(
: ;
)
; <
;
< =
}
   	
}
¢¢ 
public
¤¤ 

class
¤¤ 
PlayerStatistic
¤¤  
{
¥¥ 
public
¦¦ 
int
¦¦ 
Rank
¦¦ 
{
¦¦ 
get
¦¦ 
;
¦¦ 
set
¦¦ "
;
¦¦" #
}
¦¦$ %
public
§§ 
string
§§ 
ProfileImage
§§ "
{
§§# $
get
§§% (
;
§§( )
set
§§* -
;
§§- .
}
§§/ 0
public
¨¨ 
string
¨¨ 
Name
¨¨ 
{
¨¨ 
get
¨¨  
;
¨¨  !
set
¨¨" %
;
¨¨% &
}
¨¨' (
public
©© 
int
©© 
Wins
©© 
{
©© 
get
©© 
;
©© 
set
©© "
;
©©" #
}
©©$ %
public
ªª 
int
ªª 
Losses
ªª 
{
ªª 
get
ªª 
;
ªª  
set
ªª! $
;
ªª$ %
}
ªª& '
public
«« 
int
«« 

TotalGames
«« 
{
«« 
get
««  #
;
««# $
set
««% (
;
««( )
}
««* +
}
¬¬ 
}®® £
{C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\RegisterView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
RegisterView %
:& '
Page( ,
{ 
public 
RegisterView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
pwb_Password 
. 
PasswordChanged (
+=) +'
PwbPassword_PasswordChanged, G
;G H
pwb_ConfirmPassword 
.  
PasswordChanged  /
+=0 2+
ConfirmPassword_PasswordChanged3 R
;R S
} 	
private 
void 
Image_MouseDown $
($ %
object% +
sender, 2
,2 3 
MouseButtonEventArgs4 H
eI J
)J K
{   	
GoToLoginView!! 
(!! 
)!! 
;!! 
}"" 	
private$$ 
void$$ 
GoToLoginView$$ "
($$" #
)$$# $
{%% 	
	LoginView&& 
	loginView&& 
=&&  !
new&&" %
	LoginView&&& /
(&&/ 0
)&&0 1
;&&1 2
this'' 
.'' 
NavigationService'' "
.''" #
Navigate''# +
(''+ ,
	loginView'', 5
)''5 6
;''6 7
}(( 	
private** 
void** "
BtnCreateAccount_Click** +
(**+ ,
object**, 2
sender**3 9
,**9 :
RoutedEventArgs**; J
e**K L
)**L M
{++ 	
RestartColorTxtBox,, 
(,, 
),,  
;,,  !
Profile-- 
newProfileToAdd-- #
=--$ %
new--& )
Profile--* 1
{.. 
username// 
=// 
txtb_Username// (
.//( )
Text//) -
,//- .
password00 
=00 
pwb_Password00 '
.00' (
Password00( 0
,000 1
email11 
=11 

txtb_Email11 "
.11" #
Text11# '
}22 
;22 
if44 
(44 
VerifyField44 
(44 
)44 
)44 
{55 
if66 
(66 !
ValidateSamePasswords66 )
(66) *
)66* +
)66+ ,
{77 
int88 
insertionResult88 '
=88( )
AddUser88* 1
(881 2
newProfileToAdd882 A
)88A B
;88B C
if99 
(99 
insertionResult99 '
==99( *
$num99+ ,
)99, -
{:: 
DialogManager;; %
.;;% &#
ShowSuccessMessageAlert;;& =
(;;= >

Properties;;> H
.;;H I
	Resources;;I R
.;;R S 
dialogAccountCreated;;S g
);;g h
;;;h i
GoToLoginView<< %
(<<% &
)<<& '
;<<' (
}== 
}>> 
else?? 
{@@ 
DialogManagerAA !
.AA! "#
ShowWarningMessageAlertAA" 9
(AA9 :

PropertiesAA: D
.AAD E
	ResourcesAAE N
.AAN O%
dialogMissmatchesPasswordAAO h
)AAh i
;AAi j
}BB 
}CC 
elseDD 
{EE 
DialogManagerFF 
.FF !
ShowErrorMessageAlertFF 3
(FF3 4

PropertiesFF4 >
.FF> ?
	ResourcesFF? H
.FFH I
dialogWrongDataFFI X
)FFX Y
;FFY Z
}GG 
}HH 	
publicJJ 
intJJ 
AddUserJJ 
(JJ 
ProfileJJ "
profileJJ# *
)JJ* +
{KK 	
LoggerManagerLL 
loggerLL  
=LL! "
newLL# &
LoggerManagerLL' 4
(LL4 5
thisLL5 9
.LL9 :
GetTypeLL: A
(LLA B
)LLB C
)LLC D
;LLD E
intMM 
insertionResultMM 
=MM  !
-MM" #
$numMM# $
;MM$ %
tryOO 
{PP 
	HiveProxyQQ 
.QQ 
UserManagerClientQQ +
userManagerClientQQ, =
=QQ> ?
newQQ@ C
	HiveProxyQQD M
.QQM N
UserManagerClientQQN _
(QQ_ `
)QQ` a
;QQa b
intRR 
validationExistedRR %
=RR& '
userManagerClientRR( 9
.RR9 :&
VerifyExistingAccesAccountRR: T
(RRT U
profileRRU \
.RR\ ]
emailRR] b
,RRb c
profileRRd k
.RRk l
usernameRRl t
)RRt u
;RRu v
ifTT 
(TT 
validationExistedTT %
==TT& (
$numTT) *
)TT* +
{UU 
ProfileVV 
newProfileToAddVV +
=VV, -*
AddDefaultInformationToProfileVV. L
(VVL M
profileVVM T
)VVT U
;VVU V
insertionResultWW #
=WW$ %
userManagerClientWW& 7
.WW7 8
AddUserWW8 ?
(WW? @
newProfileToAddWW@ O
)WWO P
;WWP Q
}XX 
elseYY 
ifYY 
(YY 
validationExistedYY *
>=YY+ -
$numYY. /
)YY/ 0
{ZZ 
DialogManager[[ !
.[[! "!
ShowErrorMessageAlert[[" 7
([[7 8

Properties[[8 B
.[[B C
	Resources[[C L
.[[L M 
dialogExistinAccount[[M a
)[[a b
;[[b c
}\\ 
else]] 
if]] 
(]] 
validationExisted]] *
==]]+ -
-]]. /
$num]]/ 0
)]]0 1
{^^ 
DialogManager__ !
.__! "!
ShowErrorMessageAlert__" 7
(__7 8

Properties__8 B
.__B C
	Resources__C L
.__L M
dialogDataBaseError__M `
)__` a
;__a b
}`` 
}aa 
catchbb 
(bb %
EndpointNotFoundExceptionbb ,
endPointExceptionbb- >
)bb> ?
{cc 
loggerdd 
.dd 
LogFataldd 
(dd  
endPointExceptiondd  1
)dd1 2
;dd2 3
DialogManageree 
.ee !
ShowErrorMessageAlertee 3
(ee3 4

Propertiesee4 >
.ee> ?
	Resourcesee? H
.eeH I#
dialogEndPointExceptioneeI `
)ee` a
;eea b
}ff 
catchgg 
(gg 
TimeoutExceptiongg #
timeOutExceptiongg$ 4
)gg4 5
{hh 
loggerii 
.ii 
LogWarnii 
(ii 
timeOutExceptionii /
)ii/ 0
;ii0 1
DialogManagerjj 
.jj !
ShowErrorMessageAlertjj 3
(jj3 4

Propertiesjj4 >
.jj> ?
	Resourcesjj? H
.jjH I"
dialogTimeOutExceptionjjI _
)jj_ `
;jj` a
}kk 
catchll 
(ll "
CommunicationExceptionll )"
communicationExceptionll* @
)ll@ A
{mm 
loggernn 
.nn 
LogFatalnn 
(nn  "
communicationExceptionnn  6
)nn6 7
;nn7 8
DialogManageroo 
.oo !
ShowErrorMessageAlertoo 3
(oo3 4

Propertiesoo4 >
.oo> ?
	Resourcesoo? H
.ooH I'
dialogComunicationExceptionooI d
)ood e
;ooe f
}pp 
returnrr 
insertionResultrr "
;rr" #
}ss 	
publicuu 
Profileuu *
AddDefaultInformationToProfileuu 5
(uu5 6
Profileuu6 =
profileuu> E
)uuE F
{vv 	
stringww 
hashedPasswordww !
=ww" #
Hasherww$ *
.ww* +

hashToSHA2ww+ 5
(ww5 6
profileww6 =
.ww= >
passwordww> F
)wwF G
;wwG H
Profileyy 

newProfileyy 
=yy  
newyy! $
Profileyy% ,
{zz 
email{{ 
={{ 
profile{{ 
.{{  
email{{  %
,{{% &
username|| 
=|| 
profile|| "
.||" #
username||# +
,||+ ,
password}} 
=}} 
hashedPassword}} )
,}}) *
nickname~~ 
=~~ 
profile~~ "
.~~" #
username~~# +
,~~+ ,
	imagePath 
= 
ProfileGenerator ,
., -#
RandomChooserAvatarIcon- D
(D E
)E F
,F G
createdDate
 
=
 
DateTime
 &
.
& '
Now
' *
,
* +
description
 
=
 
ProfileGenerator
 .
.
. /(
RandomDescriptionGenerator
/ I
(
I J
)
J K
,
K L

reputation
 
=
 
$num
  
}
 
;
 
return
 

newProfile
 
;
 
}
 	
public
 
bool
 #
ValidateSamePasswords
 )
(
) *
)
* +
{
 	
return
 "
txtb_PasswordDisplay
 '
.
' (
Text
( ,
==
- /)
txtb_ConfirmPasswordDisplay
0 K
.
K L
Text
L P
;
P Q
}
 	
public
 
void
  
RestartColorTxtBox
 &
(
& '
)
' (
{
 	
txtb_Username
 
.
 
BorderBrush
 %
=
& '
Brushes
( /
.
/ 0
White
0 5
;
5 6

txtb_Email
 
.
 
BorderBrush
 "
=
# $
Brushes
% ,
.
, -
White
- 2
;
2 3
brd_Password
 
.
 
BorderBrush
 $
=
% &
Brushes
' .
.
. /
White
/ 4
;
4 5!
brd_PasswordConfirm
 
.
  
BorderBrush
  +
=
, -
Brushes
. 5
.
5 6
White
6 ;
;
; <
}
 	
public
 
bool
 
VerifyField
 
(
  
)
  !
{
 	
bool
 
username
 
=
 
	Validator
 %
.
% &
ValidateUsername
& 6
(
6 7
txtb_Username
7 D
.
D E
Text
E I
)
I J
;
J K
bool
 
email
 
=
 
	Validator
 "
.
" #
ValidateEmail
# 0
(
0 1

txtb_Email
1 ;
.
; <
Text
< @
)
@ A
;
A B
bool
 
password
 
=
 
	Validator
 %
.
% &
ValidatePassword
& 6
(
6 7
pwb_Password
7 C
.
C D
Password
D L
)
L M
;
M N
bool
 
confirmPassword
  
=
! "
	Validator
# ,
.
, -
ValidatePassword
- =
(
= >
pwb_Password
> J
.
J K
Password
K S
)
S T
;
T U
if
 
(
 
!
 
username
 
)
 
txtb_Username
 (
.
( )
BorderBrush
) 4
=
5 6
Brushes
7 >
.
> ?
Red
? B
;
B C
if
 
(
 
!
 
email
 
)
 

txtb_Email
 "
.
" #
BorderBrush
# .
=
/ 0
Brushes
1 8
.
8 9
Red
9 <
;
< =
if
 
(
 
!
 
password
 
)
 
brd_Password
 '
.
' (
BorderBrush
( 3
=
4 5
Brushes
6 =
.
= >
Red
> A
;
A B
if
 
(
 
!
 
confirmPassword
  
)
  !!
brd_PasswordConfirm
" 5
.
5 6
BorderBrush
6 A
=
B C
Brushes
D K
.
K L
Red
L O
;
O P
return
¡¡ 
username
¡¡ 
&&
¡¡ 
password
¡¡ '
&&
¡¡( *
email
¡¡+ 0
&&
¡¡1 3
confirmPassword
¡¡4 C
;
¡¡C D
}
¢¢ 	
private
¤¤ 
void
¤¤ )
PwbPassword_PasswordChanged
¤¤ 0
(
¤¤0 1
object
¤¤1 7
sender
¤¤8 >
,
¤¤> ?
RoutedEventArgs
¤¤@ O
e
¤¤P Q
)
¤¤Q R
{
¥¥ 	*
UpdatePasswordVisibilityIcon
¦¦ (
(
¦¦( )
pwb_Password
¦¦) 5
,
¦¦5 6&
tgbtn_PasswordVisibility
¦¦7 O
)
¦¦O P
;
¦¦P Q+
UpdatePetImageBasedOnPassword
§§ )
(
§§) *
)
§§* +
;
§§+ ,
}
¨¨ 	
private
ªª 
void
ªª -
ConfirmPassword_PasswordChanged
ªª 4
(
ªª4 5
object
ªª5 ;
sender
ªª< B
,
ªªB C
RoutedEventArgs
ªªD S
e
ªªT U
)
ªªU V
{
«« 	*
UpdatePasswordVisibilityIcon
¬¬ (
(
¬¬( )!
pwb_ConfirmPassword
¬¬) <
,
¬¬< =-
tgbtn_ConfirmPasswordVisibility
¬¬> ]
)
¬¬] ^
;
¬¬^ _+
UpdatePetImageBasedOnPassword
­­ )
(
­­) *
)
­­* +
;
­­+ ,
}
®® 	
private
°° 
void
°° -
BtnPasswordVisibility_MouseDown
°° 4
(
°°4 5
object
°°5 ;
sender
°°< B
,
°°B C"
MouseButtonEventArgs
°°D X
e
°°Y Z
)
°°Z [
{
±± 	&
TogglePasswordVisibility
²² $
(
²²$ %
true
²²% )
,
²²) *

isPassword
²²+ 5
:
²²5 6
true
²²7 ;
)
²²; <
;
²²< =
ChangePetImage
³³ 
(
³³ 
$str
³³ G
)
³³G H
;
³³H I
}
´´ 	
private
¶¶ 
void
¶¶ +
BtnPasswordVisibility_MouseUp
¶¶ 2
(
¶¶2 3
object
¶¶3 9
sender
¶¶: @
,
¶¶@ A"
MouseButtonEventArgs
¶¶B V
e
¶¶W X
)
¶¶X Y
{
·· 	&
TogglePasswordVisibility
¸¸ $
(
¸¸$ %
false
¸¸% *
,
¸¸* +

isPassword
¸¸, 6
:
¸¸6 7
true
¸¸8 <
)
¸¸< =
;
¸¸= >
}
¹¹ 	
private
»» 
void
»» 4
&BtnConfirmPasswordVisibility_MouseDown
»» ;
(
»»; <
object
»»< B
sender
»»C I
,
»»I J"
MouseButtonEventArgs
»»K _
e
»»` a
)
»»a b
{
¼¼ 	&
TogglePasswordVisibility
½½ $
(
½½$ %
true
½½% )
,
½½) *

isPassword
½½+ 5
:
½½5 6
false
½½7 <
)
½½< =
;
½½= >
ChangePetImage
¾¾ 
(
¾¾ 
$str
¾¾ G
)
¾¾G H
;
¾¾H I
}
¿¿ 	
private
ÁÁ 
void
ÁÁ 2
$BtnConfirmPasswordVisibility_MouseUp
ÁÁ 9
(
ÁÁ9 :
object
ÁÁ: @
sender
ÁÁA G
,
ÁÁG H"
MouseButtonEventArgs
ÁÁI ]
e
ÁÁ^ _
)
ÁÁ_ `
{
ÂÂ 	&
TogglePasswordVisibility
ÃÃ $
(
ÃÃ$ %
false
ÃÃ% *
,
ÃÃ* +

isPassword
ÃÃ, 6
:
ÃÃ6 7
false
ÃÃ8 =
)
ÃÃ= >
;
ÃÃ> ?
}
ÄÄ 	
private
ÆÆ 
void
ÆÆ *
UpdatePasswordVisibilityIcon
ÆÆ 1
(
ÆÆ1 2
PasswordBox
ÆÆ2 =
passwordBox
ÆÆ> I
,
ÆÆI J
ToggleButton
ÆÆK W
toggleButton
ÆÆX d
)
ÆÆd e
{
ÇÇ 	
toggleButton
ÈÈ 
.
ÈÈ 

Visibility
ÈÈ #
=
ÈÈ$ %
!
ÈÈ& '
string
ÈÈ' -
.
ÈÈ- .
IsNullOrEmpty
ÈÈ. ;
(
ÈÈ; <
passwordBox
ÈÈ< G
.
ÈÈG H
Password
ÈÈH P
)
ÈÈP Q
?
ÈÈR S

Visibility
ÈÈT ^
.
ÈÈ^ _
Visible
ÈÈ_ f
:
ÈÈg h

Visibility
ÈÈi s
.
ÈÈs t
	Collapsed
ÈÈt }
;
ÈÈ} ~
}
ÉÉ 	
private
ËË 
void
ËË &
TogglePasswordVisibility
ËË -
(
ËË- .
bool
ËË. 2
	isVisible
ËË3 <
,
ËË< =
bool
ËË> B

isPassword
ËËC M
)
ËËM N
{
ÌÌ 	
if
ÍÍ 
(
ÍÍ 

isPassword
ÍÍ 
)
ÍÍ 
{
ÎÎ 
ToggleVisibility
ÏÏ  
(
ÏÏ  !
	isVisible
ÏÏ! *
,
ÏÏ* +
brd_Password
ÏÏ, 8
,
ÏÏ8 9!
brd_PasswordDisplay
ÏÏ: M
,
ÏÏM N"
txtb_PasswordDisplay
ÏÏO c
,
ÏÏc d
pwb_Password
ÏÏe q
)
ÏÏq r
;
ÏÏr s
}
ÐÐ 
else
ÑÑ 
{
ÒÒ 
ToggleVisibility
ÓÓ  
(
ÓÓ  !
	isVisible
ÓÓ! *
,
ÓÓ* +!
pwb_ConfirmPassword
ÓÓ, ?
,
ÓÓ? @(
brd_PasswordDisplayConfirm
ÓÓA [
,
ÓÓ[ \)
txtb_ConfirmPasswordDisplay
ÓÓ] x
,
ÓÓx y"
pwb_ConfirmPasswordÓÓz 
)ÓÓ 
;ÓÓ 
}
ÔÔ 
}
ÕÕ 	
private
×× 
void
×× 
ToggleVisibility
×× %
(
××% &
bool
××& *
	isVisible
××+ 4
,
××4 5
	UIElement
××6 ?
passwordElement
××@ O
,
××O P
	UIElement
××Q Z
displayElement
××[ i
,
××i j
TextBox
××k r
displayTextBox××s 
,×× 
PasswordBox×× 
passwordBox×× 
)×× 
{
ØØ 	
passwordElement
ÙÙ 
.
ÙÙ 

Visibility
ÙÙ &
=
ÙÙ' (
	isVisible
ÙÙ) 2
?
ÙÙ3 4

Visibility
ÙÙ5 ?
.
ÙÙ? @
	Collapsed
ÙÙ@ I
:
ÙÙJ K

Visibility
ÙÙL V
.
ÙÙV W
Visible
ÙÙW ^
;
ÙÙ^ _
displayElement
ÚÚ 
.
ÚÚ 

Visibility
ÚÚ %
=
ÚÚ& '
	isVisible
ÚÚ( 1
?
ÚÚ2 3

Visibility
ÚÚ4 >
.
ÚÚ> ?
Visible
ÚÚ? F
:
ÚÚG H

Visibility
ÚÚI S
.
ÚÚS T
	Collapsed
ÚÚT ]
;
ÚÚ] ^
if
ÜÜ 
(
ÜÜ 
	isVisible
ÜÜ 
)
ÜÜ 
displayTextBox
ÝÝ 
.
ÝÝ 
Text
ÝÝ #
=
ÝÝ$ %
passwordBox
ÝÝ& 1
.
ÝÝ1 2
Password
ÝÝ2 :
;
ÝÝ: ;
else
ÞÞ 
passwordBox
ßß 
.
ßß 
Password
ßß $
=
ßß% &
displayTextBox
ßß' 5
.
ßß5 6
Text
ßß6 :
;
ßß: ;
}
àà 	
private
ãã 
void
ãã +
UpdatePetImageBasedOnPassword
ãã 2
(
ãã2 3
)
ãã3 4
{
ää 	
if
åå 
(
åå 
string
åå 
.
åå 
IsNullOrEmpty
åå $
(
åå$ %
pwb_Password
åå% 1
.
åå1 2
Password
åå2 :
)
åå: ;
&&
åå< >
string
åå? E
.
ååE F
IsNullOrEmpty
ååF S
(
ååS T!
pwb_ConfirmPassword
ååT g
.
ååg h
Password
ååh p
)
ååp q
)
ååq r
{
ææ 
ChangePetImage
çç 
(
çç 
$str
çç ;
)
çç; <
;
çç< =
}
èè 
else
éé 
{
êê 
ChangePetImage
ëë 
(
ëë 
$str
ëë H
)
ëëH I
;
ëëI J
}
ìì 
}
íí 	
private
ïï 
void
ïï 
ChangePetImage
ïï #
(
ïï# $
string
ïï$ *
	imagePath
ïï+ 4
)
ïï4 5
{
ðð 	
img_Pet
ññ 
.
ññ 
Source
ññ 
=
ññ 
new
ññ  
BitmapImage
ññ! ,
(
ññ, -
new
ññ- 0
Uri
ññ1 4
(
ññ4 5
	imagePath
ññ5 >
,
ññ> ?
UriKind
ññ@ G
.
ññG H
Relative
ññH P
)
ññP Q
)
ññQ R
;
ññR S
}
òò 	
}
õõ 
}öö _
~C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\EditProfileView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
EditProfileView (
:) *
Page+ /
{ 
private 
string 
imageRouteProfile (
=) * 
UserProfileSingleton+ ?
.? @

imageRoute@ J
;J K
public 
EditProfileView 
( 
)  
{ 	
InitializeComponent 
(  
)  !
;! "+
ChargeAccountProfileInformation +
(+ ,
), -
;- .
} 	
private!! 
void!! 
Image_MouseDown!! $
(!!$ %
object!!% +
sender!!, 2
,!!2 3 
MouseButtonEventArgs!!4 H
e!!I J
)!!J K
{"" 	
GoToMainMenuView## 
(## 
)## 
;## 
}$$ 	
private&& 
void&& +
ChargeAccountProfileInformation&& 4
(&&4 5
)&&5 6
{'' 	
txtb_Description(( 
.(( 
Text(( !
=((" # 
UserProfileSingleton(($ 8
.((8 9
description((9 D
;((D E
txtb_Nickname)) 
.)) 
Text)) 
=))   
UserProfileSingleton))! 5
.))5 6
nickname))6 >
;))> ?
img_ProfilePic** 
.** 
Source** !
=**" #
new**$ '
BitmapImage**( 3
(**3 4
new**4 7
Uri**8 ;
(**; < 
UserProfileSingleton**< P
.**P Q

imageRoute**Q [
,**[ \
UriKind**] d
.**d e
Relative**e m
)**m n
)**n o
;**o p
}++ 	
private-- 
void-- 
GoToMainMenuView-- %
(--% &
)--& '
{.. 	
MainMenu// 
mainMenu// 
=// 
new//  #
MainMenu//$ ,
(//, -
)//- .
;//. /
this00 
.00 
NavigationService00 "
.00" #
Navigate00# +
(00+ ,
mainMenu00, 4
)004 5
;005 6
}11 	
private22 
void22 "
ChangeProfilePic_Click22 +
(22+ ,
object22, 2
sender223 9
,229 :
RoutedEventArgs22; J
e22K L
)22L M
{33 	
popup_Profile44 
.44 
IsOpen44  
=44! "
true44# '
;44' (
}55 	
private77 
void77 ,
 ListProfilePics_SelectionChanged77 5
(775 6
object776 <
sender77= C
,77C D%
SelectionChangedEventArgs77E ^
e77_ `
)77` a
{88 	
if99 
(99 
lsb_ProfilePics99 
.99  
SelectedItem99  ,
is99- /
ListBoxItem990 ;
selectedItem99< H
)99H I
{:: 
string;; 
selectedImage;; $
=;;% &
selectedItem;;' 3
.;;3 4
Tag;;4 7
.;;7 8
ToString;;8 @
(;;@ A
);;A B
;;;B C
img_ProfilePic<< 
.<< 
Source<< %
=<<& '
new<<( +
BitmapImage<<, 7
(<<7 8
new<<8 ;
Uri<<< ?
(<<? @
selectedImage<<@ M
,<<M N
UriKind<<O V
.<<V W
Relative<<W _
)<<_ `
)<<` a
;<<a b
imageRouteProfile== !
===" #
selectedImage==$ 1
;==1 2
popup_Profile>> 
.>> 
IsOpen>> $
=>>% &
false>>' ,
;>>, -
}?? 
}@@ 	
privateBB 
voidBB 
BtnConfirm_ClickBB %
(BB% &
objectBB& ,
senderBB- 3
,BB3 4
RoutedEventArgsBB5 D
eBBE F
)BBF G
{CC 	
RecolorFieldsDD 
(DD 
)DD 
;DD 
ifEE 
(EE 
ValidateFieldsEE 
(EE 
)EE  
)EE  !
{FF 
ifGG 
(GG 
!GG  
ValidateModificationGG )
(GG) *
)GG* +
)GG+ ,
{HH 
ModifyUserProfileII %
(II% &
)II& '
;II' (
}JJ 
elseKK 
{LL 
DialogManagerMM !
.MM! "#
ShowWarningMessageAlertMM" 9
(MM9 :

PropertiesMM: D
.MMD E
	ResourcesMME N
.MMN O-
!dialogSameDataProfileModificationMMO p
)MMp q
;MMq r
}NN 
}OO 
elsePP 
{QQ 
DialogManagerRR 
.RR !
ShowErrorMessageAlertRR 3
(RR3 4

PropertiesRR4 >
.RR> ?
	ResourcesRR? H
.RRH I
dialogWrongDataRRI X
)RRX Y
;RRY Z
}SS 
}TT 	
publicVV 
voidVV 
ModifyUserProfileVV %
(VV% &
)VV& '
{WW 	
LoggerManagerXX 
loggerXX  
=XX! "
newXX# &
LoggerManagerXX' 4
(XX4 5
thisXX5 9
.XX9 :
GetTypeXX: A
(XXA B
)XXB C
)XXC D
;XXD E
ProfileYY 
profileToUpdateYY #
=YY$ %
newYY& )
ProfileYY* 1
(YY1 2
)YY2 3
;YY3 4
profileToUpdateZZ 
.ZZ 
nicknameZZ $
=ZZ% &
txtb_NicknameZZ' 4
.ZZ4 5
TextZZ5 9
;ZZ9 :
profileToUpdate[[ 
.[[ 
description[[ '
=[[( )
txtb_Description[[* :
.[[: ;
Text[[; ?
;[[? @
profileToUpdate\\ 
.\\ 
	imagePath\\ %
=\\& '
imageRouteProfile\\( 9
;\\9 :
try]] 
{^^ 
	HiveProxy__ 
.__ 
UserManagerClient__ +
userManager__, 7
=__8 9
new__: =
	HiveProxy__> G
.__G H
UserManagerClient__H Y
(__Y Z
)__Z [
;__[ \
int`` 
modificationResult`` &
=``' (
userManager``) 4
.``4 5
UpdateProfile``5 B
(``B C
profileToUpdate``C R
,``R S 
UserProfileSingleton``T h
.``h i
email``i n
)``n o
;``o p
ifaa 
(aa 
modificationResultaa %
==aa& (
$numaa) *
)aa* +
{bb 
DialogManagercc !
.cc! "#
ShowSuccessMessageAlertcc" 9
(cc9 :

Propertiescc: D
.ccD E
	ResourcesccE N
.ccN O
dialogUpdatedDataccO `
)cc` a
;cca b 
UserProfileSingletondd (
.dd( )
nicknamedd) 1
=dd2 3
txtb_Nicknamedd4 A
.ddA B
TextddB F
;ddF G 
UserProfileSingletonee (
.ee( )
descriptionee) 4
=ee5 6
txtb_Descriptionee7 G
.eeG H
TexteeH L
;eeL M 
UserProfileSingletonff (
.ff( )

imageRouteff) 3
=ff4 5
imageRouteProfileff6 G
;ffG H
GoToMainMenuViewgg $
(gg$ %
)gg% &
;gg& '
}hh 
elsehh 
ifhh 
(hh 
modificationResulthh +
==hh, .
-hh/ 0
$numhh0 1
)hh1 2
{ii 
DialogManagerjj !
.jj! "!
ShowErrorMessageAlertjj" 7
(jj7 8

Propertiesjj8 B
.jjB C
	ResourcesjjC L
.jjL M
dialogDataBaseErrorjjM `
)jj` a
;jja b
}kk 
}ll 
catchmm 
(mm %
EndpointNotFoundExceptionmm ,
endPointExceptionmm- >
)mm> ?
{nn 
loggeroo 
.oo 
LogFataloo 
(oo  
endPointExceptionoo  1
)oo1 2
;oo2 3
DialogManagerpp 
.pp !
ShowErrorMessageAlertpp 3
(pp3 4

Propertiespp4 >
.pp> ?
	Resourcespp? H
.ppH I#
dialogEndPointExceptionppI `
)pp` a
;ppa b
}qq 
catchrr 
(rr 
TimeoutExceptionrr #
timeOutExceptionrr$ 4
)rr4 5
{ss 
loggertt 
.tt 
LogWarntt 
(tt 
timeOutExceptiontt /
)tt/ 0
;tt0 1
DialogManageruu 
.uu !
ShowErrorMessageAlertuu 3
(uu3 4

Propertiesuu4 >
.uu> ?
	Resourcesuu? H
.uuH I"
dialogTimeOutExceptionuuI _
)uu_ `
;uu` a
}vv 
catchww 
(ww "
CommunicationExceptionww )"
communicationExceptionww* @
)ww@ A
{xx 
loggeryy 
.yy 
LogFatalyy 
(yy  "
communicationExceptionyy  6
)yy6 7
;yy7 8
DialogManagerzz 
.zz !
ShowErrorMessageAlertzz 3
(zz3 4

Propertieszz4 >
.zz> ?
	Resourceszz? H
.zzH I'
dialogComunicationExceptionzzI d
)zzd e
;zze f
}{{ 
}|| 	
private~~ 
bool~~  
ValidateModification~~ )
(~~) *
)~~* +
{ 	
return
 
txtb_Description
 #
.
# $
Text
$ (
==
) +"
UserProfileSingleton
, @
.
@ A
description
A L
&&
M O
txtb_Nickname
P ]
.
] ^
Text
^ b
==
c e"
UserProfileSingleton
f z
.
z {
nickname{ 
&& 
imageRouteProfile
 !
==
" $"
UserProfileSingleton
% 9
.
9 :

imageRoute
: D
;
D E
}
 	
public
 
bool
 
ValidateFields
 "
(
" #
)
# $
{
 	
bool
  
nicknameValidation
 #
=
$ %
	Validator
& /
.
/ 0
ValidateNickName
0 @
(
@ A
txtb_Nickname
A N
.
N O
Text
O S
)
S T
;
T U
bool
 #
descriptionValidation
 &
=
' (
	Validator
) 2
.
2 3!
ValidateDescription
3 F
(
F G
txtb_Description
G W
.
W X
Text
X \
)
\ ]
;
] ^
if
 
(
 
!
  
nicknameValidation
 #
)
# $
{
 
txtb_Nickname
 
.
 
BorderBrush
 )
=
* +
Brushes
, 3
.
3 4
Red
4 7
;
7 8
}
 
if
 
(
 
!
 #
descriptionValidation
 &
)
& '
{
 
txtb_Description
  
.
  !
BorderBrush
! ,
=
- .
Brushes
/ 6
.
6 7
Red
7 :
;
: ;
}
 
return
  
nicknameValidation
 %
&&
& (#
descriptionValidation
) >
;
> ?
}
 	
public
 
void
 
RecolorFields
 !
(
! "
)
" #
{
 	
txtb_Description
 
.
 
BorderBrush
 (
=
) *
Brushes
+ 2
.
2 3
White
3 8
;
8 9
txtb_Nickname
 
.
 
BorderBrush
 %
=
& '
Brushes
( /
.
/ 0
White
0 5
;
5 6
}
 	
}
 
} µØ
xC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\LoginView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
	LoginView "
:# $
Page% )
{ 
public 
	LoginView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
pwb_Password 
. 
PasswordChanged (
+=) +'
PwbPassword_PasswordChanged, G
;G H
if 
( 
App 
. 
IsMusicPlaying "
)" #
{ 
App 
. 
	PlayMusic 
( 
$str /
)/ 0
;0 1
} 
} 	
private   
void   
BtnLogin_Click   #
(  # $
object  $ *
sender  + 1
,  1 2
RoutedEventArgs  3 B
e  C D
)  D E
{!! 	
txtb_Username"" 
."" 
BorderBrush"" %
=""& '
new""( +
SolidColorBrush"", ;
(""; <
Colors""< B
.""B C
White""C H
)""H I
;""I J
brd_Password## 
.## 
BorderBrush## $
=##% &
new##' *
SolidColorBrush##+ :
(##: ;
Colors##; A
.##A B
White##B G
)##G H
;##H I
Profile%% 
userAccount%% 
=%%  !
new%%" %
Profile%%& -
{&& 
username'' 
='' 
txtb_Username'' (
.''( )
Text'') -
,''- .
password(( 
=(( 
pwb_Password(( '
.((' (
Password((( 0
})) 
;)) 
if++ 
(++ 
verifyFields++ 
(++ 
)++ 
)++ 
{,, 
int-- 
validateCredentials-- '
=--( )
ValidateCredentials--* =
(--= >
userAccount--> I
)--I J
;--J K
if// 
(// 
validateCredentials// '
==//( *
$num//+ ,
)//, -
{00 '
ValidateExistingUserSession11 /
(11/ 0
)110 1
;111 2
}22 
else33 
if33 
(33 
validateCredentials33 ,
==33- /
$num330 1
)331 2
{44 
DialogManager55 !
.55! "!
ShowErrorMessageAlert55" 7
(557 8

Properties558 B
.55B C
	Resources55C L
.55L M(
dialogMissmatchesCredentials55M i
)55i j
;55j k
}66 
}77 
else88 
{99 
DialogManager:: 
.:: !
ShowErrorMessageAlert:: 3
(::3 4

Properties::4 >
.::> ?
	Resources::? H
.::H I
dialogWrongData::I X
)::X Y
;::Y Z
};; 
}<< 	
public>> 
bool>> 
verifyFields>>  
(>>  !
)>>! "
{?? 	
bool@@ 
passwordValidation@@ #
=@@$ %
	Validator@@& /
.@@/ 0
ValidatePassword@@0 @
(@@@ A
pwb_Password@@A M
.@@M N
Password@@N V
)@@V W
;@@W X
boolAA 
usernameValidationAA #
=AA$ %
	ValidatorAA& /
.AA/ 0
ValidateUsernameAA0 @
(AA@ A
txtb_UsernameAAA N
.AAN O
TextAAO S
)AAS T
;AAT U
ifCC 
(CC 
!CC 
passwordValidationCC #
)CC# $
{DD 
brd_PasswordEE 
.EE 
BorderBrushEE (
=EE) *
BrushesEE+ 2
.EE2 3
RedEE3 6
;EE6 7
}FF 
ifGG 
(GG 
!GG 
usernameValidationGG #
)GG# $
{HH 
txtb_UsernameII 
.II 
BorderBrushII )
=II* +
BrushesII, 3
.II3 4
RedII4 7
;II7 8
}JJ 
returnLL 
passwordValidationLL %
&&LL& (
usernameValidationLL) ;
;LL; <
}MM 	
publicOO 
voidOO '
ValidateExistingUserSessionOO /
(OO/ 0
)OO0 1
{PP 	
boolQQ %
existingSessionValidationQQ *
=QQ+ ,
falseQQ- 2
;QQ2 3
LoggerManagerRR 
loggerRR  
=RR! "
newRR# &
LoggerManagerRR' 4
(RR4 5
thisRR5 9
.RR9 :
GetTypeRR: A
(RRA B
)RRB C
)RRC D
;RRD E
	HiveProxySS 
.SS $
UserSessionManagerClientSS .$
userSessionManagerClientSS/ G
=SSH I
newSSJ M$
UserSessionManagerClientSSN f
(SSf g
)SSg h
;SSh i
tryTT 
{UU 
UserSessionVV 
sessionVV #
=VV$ %
newVV& )
UserSessionVV* 5
(VV5 6
)VV6 7
{WW 
usernameXX 
=XX  
UserProfileSingletonXX 3
.XX3 4
usernameXX4 <
,XX< =
	idAccountYY 
=YY  
UserProfileSingletonYY  4
.YY4 5
	idAccountYY5 >
}ZZ 
;ZZ %
existingSessionValidation[[ )
=[[* +$
userSessionManagerClient[[, D
.[[D E
VerifyConnectivity[[E W
([[W X
session[[X _
)[[_ `
;[[` a
if\\ 
(\\ %
existingSessionValidation\\ -
)\\- .
{]] 
DialogManager^^ !
.^^! "#
ShowWarningMessageAlert^^" 9
(^^9 :

Properties^^: D
.^^D E
	Resources^^E N
.^^N O!
dialogExistingSession^^O d
)^^d e
;^^e f
}__ 
else`` 
{aa $
userSessionManagerClientbb ,
.bb, -
ConnectToGamebb- :
(bb: ;
sessionbb; B
)bbB C
;bbC D
DisplayMainMenuViewcc '
(cc' (
)cc( )
;cc) *
}dd 
}ee 
catchff 
(ff %
EndpointNotFoundExceptionff ,
endPointExceptionff- >
)ff> ?
{gg 
loggerhh 
.hh 
LogFatalhh 
(hh  
endPointExceptionhh  1
)hh1 2
;hh2 3
DialogManagerii 
.ii !
ShowErrorMessageAlertii 3
(ii3 4

Propertiesii4 >
.ii> ?
	Resourcesii? H
.iiH I#
dialogEndPointExceptioniiI `
)ii` a
;iia b
}jj 
catchkk 
(kk 
TimeoutExceptionkk #
timeOutExceptionkk$ 4
)kk4 5
{ll 
loggermm 
.mm 
LogWarnmm 
(mm 
timeOutExceptionmm /
)mm/ 0
;mm0 1
DialogManagernn 
.nn !
ShowErrorMessageAlertnn 3
(nn3 4

Propertiesnn4 >
.nn> ?
	Resourcesnn? H
.nnH I"
dialogTimeOutExceptionnnI _
)nn_ `
;nn` a
}oo 
catchpp 
(pp "
CommunicationExceptionpp )"
communicationExceptionpp* @
)pp@ A
{qq 
loggerrr 
.rr 
LogFatalrr 
(rr  "
communicationExceptionrr  6
)rr6 7
;rr7 8
DialogManagerss 
.ss !
ShowErrorMessageAlertss 3
(ss3 4

Propertiesss4 >
.ss> ?
	Resourcesss? H
.ssH I'
dialogComunicationExceptionssI d
)ssd e
;sse f
}tt 
}uu 	
publicww 
intww 
ValidateCredentialsww &
(ww& '
Profileww' .
profileww/ 6
)ww6 7
{xx 	
LoggerManageryy 
loggeryy  
=yy! "
newyy# &
LoggerManageryy' 4
(yy4 5
thisyy5 9
.yy9 :
GetTypeyy: A
(yyA B
)yyB C
)yyC D
;yyD E
intzz 
validationResultzz  
=zz! "
-zz# $
$numzz$ %
;zz% &
try|| 
{}} 
string~~ 
hashedPassword~~ %
=~~& '
Hasher~~( .
.~~. /

hashToSHA2~~/ 9
(~~9 :
profile~~: A
.~~A B
password~~B J
)~~J K
;~~K L
string 
username 
=  !
profile" )
.) *
username* 2
;2 3
IUserManager
 
userManager
 (
=
) *
new
+ .
	HiveProxy
/ 8
.
8 9
UserManagerClient
9 J
(
J K
)
K L
;
L M
validationResult
  
=
! "
userManager
# .
.
. /'
VerifyPasswordCredentials
/ H
(
H I
username
I Q
,
Q R
hashedPassword
S a
)
a b
;
b c
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
switch
 
(
 
validationResult
 $
)
$ %
{
 
case
 
-
 
$num
 
:
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M!
dialogDataBaseError
M `
)
` a
;
a b
break
 
;
 
case
 
$num
 
:
 !
obtainSingletonData
 '
(
' (
profile
( /
)
/ 0
;
0 1
break
 
;
 
}
 
return
 
validationResult
 #
;
# $
}
 	
public
   
void
   !
obtainSingletonData
   '
(
  ' (
Profile
  ( /
profile
  0 7
)
  7 8
{
¡¡ 	
LoggerManager
¢¢ 
logger
¢¢  
=
¢¢! "
new
¢¢# &
LoggerManager
¢¢' 4
(
¢¢4 5
this
¢¢5 9
.
¢¢9 :
GetType
¢¢: A
(
¢¢A B
)
¢¢B C
)
¢¢C D
;
¢¢D E
try
¤¤ 
{
¥¥ 
IUserManager
¦¦ 
userManager
¦¦ (
=
¦¦) *
new
¦¦+ .
UserManagerClient
¦¦/ @
(
¦¦@ A
)
¦¦A B
;
¦¦B C
string
§§ 
hashedPassword
§§ %
=
§§& '
Hasher
§§( .
.
§§. /

hashToSHA2
§§/ 9
(
§§9 :
profile
§§: A
.
§§A B
password
§§B J
)
§§J K
;
§§K L
Profile
¨¨ 
userAccount
¨¨ #
=
¨¨$ %
userManager
¨¨& 1
.
¨¨1 2
GetUserProfile
¨¨2 @
(
¨¨@ A
profile
¨¨A H
.
¨¨H I
username
¨¨I Q
,
¨¨Q R
hashedPassword
¨¨S a
)
¨¨a b
;
¨¨b c
if
ªª 
(
ªª 
userAccount
ªª 
!=
ªª  "
null
ªª# '
)
ªª' (
{
«« "
UserProfileSingleton
¬¬ (
.
¬¬( )
Instance
¬¬) 1
.
¬¬1 2
CreateInstance
¬¬2 @
(
¬¬@ A
userAccount
¬¬A L
)
¬¬L M
;
¬¬M N
}
­­ 
}
®® 
catch
¯¯ 
(
¯¯ '
EndpointNotFoundException
¯¯ ,
endPointException
¯¯- >
)
¯¯> ?
{
°° 
logger
±± 
.
±± 
LogFatal
±± 
(
±±  
endPointException
±±  1
)
±±1 2
;
±±2 3
DialogManager
²² 
.
²² #
ShowErrorMessageAlert
²² 3
(
²²3 4

Properties
²²4 >
.
²²> ?
	Resources
²²? H
.
²²H I%
dialogEndPointException
²²I `
)
²²` a
;
²²a b
}
³³ 
catch
´´ 
(
´´ 
TimeoutException
´´ #
timeOutException
´´$ 4
)
´´4 5
{
µµ 
logger
¶¶ 
.
¶¶ 
LogWarn
¶¶ 
(
¶¶ 
timeOutException
¶¶ /
)
¶¶/ 0
;
¶¶0 1
DialogManager
·· 
.
·· #
ShowErrorMessageAlert
·· 3
(
··3 4

Properties
··4 >
.
··> ?
	Resources
··? H
.
··H I$
dialogTimeOutException
··I _
)
··_ `
;
··` a
}
¸¸ 
catch
¹¹ 
(
¹¹ $
CommunicationException
¹¹ )$
communicationException
¹¹* @
)
¹¹@ A
{
ºº 
logger
»» 
.
»» 
LogFatal
»» 
(
»»  $
communicationException
»»  6
)
»»6 7
;
»»7 8
DialogManager
¼¼ 
.
¼¼ #
ShowErrorMessageAlert
¼¼ 3
(
¼¼3 4

Properties
¼¼4 >
.
¼¼> ?
	Resources
¼¼? H
.
¼¼H I)
dialogComunicationException
¼¼I d
)
¼¼d e
;
¼¼e f
}
½½ 
}
¾¾ 	
private
ÀÀ 
int
ÀÀ "
GenerateGuestProfile
ÀÀ (
(
ÀÀ( )
)
ÀÀ) *
{
ÁÁ 	
int
ÂÂ 
creationResult
ÂÂ 
=
ÂÂ  
	Constants
ÂÂ! *
.
ÂÂ* +
ErrorOperation
ÂÂ+ 9
;
ÂÂ9 :
LoggerManager
ÃÃ 
logger
ÃÃ  
=
ÃÃ! "
new
ÃÃ# &
LoggerManager
ÃÃ' 4
(
ÃÃ4 5
this
ÃÃ5 9
.
ÃÃ9 :
GetType
ÃÃ: A
(
ÃÃA B
)
ÃÃB C
)
ÃÃC D
;
ÃÃD E
try
ÄÄ 
{
ÅÅ 
	HiveProxy
ÆÆ 
.
ÆÆ &
UserSessionManagerClient
ÆÆ 2&
userSessionManagerClient
ÆÆ3 K
=
ÆÆL M
new
ÆÆN Q
	HiveProxy
ÆÆR [
.
ÆÆ[ \&
UserSessionManagerClient
ÆÆ\ t
(
ÆÆt u
)
ÆÆu v
;
ÆÆv w
string
ÇÇ 
randomUsername
ÇÇ %
=
ÇÇ& '
ProfileGenerator
ÇÇ( 8
.
ÇÇ8 9#
RandomChooserUsername
ÇÇ9 N
(
ÇÇN O
)
ÇÇO P
;
ÇÇP Q
UserSession
ÈÈ 
guestSession
ÈÈ (
=
ÈÈ) *
new
ÈÈ+ .
UserSession
ÈÈ/ :
(
ÈÈ: ;
)
ÈÈ; <
{
ÉÉ 
username
ÊÊ 
=
ÊÊ 
randomUsername
ÊÊ -
,
ÊÊ- .
	idAccount
ËË 
=
ËË 
	Constants
ËË  )
.
ËË) *
DefaultGuestId
ËË* 8
}
ÌÌ 
;
ÌÌ 
while
ÍÍ 
(
ÍÍ &
userSessionManagerClient
ÍÍ /
.
ÍÍ/ 0 
VerifyConnectivity
ÍÍ0 B
(
ÍÍB C
guestSession
ÍÍC O
)
ÍÍO P
)
ÍÍP Q
{
ÎÎ 
guestSession
ÏÏ  
.
ÏÏ  !
username
ÏÏ! )
=
ÏÏ* +
ProfileGenerator
ÏÏ, <
.
ÏÏ< =#
RandomChooserUsername
ÏÏ= R
(
ÏÏR S
)
ÏÏS T
;
ÏÏT U
}
ÐÐ 
Profile
ÑÑ 
profileGuest
ÑÑ $
=
ÑÑ% &
new
ÑÑ' *
Profile
ÑÑ+ 2
(
ÑÑ2 3
)
ÑÑ3 4
{
ÒÒ 
idAccesAccount
ÓÓ "
=
ÓÓ# $
	Constants
ÓÓ% .
.
ÓÓ. /
DefaultGuestId
ÓÓ/ =
,
ÓÓ= >
	idProfile
ÔÔ 
=
ÔÔ 
	Constants
ÔÔ  )
.
ÔÔ) *
DefaultGuestId
ÔÔ* 8
,
ÔÔ8 9
username
ÕÕ 
=
ÕÕ 
randomUsername
ÕÕ -
,
ÕÕ- .
nickname
ÖÖ 
=
ÖÖ 
randomUsername
ÖÖ -
,
ÖÖ- .
description
×× 
=
××  !
ProfileGenerator
××" 2
.
××2 3(
RandomDescriptionGenerator
××3 M
(
××M N
)
××N O
,
××O P
	imagePath
ØØ 
=
ØØ 
ProfileGenerator
ØØ  0
.
ØØ0 1%
RandomChooserAvatarIcon
ØØ1 H
(
ØØH I
)
ØØI J
,
ØØJ K
createdDate
ÙÙ 
=
ÙÙ  !
DateTime
ÙÙ" *
.
ÙÙ* +
Now
ÙÙ+ .
,
ÙÙ. /
}
ÚÚ 
;
ÚÚ "
UserProfileSingleton
ÛÛ $
.
ÛÛ$ %
Instance
ÛÛ% -
.
ÛÛ- .
CreateInstance
ÛÛ. <
(
ÛÛ< =
profileGuest
ÛÛ= I
)
ÛÛI J
;
ÛÛJ K&
userSessionManagerClient
ÜÜ (
.
ÜÜ( )
ConnectToGame
ÜÜ) 6
(
ÜÜ6 7
guestSession
ÜÜ7 C
)
ÜÜC D
;
ÜÜD E
creationResult
ÝÝ 
=
ÝÝ  
	Constants
ÝÝ! *
.
ÝÝ* +
SuccesOperation
ÝÝ+ :
;
ÝÝ: ;
}
ÞÞ 
catch
ßß 
(
ßß '
EndpointNotFoundException
ßß ,
endPointException
ßß- >
)
ßß> ?
{
àà 
logger
áá 
.
áá 
LogFatal
áá 
(
áá  
endPointException
áá  1
)
áá1 2
;
áá2 3
DialogManager
ââ 
.
ââ #
ShowErrorMessageAlert
ââ 3
(
ââ3 4

Properties
ââ4 >
.
ââ> ?
	Resources
ââ? H
.
ââH I%
dialogEndPointException
ââI `
)
ââ` a
;
ââa b
}
ãã 
catch
ää 
(
ää 
TimeoutException
ää #
timeOutException
ää$ 4
)
ää4 5
{
åå 
logger
ææ 
.
ææ 
LogWarn
ææ 
(
ææ 
timeOutException
ææ /
)
ææ/ 0
;
ææ0 1
DialogManager
çç 
.
çç #
ShowErrorMessageAlert
çç 3
(
çç3 4

Properties
çç4 >
.
çç> ?
	Resources
çç? H
.
ççH I$
dialogTimeOutException
ççI _
)
çç_ `
;
çç` a
}
èè 
catch
éé 
(
éé $
CommunicationException
éé )$
communicationException
éé* @
)
éé@ A
{
êê 
logger
ëë 
.
ëë 
LogFatal
ëë 
(
ëë  $
communicationException
ëë  6
)
ëë6 7
;
ëë7 8
DialogManager
ìì 
.
ìì #
ShowErrorMessageAlert
ìì 3
(
ìì3 4

Properties
ìì4 >
.
ìì> ?
	Resources
ìì? H
.
ììH I)
dialogComunicationException
ììI d
)
ììd e
;
ììe f
}
íí 
return
îî 
creationResult
îî !
;
îî! "
}
ïï 	
private
ññ 
void
ññ 
BtnGuest_Click
ññ #
(
ññ# $
object
ññ$ *
sender
ññ+ 1
,
ññ1 2
RoutedEventArgs
ññ3 B
e
ññC D
)
ññD E
{
òò 	
int
óó 
creationResult
óó 
=
óó  "
GenerateGuestProfile
óó! 5
(
óó5 6
)
óó6 7
;
óó7 8
if
ôô 
(
ôô 
creationResult
ôô 
!=
ôô  
	Constants
ôô! *
.
ôô* +
ErrorOperation
ôô+ 9
)
ôô9 :
{
õõ 
GameCodeView
öö 
gameCodeView
öö )
=
öö* +
new
öö, /
GameCodeView
öö0 <
(
öö< =
)
öö= >
;
öö> ?
this
÷÷ 
.
÷÷ 
NavigationService
÷÷ &
.
÷÷& '
Navigate
÷÷' /
(
÷÷/ 0
gameCodeView
÷÷0 <
)
÷÷< =
;
÷÷= >
}
øø 
}
ùù 	
private
ûû 
void
ûû 
BtnRegister_Click
ûû &
(
ûû& '
object
ûû' -
sender
ûû. 4
,
ûû4 5
RoutedEventArgs
ûû6 E
e
ûûF G
)
ûûG H
{
üü 	
RegisterView
ýý 
registerView
ýý %
=
ýý& '
new
ýý( +
RegisterView
ýý, 8
(
ýý8 9
)
ýý9 :
;
ýý: ;
this
þþ 
.
þþ 
NavigationService
þþ "
.
þþ" #
Navigate
þþ# +
(
þþ+ ,
registerView
þþ, 8
)
þþ8 9
;
þþ9 :
}
ÿÿ 	
private
 
void
 &
BtnRecoverPassword_Click
 -
(
- .
object
. 4
sender
5 ;
,
; <"
MouseButtonEventArgs
= Q
e
R S
)
S T
{
 	$
VerifyEmailAndUsername
 "$
verifyEmailAndUsername
# 9
=
: ;
new
< ?$
VerifyEmailAndUsername
@ V
(
V W
)
W X
;
X Y
this
 
.
 
NavigationService
 "
.
" #
Navigate
# +
(
+ ,$
verifyEmailAndUsername
, B
)
B C
;
C D
}
 	
private
 
void
 -
BtnPasswordVisibility_MouseDown
 4
(
4 5
object
5 ;
sender
< B
,
B C"
MouseButtonEventArgs
D X
e
Y Z
)
Z [
{
 	&
TogglePasswordVisibility
 $
(
$ %
true
% )
)
) *
;
* +
ChangePetImage
 
(
 
$str
 G
)
G H
;
H I
}
 	
private
 
void
 +
BtnPasswordVisibility_MouseUp
 2
(
2 3
object
3 9
sender
: @
,
@ A"
MouseButtonEventArgs
B V
e
W X
)
X Y
{
 	&
TogglePasswordVisibility
 $
(
$ %
false
% *
)
* +
;
+ ,+
UpdatePetImageBasedOnPassword
 )
(
) *
)
* +
;
+ ,
}
 	
private
 
void
 )
PwbPassword_PasswordChanged
 0
(
0 1
object
1 7
sender
8 >
,
> ?
RoutedEventArgs
@ O
e
P Q
)
Q R
{
 	+
UpdatePetImageBasedOnPassword
 )
(
) *
)
* +
;
+ ,*
UpdatePasswordVisibilityIcon
 (
(
( )
)
) *
;
* +
}
 	
private
 
void
 &
TogglePasswordVisibility
 -
(
- .
bool
. 2
	isVisible
3 <
)
< =
{
 	
if
 
(
 
	isVisible
 
)
 
{
 
brd_Password
 
.
 

Visibility
 '
=
( )

Visibility
* 4
.
4 5
	Collapsed
5 >
;
> ?!
brd_PasswordDisplay
 #
.
# $

Visibility
$ .
=
/ 0

Visibility
1 ;
.
; <
Visible
< C
;
C D"
txtb_PasswordDisplay
 $
.
$ %
Text
% )
=
* +
pwb_Password
, 8
.
8 9
Password
9 A
;
A B
}
   
else
¡¡ 
{
¢¢ 
brd_Password
££ 
.
££ 

Visibility
££ '
=
££( )

Visibility
££* 4
.
££4 5
Visible
££5 <
;
££< =!
brd_PasswordDisplay
¤¤ #
.
¤¤# $

Visibility
¤¤$ .
=
¤¤/ 0

Visibility
¤¤1 ;
.
¤¤; <
	Collapsed
¤¤< E
;
¤¤E F
pwb_Password
¥¥ 
.
¥¥ 
Password
¥¥ %
=
¥¥& '"
txtb_PasswordDisplay
¥¥( <
.
¥¥< =
Text
¥¥= A
;
¥¥A B
}
¦¦ 
}
§§ 	
private
©© 
void
©© *
UpdatePasswordVisibilityIcon
©© 1
(
©©1 2
)
©©2 3
{
ªª 	&
tgbtn_PasswordVisibility
«« $
.
««$ %

Visibility
««% /
=
««0 1
pwb_Password
««2 >
.
««> ?
Password
««? G
.
««G H
Length
««H N
>
««O P
$num
««Q R
?
¬¬ 

Visibility
¬¬ 
.
¬¬ 
Visible
¬¬ $
:
­­ 

Visibility
­­ 
.
­­ 
	Collapsed
­­ &
;
­­& '
}
®® 	
private
°° 
void
°° +
UpdatePetImageBasedOnPassword
°° 2
(
°°2 3
)
°°3 4
{
±± 	
ChangePetImage
²² 
(
²² 
pwb_Password
²² '
.
²²' (
Password
²²( 0
.
²²0 1
Length
²²1 7
>
²²8 9
$num
²²: ;
?
³³ 
$str
³³ ;
:
´´ 
$str
´´ .
)
´´. /
;
´´/ 0
}
µµ 	
private
·· 
void
·· 
ChangePetImage
·· #
(
··# $
string
··$ *
	imagePath
··+ 4
)
··4 5
{
¸¸ 	
img_Pet
¹¹ 
.
¹¹ 
Source
¹¹ 
=
¹¹ 
new
¹¹  
BitmapImage
¹¹! ,
(
¹¹, -
new
¹¹- 0
Uri
¹¹1 4
(
¹¹4 5
	imagePath
¹¹5 >
,
¹¹> ?
UriKind
¹¹@ G
.
¹¹G H
Relative
¹¹H P
)
¹¹P Q
)
¹¹Q R
;
¹¹R S
}
ºº 	
private
¼¼ 
void
¼¼ !
DisplayMainMenuView
¼¼ (
(
¼¼( )
)
¼¼) *
{
½½ 	
MainMenu
¾¾ 

mainWindow
¾¾ 
=
¾¾  !
new
¾¾" %
MainMenu
¾¾& .
(
¾¾. /
)
¾¾/ 0
;
¾¾0 1
this
¿¿ 
.
¿¿ 
NavigationService
¿¿ "
.
¿¿" #
Navigate
¿¿# +
(
¿¿+ ,

mainWindow
¿¿, 6
)
¿¿6 7
;
¿¿7 8
}
ÀÀ 	
}
ÁÁ 
}ÂÂ ý
wC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\MainMenu.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
MainMenu !
:" #
Page$ (
{ 
private 
MediaPlayer 
_mediaPlayer (
;( )
private 
VideoDrawing 
_videoDrawing *
;* +
private 
DrawingBrush 
_drawingBrush *
;* +
public 
MainMenu 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
Loaded 
+= 
MainMenu_Loaded %
;% &
Unloaded 
+= 
MainMenu_Unloaded )
;) *
if!! 
(!! 
App!! 
.!! 
IsMusicPlaying!! "
)!!" #
App"" 
."" 
	PlayMusic"" 
("" 
$str"" 2
)""2 3
;""3 4"
UpdateButtonVisibility$$ "
($$" #
)$$# $
;$$$ %
SetLanguageButtons%% 
(%% 
)%%  
;%%  !
btn_EditCredentials'' 
.''  

Visibility''  *
=''+ ,

Visibility''- 7
.''7 8
	Collapsed''8 A
;''A B
btn_EditProfile(( 
.(( 

Visibility(( &
=((' (

Visibility(() 3
.((3 4
	Collapsed((4 =
;((= >
lbl_Username)) 
.)) 
Content))  
=))! " 
UserProfileSingleton))# 7
.))7 8
username))8 @
;))@ A
img_ProfilePic** 
.** 
Source** !
=**" #
new**$ '
BitmapImage**( 3
(**3 4
new**4 7
Uri**8 ;
(**; < 
UserProfileSingleton**< P
.**P Q

imageRoute**Q [
,**[ \
UriKind**] d
.**d e
Relative**e m
)**m n
)**n o
;**o p
}++ 	
private-- 
void-- 
MainMenu_Loaded-- $
(--$ %
object--% +
sender--, 2
,--2 3
RoutedEventArgs--4 C
e--D E
)--E F
{.. 	
_mediaPlayer// 
=// 
new// 
MediaPlayer// *
(//* +
)//+ ,
;//, -
var00 
resourceUri00 
=00 
new00 !
Uri00" %
(00% &

Properties00& 0
.000 1
	Resources001 :
.00: ;
Uri00; >
)00> ?
;00? @
_mediaPlayer11 
.11 
Open11 
(11 
resourceUri11 )
)11) *
;11* +
_mediaPlayer33 
.33 

MediaEnded33 #
+=33$ &#
MediaElement_MediaEnded33' >
;33> ?
_videoDrawing44 
=44 
new44 
VideoDrawing44  ,
{55 
Rect66 
=66 
new66 
Rect66 
(66  
$num66  !
,66! "
$num66# $
,66$ %
videoCanvas66& 1
.661 2
Width662 7
,667 8
videoCanvas669 D
.66D E
Height66E K
)66K L
,66L M
Player77 
=77 
_mediaPlayer77 %
}88 
;88 
_drawingBrush:: 
=:: 
new:: 
DrawingBrush::  ,
(::, -
_videoDrawing::- :
)::: ;
;::; <
videoCanvas;; 
.;; 

Background;; "
=;;# $
_drawingBrush;;% 2
;;;2 3
_mediaPlayer== 
.== 
Play== 
(== 
)== 
;==  
}>> 	
private@@ 
void@@ 
MainMenu_Unloaded@@ &
(@@& '
object@@' -
sender@@. 4
,@@4 5
RoutedEventArgs@@6 E
e@@F G
)@@G H
{AA 	
ifBB 
(BB 
_mediaPlayerBB 
!=BB 
nullBB  $
)BB$ %
{CC 
_mediaPlayerDD 
.DD 

MediaEndedDD '
+=DD( *#
MediaElement_MediaEndedDD+ B
;DDB C
_mediaPlayerEE 
.EE 
StopEE !
(EE! "
)EE" #
;EE# $
_mediaPlayerFF 
.FF 
CloseFF "
(FF" #
)FF# $
;FF$ %
_mediaPlayerGG 
=GG 
nullGG #
;GG# $
}HH 
}II 	
privateKK 
voidKK #
MediaElement_MediaEndedKK ,
(KK, -
objectKK- 3
senderKK4 :
,KK: ;
	EventArgsKK< E
eKKF G
)KKG H
{LL 	
ifMM 
(MM 
_mediaPlayerMM 
!=MM 
nullMM  $
)MM$ %
{NN 
_mediaPlayerOO 
.OO 
PositionOO %
=OO& '
TimeSpanOO( 0
.OO0 1
ZeroOO1 5
;OO5 6
_mediaPlayerPP 
.PP 
PlayPP !
(PP! "
)PP" #
;PP# $
}QQ 
}RR 	
privateTT 
voidTT 
Image_MouseDownTT $
(TT$ %
objectTT% +
senderTT, 2
,TT2 3 
MouseButtonEventArgsTT4 H
eTTI J
)TTJ K
{UU 	
boolVV 
resultConfirmationVV #
=VV$ %
DialogManagerVV& 3
.VV3 4(
ShowConfirmationMessageAlertVV4 P
(VVP Q

PropertiesVVQ [
.VV[ \
	ResourcesVV\ e
.VVe f
dialogExitMainMenuVVf x
)VVx y
;VVy z
LoggerManagerWW 
loggerWW  
=WW! "
newWW# &
LoggerManagerWW' 4
(WW4 5
thisWW5 9
.WW9 :
GetTypeWW: A
(WWA B
)WWB C
)WWC D
;WWD E
ifXX 
(XX 
resultConfirmationXX "
)XX" #
{YY 
tryZZ 
{[[ 
	HiveProxy\\ 
.\\ $
UserSessionManagerClient\\ 6$
userSessionManagerClient\\7 O
=\\P Q
new\\R U
	HiveProxy\\V _
.\\_ `$
UserSessionManagerClient\\` x
(\\x y
)\\y z
;\\z {
UserSession]] 
userSession]]  +
=]], -
new]]. 1
UserSession]]2 =
(]]= >
)]]> ?
{^^ 
username__  
=__! " 
UserProfileSingleton__# 7
.__7 8
username__8 @
,__@ A
	idAccount`` !
=``" # 
UserProfileSingleton``$ 8
.``8 9
	idAccount``9 B
}aa 
;aa 
intbb 
disconnectionResultbb +
=bb, -$
userSessionManagerClientbb. F
.bbF G

DisconnectbbG Q
(bbQ R
userSessionbbR ]
,bb] ^
falsebb_ d
)bbd e
;bbe f
ifcc 
(cc 
disconnectionResultcc *
==cc+ -
	Constantscc. 7
.cc7 8
SuccesOperationcc8 G
)ccG H
{dd  
UserProfileSingletonee ,
.ee, -
Instanceee- 5
.ee5 6
ResetSingletonee6 D
(eeD E
)eeE F
;eeF G
	LoginViewff !
loginff" '
=ff( )
newff* -
	LoginViewff. 7
(ff7 8
)ff8 9
;ff9 :
thisgg 
.gg 
NavigationServicegg .
.gg. /
Navigategg/ 7
(gg7 8
logingg8 =
)gg= >
;gg> ?
}hh 
elseii 
ifii 
(ii 
disconnectionResultii /
==ii0 2
	Constantsii3 <
.ii< =
NoDataMatchesii= J
)iiJ K
{jj 
DialogManagerkk %
.kk% &#
ShowWarningMessageAlertkk& =
(kk= >

Propertieskk> H
.kkH I
	ResourceskkI R
.kkR S(
dialogCouldntFindUserSessionkkS o
)kko p
;kkp q
}ll 
elsemm 
{nn 
DialogManageroo %
.oo% &!
ShowErrorMessageAlertoo& ;
(oo; <

Propertiesoo< F
.ooF G
	ResourcesooG P
.ooP Q&
dialogErrorInDisconnectionooQ k
)ook l
;ool m
}pp 
}qq 
catchrr 
(rr %
EndpointNotFoundExceptionrr 0
endPointExceptionrr1 B
)rrB C
{ss 
loggertt 
.tt 
LogFataltt #
(tt# $
endPointExceptiontt$ 5
)tt5 6
;tt6 7
DialogManageruu !
.uu! "!
ShowErrorMessageAlertuu" 7
(uu7 8

Propertiesuu8 B
.uuB C
	ResourcesuuC L
.uuL M#
dialogEndPointExceptionuuM d
)uud e
;uue f
}vv 
catchww 
(ww 
TimeoutExceptionww '
timeOutExceptionww( 8
)ww8 9
{xx 
loggeryy 
.yy 
LogWarnyy "
(yy" #
timeOutExceptionyy# 3
)yy3 4
;yy4 5
DialogManagerzz !
.zz! "!
ShowErrorMessageAlertzz" 7
(zz7 8

Propertieszz8 B
.zzB C
	ResourceszzC L
.zzL M"
dialogTimeOutExceptionzzM c
)zzc d
;zzd e
}{{ 
catch|| 
(|| "
CommunicationException|| -"
communicationException||. D
)||D E
{}} 
logger~~ 
.~~ 
LogFatal~~ #
(~~# $"
communicationException~~$ :
)~~: ;
;~~; <
DialogManager !
.! "!
ShowErrorMessageAlert" 7
(7 8

Properties8 B
.B C
	ResourcesC L
.L M'
dialogComunicationExceptionM h
)h i
;i j
}
 
}
 
}
 	
private
 
void
 
BtnPlay_Click
 "
(
" #
object
# )
sender
* 0
,
0 1
RoutedEventArgs
2 A
e
B C
)
C D
{
 	
btn_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
Visible
2 9
;
9 :
btn_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
Visible
4 ;
;
; <
img_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
Visible
4 ;
;
; <
img_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
Visible
2 9
;
9 :!
btn_EditCredentials
 
.
  

Visibility
  *
=
+ ,

Visibility
- 7
.
7 8
	Collapsed
8 A
;
A B
btn_EditProfile
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
grd_Configuration
 
.
 

Visibility
 (
=
) *

Visibility
+ 5
.
5 6
	Collapsed
6 ?
;
? @
}
 	
private
 
void
  
BtnMyAccount_Click
 '
(
' (
object
( .
sender
/ 5
,
5 6
RoutedEventArgs
7 F
e
G H
)
H I
{
 	!
btn_EditCredentials
 
.
  

Visibility
  *
=
+ ,

Visibility
- 7
.
7 8
Visible
8 ?
;
? @
btn_EditProfile
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
Visible
4 ;
;
; <
btn_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
	Collapsed
2 ;
;
; <
btn_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
img_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
img_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
	Collapsed
2 ;
;
; <
grd_Configuration
 
.
 

Visibility
 (
=
) *

Visibility
+ 5
.
5 6
	Collapsed
6 ?
;
? @
}
 	
private
 
void
 !
ActivateMusic_Click
 (
(
( )
object
) /
sender
0 6
,
6 7
RoutedEventArgs
8 G
e
H I
)
I J
{
 	
if
 
(
 
!
 
App
 
.
 
IsMusicPlaying
 #
)
# $
{
 
App
 
.
 
ToggleMusic
 
(
  
)
  !
;
! "$
UpdateButtonVisibility
 &
(
& '
)
' (
;
( )
}
   
}
¢¢ 	
private
¤¤ 
void
¤¤ #
DeactivateMusic_Click
¤¤ *
(
¤¤* +
object
¤¤+ 1
sender
¤¤2 8
,
¤¤8 9
RoutedEventArgs
¤¤: I
e
¤¤J K
)
¤¤K L
{
¥¥ 	
if
¦¦ 
(
¦¦ 
App
¦¦ 
.
¦¦ 
IsMusicPlaying
¦¦ "
)
¦¦" #
{
§§ 
App
¨¨ 
.
¨¨ 
ToggleMusic
¨¨ 
(
¨¨  
)
¨¨  !
;
¨¨! "$
UpdateButtonVisibility
©© &
(
©©& '
)
©©' (
;
©©( )
}
ªª 
}
«« 	
private
­­ 
void
­­ $
UpdateButtonVisibility
­­ +
(
­­+ ,
)
­­, -
{
®® 	
if
¯¯ 
(
¯¯ 
App
¯¯ 
.
¯¯ 
IsMusicPlaying
¯¯ "
)
¯¯" #
{
°° 
img_SoundOn
±± 
.
±± 

Visibility
±± &
=
±±' (

Visibility
±±) 3
.
±±3 4
	Collapsed
±±4 =
;
±±= >
img_SoundOf
²² 
.
²² 

Visibility
²² &
=
²²' (

Visibility
²²) 3
.
²²3 4
Visible
²²4 ;
;
²²; <
}
³³ 
else
´´ 
{
µµ 
img_SoundOn
¶¶ 
.
¶¶ 

Visibility
¶¶ &
=
¶¶' (

Visibility
¶¶) 3
.
¶¶3 4
Visible
¶¶4 ;
;
¶¶; <
img_SoundOf
·· 
.
·· 

Visibility
·· &
=
··' (

Visibility
··) 3
.
··3 4
	Collapsed
··4 =
;
··= >
}
¸¸ 
}
¹¹ 	
private
»» 
void
»» 
BtnFriends_Click
»» %
(
»»% &
object
»»& ,
sender
»»- 3
,
»»3 4
RoutedEventArgs
»»5 D
e
»»E F
)
»»F G
{
¼¼ 	
FriendsListView
½½ 
friendsListView
½½ +
=
½½, -
new
½½. 1
FriendsListView
½½2 A
(
½½A B
)
½½B C
;
½½C D
this
¾¾ 
.
¾¾ 
NavigationService
¾¾ "
.
¾¾" #
Navigate
¾¾# +
(
¾¾+ ,
friendsListView
¾¾, ;
)
¾¾; <
;
¾¾< =
}
¿¿ 	
private
ÁÁ 
void
ÁÁ &
BtnEditCredentials_Click
ÁÁ -
(
ÁÁ- .
object
ÁÁ. 4
sender
ÁÁ5 ;
,
ÁÁ; <
RoutedEventArgs
ÁÁ= L
e
ÁÁM N
)
ÁÁN O
{
ÂÂ 	
LoggerManager
ÃÃ 
logger
ÃÃ  
=
ÃÃ! "
new
ÃÃ# &
LoggerManager
ÃÃ' 4
(
ÃÃ4 5
this
ÃÃ5 9
.
ÃÃ9 :
GetType
ÃÃ: A
(
ÃÃA B
)
ÃÃB C
)
ÃÃC D
;
ÃÃD E
	HiveProxy
ÄÄ 
.
ÄÄ ,
EmailVerificationManagerClient
ÄÄ 4&
emailVerificationManager
ÄÄ5 M
=
ÄÄN O
new
ÄÄP S
	HiveProxy
ÄÄT ]
.
ÄÄ] ^,
EmailVerificationManagerClient
ÄÄ^ |
(
ÄÄ| }
)
ÄÄ} ~
;
ÄÄ~ 
try
ÆÆ 
{
ÇÇ 
int
ÈÈ 
resultEmailSend
ÈÈ #
=
ÈÈ$ %&
emailVerificationManager
ÈÈ& >
.
ÈÈ> ?#
SendVerificationEmail
ÈÈ? T
(
ÈÈT U"
UserProfileSingleton
ÈÈU i
.
ÈÈi j
email
ÈÈj o
)
ÈÈo p
;
ÈÈp q
if
ÉÉ 
(
ÉÉ 
resultEmailSend
ÉÉ #
==
ÉÉ$ &
	Constants
ÉÉ' 0
.
ÉÉ0 1
SuccesOperation
ÉÉ1 @
)
ÉÉ@ A
{
ÊÊ 
DialogManager
ËË !
.
ËË! "%
ShowSuccessMessageAlert
ËË" 9
(
ËË9 :

Properties
ËË: D
.
ËËD E
	Resources
ËËE N
.
ËËN O,
dialogEmailVerificationMessage
ËËO m
)
ËËm n
;
ËËn o!
EditCredentialsView
ÌÌ '!
editCredentialsView
ÌÌ( ;
=
ÌÌ< =
new
ÌÌ> A!
EditCredentialsView
ÌÌB U
(
ÌÌU V
)
ÌÌV W
;
ÌÌW X
this
ÍÍ 
.
ÍÍ 
NavigationService
ÍÍ *
.
ÍÍ* +
Navigate
ÍÍ+ 3
(
ÍÍ3 4!
editCredentialsView
ÍÍ4 G
)
ÍÍG H
;
ÍÍH I
}
ÎÎ 
else
ÏÏ 
{
ÐÐ 
DialogManager
ÑÑ !
.
ÑÑ! "#
ShowErrorMessageAlert
ÑÑ" 7
(
ÑÑ7 8

Properties
ÑÑ8 B
.
ÑÑB C
	Resources
ÑÑC L
.
ÑÑL M$
dialogCouldntSendEmail
ÑÑM c
)
ÑÑc d
;
ÑÑd e
}
ÒÒ 
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ '
EndpointNotFoundException
ÔÔ ,
endPointException
ÔÔ- >
)
ÔÔ> ?
{
ÕÕ 
logger
ÖÖ 
.
ÖÖ 
LogFatal
ÖÖ 
(
ÖÖ  
endPointException
ÖÖ  1
)
ÖÖ1 2
;
ÖÖ2 3
DialogManager
×× 
.
×× #
ShowErrorMessageAlert
×× 3
(
××3 4

Properties
××4 >
.
××> ?
	Resources
××? H
.
××H I%
dialogEndPointException
××I `
)
××` a
;
××a b
}
ØØ 
catch
ÙÙ 
(
ÙÙ 
TimeoutException
ÙÙ #
timeOutException
ÙÙ$ 4
)
ÙÙ4 5
{
ÚÚ 
logger
ÛÛ 
.
ÛÛ 
LogWarn
ÛÛ 
(
ÛÛ 
timeOutException
ÛÛ /
)
ÛÛ/ 0
;
ÛÛ0 1
DialogManager
ÜÜ 
.
ÜÜ #
ShowErrorMessageAlert
ÜÜ 3
(
ÜÜ3 4

Properties
ÜÜ4 >
.
ÜÜ> ?
	Resources
ÜÜ? H
.
ÜÜH I$
dialogTimeOutException
ÜÜI _
)
ÜÜ_ `
;
ÜÜ` a
}
ÝÝ 
catch
ÞÞ 
(
ÞÞ $
CommunicationException
ÞÞ )$
communicationException
ÞÞ* @
)
ÞÞ@ A
{
ßß 
logger
àà 
.
àà 
LogFatal
àà 
(
àà  $
communicationException
àà  6
)
àà6 7
;
àà7 8
DialogManager
áá 
.
áá #
ShowErrorMessageAlert
áá 3
(
áá3 4

Properties
áá4 >
.
áá> ?
	Resources
áá? H
.
ááH I)
dialogComunicationException
ááI d
)
áád e
;
ááe f
}
ââ 
}
ãã 	
private
åå 
void
åå 
CreateMatchLobby
åå %
(
åå% &
)
åå& '
{
ææ 	
	HiveProxy
çç 
.
çç '
MatchCreatorManagerClient
çç /
matchCreator
çç0 <
=
çç= >
new
çç? B
	HiveProxy
ççC L
.
ççL M'
MatchCreatorManagerClient
ççM f
(
ççf g
)
ççg h
;
ççh i
LoggerManager
èè 
logger
èè  
=
èè! "
new
èè# &
LoggerManager
èè' 4
(
èè4 5
this
èè5 9
.
èè9 :
GetType
èè: A
(
èèA B
)
èèB C
)
èèC D
;
èèD E
try
éé 
{
êê 
string
ëë 
code
ëë 
=
ëë 
matchCreator
ëë *
.
ëë* +
GenerateLobbyCode
ëë+ <
(
ëë< ="
UserProfileSingleton
ëë= Q
.
ëëQ R
email
ëëR W
)
ëëW X
;
ëëX Y
MatchCreator
ìì 
matchCreatorUser
ìì -
=
ìì. /
new
ìì0 3
MatchCreator
ìì4 @
(
ìì@ A
)
ììA B
{
íí 
	codeMatch
îî 
=
îî 
code
îî  $
,
îî$ %
idCreatorAccount
ïï $
=
ïï% &"
UserProfileSingleton
ïï' ;
.
ïï; <
	idAccount
ïï< E
,
ïïE F
	dateMatch
ðð 
=
ðð 
DateTime
ðð  (
.
ðð( )
Now
ðð) ,
,
ðð, -

stateMatch
ññ 
=
ññ  
$str
ññ! (
}
òò 
;
òò 
int
óó 
resultInsertion
óó #
=
óó$ %
matchCreator
óó& 2
.
óó2 3
CreateMatch
óó3 >
(
óó> ?
matchCreatorUser
óó? O
)
óóO P
;
óóP Q
if
ôô 
(
ôô 
resultInsertion
ôô #
==
ôô$ &
	Constants
ôô' 0
.
ôô0 1
SuccesOperation
ôô1 @
)
ôô@ A
{
õõ 
MatchSingleton
öö "
.
öö" #
Instance
öö# +
.
öö+ ,
CreateInstance
öö, :
(
öö: ;
code
öö; ?
)
öö? @
;
öö@ A
	LobbyView
÷÷ 
	lobbyView
÷÷ '
=
÷÷( )
new
÷÷* -
	LobbyView
÷÷. 7
(
÷÷7 8
)
÷÷8 9
;
÷÷9 :
this
øø 
.
øø 
NavigationService
øø *
.
øø* +
Navigate
øø+ 3
(
øø3 4
	lobbyView
øø4 =
)
øø= >
;
øø> ?
}
ùù 
else
úú 
if
úú 
(
úú 
resultInsertion
úú (
==
úú) +
	Constants
úú, 5
.
úú5 6
ErrorOperation
úú6 D
)
úúD E
{
ûû 
DialogManager
üü !
.
üü! "#
ShowErrorMessageAlert
üü" 7
(
üü7 8

Properties
üü8 B
.
üüB C
	Resources
üüC L
.
üüL M!
dialogDataBaseError
üüM `
)
üü` a
;
üüa b
}
ýý 
}
þþ 
catch
ÿÿ 
(
ÿÿ '
EndpointNotFoundException
ÿÿ ,
endPointException
ÿÿ- >
)
ÿÿ> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 "
BtnEditProfile_Click
 )
(
) *
object
* 0
sender
1 7
,
7 8
RoutedEventArgs
9 H
e
I J
)
J K
{
 	
EditProfileView
 
editProfileView
 +
=
, -
new
. 1
EditProfileView
2 A
(
A B
)
B C
;
C D
this
 
.
 
NavigationService
 "
.
" #
Navigate
# +
(
+ ,
editProfileView
, ;
)
; <
;
< =
}
 	
private
 
void
 
BtnSettings_Click
 &
(
& '
object
' -
sender
. 4
,
4 5
RoutedEventArgs
6 E
e
F G
)
G H
{
 	
grd_Configuration
 
.
 

Visibility
 (
=
) *

Visibility
+ 5
.
5 6
Visible
6 =
;
= >
btn_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
	Collapsed
2 ;
;
; <
btn_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
img_CreateMatch
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
img_JoinMatch
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
	Collapsed
2 ;
;
; <!
btn_EditCredentials
 
.
  

Visibility
  *
=
+ ,

Visibility
- 7
.
7 8
	Collapsed
8 A
;
A B
btn_EditProfile
 
.
 

Visibility
 &
=
' (

Visibility
) 3
.
3 4
	Collapsed
4 =
;
= >
}
 	
private
¡¡ 
void
¡¡ "
BtnCreateMatch_Click
¡¡ )
(
¡¡) *
object
¡¡* 0
sender
¡¡1 7
,
¡¡7 8
RoutedEventArgs
¡¡9 H
e
¡¡I J
)
¡¡J K
{
¢¢ 	
if
££ 
(
££ 
DialogManager
££ 
.
££ *
ShowConfirmationMessageAlert
££ :
(
££: ;

Properties
££; E
.
££E F
	Resources
££F O
.
££O P-
dialogConfirmationMatchCreation
££P o
)
££o p
)
££p q
{
¤¤ 
CreateMatchLobby
¥¥  
(
¥¥  !
)
¥¥! "
;
¥¥" #
}
¦¦ 
}
§§ 	
private
©© 
void
©©  
BtnJoinMatch_Click
©© '
(
©©' (
object
©©( .
sender
©©/ 5
,
©©5 6
RoutedEventArgs
©©7 F
e
©©G H
)
©©H I
{
ªª 	
GameCodeView
«« 
gameCodeView
«« %
=
««& '
new
««( +
GameCodeView
««, 8
(
««8 9
)
««9 :
;
««: ;
this
¬¬ 
.
¬¬ 
NavigationService
¬¬ "
.
¬¬" #
Navigate
¬¬# +
(
¬¬+ ,
gameCodeView
¬¬, 8
)
¬¬8 9
;
¬¬9 :
}
­­ 	
private
¯¯ 
void
¯¯ !
BtnStatistics_Click
¯¯ (
(
¯¯( )
object
¯¯) /
sender
¯¯0 6
,
¯¯6 7
RoutedEventArgs
¯¯8 G
e
¯¯H I
)
¯¯I J
{
°° 	
StatisticsView
±± 
statisticsView
±± )
=
±±* +
new
±±, /
StatisticsView
±±0 >
(
±±> ?
)
±±? @
;
±±@ A
this
²² 
.
²² 
NavigationService
²² "
.
²²" #
Navigate
²²# +
(
²²+ ,
statisticsView
²², :
)
²²: ;
;
²²; <
}
³³ 	
private
¶¶ 
void
¶¶  
SetLanguageButtons
¶¶ '
(
¶¶' (
)
¶¶( )
{
·· 	
string
¹¹ 
currentLanguage
¹¹ "
=
¹¹# $

Properties
¹¹% /
.
¹¹/ 0
Settings
¹¹0 8
.
¹¹8 9
Default
¹¹9 @
.
¹¹@ A
Language
¹¹A I
;
¹¹I J
if
»» 
(
»» 
currentLanguage
»» 
==
»»  "
$str
»»# *
)
»»* +
{
¼¼ 

img_Mexico
½½ 
.
½½ 
	IsEnabled
½½ $
=
½½% &
false
½½' ,
;
½½, -

img_Mexico
¾¾ 
.
¾¾ 

Visibility
¾¾ %
=
¾¾& '

Visibility
¾¾( 2
.
¾¾2 3
	Collapsed
¾¾3 <
;
¾¾< =
img_EU
¿¿ 
.
¿¿ 
	IsEnabled
¿¿  
=
¿¿! "
true
¿¿# '
;
¿¿' (
}
ÀÀ 
else
ÁÁ 
{
ÂÂ 

img_Mexico
ÃÃ 
.
ÃÃ 
	IsEnabled
ÃÃ $
=
ÃÃ% &
true
ÃÃ' +
;
ÃÃ+ ,
img_EU
ÄÄ 
.
ÄÄ 
	IsEnabled
ÄÄ  
=
ÄÄ! "
false
ÄÄ# (
;
ÄÄ( )
img_EU
ÅÅ 
.
ÅÅ 

Visibility
ÅÅ !
=
ÅÅ" #

Visibility
ÅÅ$ .
.
ÅÅ. /
	Collapsed
ÅÅ/ 8
;
ÅÅ8 9
}
ÆÆ 
}
ÇÇ 	
private
ÉÉ 
void
ÉÉ "
ChangeLanguage_Click
ÉÉ )
(
ÉÉ) *
object
ÉÉ* 0
sender
ÉÉ1 7
,
ÉÉ7 8
RoutedEventArgs
ÉÉ9 H
e
ÉÉI J
)
ÉÉJ K
{
ÊÊ 	
if
ËË 
(
ËË 
sender
ËË 
is
ËË 
Image
ËË 
image
ËË  %
)
ËË% &
{
ÌÌ 
string
ÍÍ 
newLanguage
ÍÍ "
=
ÍÍ# $
image
ÍÍ% *
.
ÍÍ* +
Name
ÍÍ+ /
==
ÍÍ0 2
$str
ÍÍ3 ?
?
ÍÍ@ A
$str
ÍÍB I
:
ÍÍJ K
$str
ÍÍL S
;
ÍÍS T
MessageBoxResult
ÏÏ  
result
ÏÏ! '
=
ÏÏ( )

MessageBox
ÏÏ* 4
.
ÏÏ4 5
Show
ÏÏ5 9
(
ÏÏ9 :

Properties
ÐÐ 
.
ÐÐ 
	Resources
ÐÐ '
.
ÐÐ' ()
dialogMessageLanguagechange
ÐÐ( C
,
ÐÐC D

Properties
ÑÑ 
.
ÑÑ 
	Resources
ÑÑ '
.
ÑÑ' ( 
lbl_LanguageChange
ÑÑ( :
,
ÑÑ: ;
MessageBoxButton
ÒÒ $
.
ÒÒ$ %
YesNo
ÒÒ% *
,
ÒÒ* +
MessageBoxImage
ÓÓ #
.
ÓÓ# $
Question
ÓÓ$ ,
)
ÔÔ 
;
ÔÔ 
if
ÖÖ 
(
ÖÖ 
result
ÖÖ 
==
ÖÖ 
MessageBoxResult
ÖÖ .
.
ÖÖ. /
Yes
ÖÖ/ 2
)
ÖÖ2 3
{
×× 
App
ØØ 
.
ØØ 
ChangeLanguage
ØØ &
(
ØØ& '
newLanguage
ØØ' 2
)
ØØ2 3
;
ØØ3 4
System
ÛÛ 
.
ÛÛ 
Diagnostics
ÛÛ &
.
ÛÛ& '
Process
ÛÛ' .
.
ÛÛ. /
Start
ÛÛ/ 4
(
ÛÛ4 5
Application
ÛÛ5 @
.
ÛÛ@ A
ResourceAssembly
ÛÛA Q
.
ÛÛQ R
Location
ÛÛR Z
)
ÛÛZ [
;
ÛÛ[ \
Application
ÜÜ 
.
ÜÜ  
Current
ÜÜ  '
.
ÜÜ' (
Shutdown
ÜÜ( 0
(
ÜÜ0 1
)
ÜÜ1 2
;
ÜÜ2 3
}
ÝÝ 
}
ÞÞ 
}
ßß 	
}
ââ 
}ãã Ìß
|C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\GameBoardView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public   

partial   
class   
GameBoardView   &
:  ' (
Page  ) -
,  - . 
IGameManagerCallback  / C
{!! 
private## 
GameManagerClient## !
_gameManagerClient##" 4
;##4 5
private$$ 
	GamePiece$$ 
_selectedPiece$$ (
;$$( )
private%% 
Polygon%% 
_lastPlacedCell%% '
;%%' (
private&& 

Dictionary&& 
<&& 
Point&&  
,&&  !
Polygon&&" )
>&&) *
_cellDictionary&&+ :
=&&; <
new&&= @

Dictionary&&A K
<&&K L
Point&&L Q
,&&Q R
Polygon&&S Z
>&&Z [
(&&[ \
)&&\ ]
;&&] ^
private'' 

Dictionary'' 
<'' 
Point''  
,''  !
Logic''" '
.''' (
	GamePiece''( 1
>''1 2
_board''3 9
='': ;
new''< ?

Dictionary''@ J
<''J K
Point''K P
,''P Q
Logic''R W
.''W X
	GamePiece''X a
>''a b
(''b c
)''c d
;''d e
private(( 
List(( 
<(( 
UserSession((  
>((  !
_usersInGame((" .
;((. /
private)) 
TimersTimer)) 
_turnTimeoutTimer)) -
;))- .
private** 
bool**  
_hasOtherPlayerMoved** )
=*** +
false**, 1
;**1 2
private++ 
bool++ 
_isOtherPlayerTurn++ '
=++( )
false++* /
;++/ 0
private,, 
int,, 
_numberOfPlayer,, #
=,,$ %
$num,,& '
;,,' (
private-- 
int-- 
_numberOfTurn-- !
=--" #
$num--$ %
;--% &
private.. 
string.. 
_winnerName.. "
=..# $
$str..% '
;..' (
private// 
string// 
_usernamePlayer1// '
=//( )
$str//* ,
;//, -
private00 
string00 
_usernamePlayer200 '
=00( )
$str00* ,
;00, -
private11 
bool11 
_isFirstPiecePlaced11 (
=11) *
false11+ 0
;110 1
private22 
bool22 
_isBeetleMoved22 #
=22$ %
false22& +
;22+ ,
private33 
bool33 
_isQueenInGame33 #
=33$ %
false33& +
;33+ ,
private44 
bool44 
_IsMatchFinished44 %
=44& '
false44( -
;44- .
private55 
static55 
readonly55 
List55  $
<55$ %
(55% &
double55& ,
dirUp55- 2
,552 3
double554 :
dirDown55; B
)55B C
>55C D
_hexPairDirecctions55E X
=55Y Z
new55[ ^
List55_ c
<55c d
(55d e
double55e k
,55k l
double55m s
)55s t
>55t u
{55v w
(55x y
$num55y z
,55z {
-55| }
$num55} ~
)55~ 
,	55 
(
55 
$num
55 
,
55 
-
55 
$num
55 
)
55 
,
55 
(
55 
$num
55 
,
55 
$num
55 
)
55 
,
55 
(
55 
$num
55 
,
55 
$num
55 
)
55 
,
55 
(
55 
-
55 
$num
55 
,
55 
$num
55  
)
55  ¡
,
55¡ ¢
(
55£ ¤
-
55¤ ¥
$num
55¥ ¦
,
55¦ §
-
55¨ ©
$num
55© ª
)
55ª «
}
55¬ ­
;
55­ ®
private66 
static66 
readonly66 
List66  $
<66$ %
(66% &
double66& ,
dirUp66- 2
,662 3
double664 :
dirDown66; B
)66B C
>66C D
_hexOddDirecctions66E W
=66X Y
new66Z ]
List66^ b
<66b c
(66c d
double66d j
,66j k
double66l r
)66r s
>66s t
{66u v
(66w x
$num66x y
,66y z
-66{ |
$num66| }
)66} ~
,66~ 
(
66 
$num
66 
,
66 
$num
66 
)
66 
,
66 
(
66 
$num
66 
,
66 
$num
66 
)
66 
,
66 
(
66 
$num
66 
,
66 
$num
66 
)
66 
,
66 
(
66 
-
66 
$num
66 
,
66 
$num
66 
)
66 
,
66  
(
66¡ ¢
-
66¢ £
$num
66£ ¤
,
66¤ ¥
$num
66¦ §
)
66§ ¨
}
66© ª
;
66ª «
private77 
const77 
string77 

_Player1Id77 '
=77( )
$str77* 3
;773 4
private88 
const88 
string88 

_Player2Id88 '
=88( )
$str88* 3
;883 4
private99 
const99 
string99 
_QueenPieceName99 ,
=99- .
$str99/ 6
;996 7
public:: 
const:: 
string:: 
BeetlePieceName:: +
=::, -
$str::. 6
;::6 7
private;; 
static;; 
readonly;; 

Dictionary;;  *
<;;* +
(;;+ ,
int;;, /
,;;/ 0
string;;1 7
);;7 8
,;;8 9
Image;;: ?
>;;? @&
_piecesCapturedByTheBeetle;;A [
=;;\ ]
new;;^ a

Dictionary;;b l
<;;l m
(;;m n
int;;n q
,;;q r
string;;s y
);;y z
,;;z {
Image	;;| 
>
;; 
(
;; 
)
;; 
;
;; 
private<< 
List<< 
<<< 
	GamePiece<< 
><< 
_player1Pieces<<  .
=<</ 0
new<<1 4
List<<5 9
<<<9 :
	GamePiece<<: C
><<C D
{== 
new>> 
	GamePiece>> 
(>> 
new>> !
Queen>>" '
(>>' (
)>>( )
,>>) *
$str>>+ Q
,>>Q R
new>>S V
Point>>W \
(>>\ ]
->>] ^
$num>>^ _
,>>_ `
->>a b
$num>>b c
)>>c d
,>>d e

_Player1Id>>e o
,>>o p
$num>>p q
)>>q r
,>>r s
new?? 
	GamePiece?? 
(?? 
new?? !
Spider??" (
(??( )
)??) *
,??* +
$str??, S
,??S T
new??U X
Point??Y ^
(??^ _
-??_ `
$num??` a
,??a b
-??c d
$num??d e
)??e f
,??f g

_Player1Id??g q
,??q r
$num??r s
)??s t
,??t u
new@@ 
	GamePiece@@ 
(@@ 
new@@ !
Spider@@" (
(@@( )
)@@) *
,@@* +
$str@@, S
,@@S T
new@@U X
Point@@Y ^
(@@^ _
-@@_ `
$num@@` a
,@@a b
-@@c d
$num@@d e
)@@e f
,@@f g

_Player1Id@@g q
,@@q r
$num@@r s
)@@s t
,@@t u
newAA 
	GamePieceAA 
(AA 
newAA !
BeetleAA" (
(AA) *
)AA* +
,AA+ ,
$strAA- T
,AAT U
newAAV Y
PointAAZ _
(AA_ `
-AA` a
$numAAa b
,AAb c
-AAd e
$numAAe f
)AAf g
,AAg h

_Player1IdAAh r
,AAr s
$numAAs t
)AAt u
,AAu v
newBB 
	GamePieceBB 
(BB 
newBB !
BeetleBB" (
(BB) *
)BB* +
,BB+ ,
$strBB- T
,BBT U
newBBV Y
PointBBZ _
(BB_ `
-BB` a
$numBBa b
,BBb c
-BBd e
$numBBe f
)BBf g
,BBg h

_Player1IdBBh r
,BBr s
$numBBs t
)BBt u
,BBu v
newCC 
	GamePieceCC 
(CC 
newCC !
AntCC" %
(CC' (
)CC( )
,CC) *
$strCC+ O
,CCO P
newCCQ T
PointCCU Z
(CCZ [
-CC[ \
$numCC\ ]
,CC] ^
-CC_ `
$numCC` a
)CCa b
,CCb c

_Player1IdCCd n
,CCn o
$numCCo p
)CCp q
,CCq r
newDD 
	GamePieceDD 
(DD 
newDD !
AntDD" %
(DD' (
)DD( )
,DD) *
$strDD+ O
,DDO P
newDDQ T
PointDDU Z
(DDZ [
-DD[ \
$numDD\ ]
,DD] ^
-DD_ `
$numDD` a
)DDa b
,DDb c

_Player1IdDDd n
,DDn o
$numDDo p
)DDp q
,DDq r
newEE 
	GamePieceEE 
(EE 
newEE !
AntEE" %
(EE' (
)EE( )
,EE) *
$strEE+ O
,EEO P
newEEQ T
PointEEU Z
(EEZ [
-EE[ \
$numEE\ ]
,EE] ^
-EE_ `
$numEE` a
)EEa b
,EEb c

_Player1IdEEd n
,EEn o
$numEEo p
)EEp q
,EEq r
newFF 
	GamePieceFF 
(FF 
newFF !
GrasshopperFF" -
(FF/ 0
)FF0 1
,FF1 2
$strFF3 _
,FF_ `
newFFa d
PointFFe j
(FFj k
-FFk l
$numFFl m
,FFm n
-FFo p
$numFFp q
)FFq r
,FFr s

_Player1IdFFs }
,FF} ~
$numFF~ 
)	FF 
,
FF 
newGG 
	GamePieceGG 
(GG 
newGG !
GrasshopperGG" -
(GG/ 0
)GG0 1
,GG1 2
$strGG3 _
,GG_ `
newGGa d
PointGGe j
(GGj k
-GGk l
$numGGl m
,GGm n
-GGo p
$numGGp q
)GGq r
,GGr s

_Player1IdGGs }
,GG} ~
$num	GG~ 
)
GG 
,
GG 
newHH 
	GamePieceHH 
(HH 
newHH !
GrasshopperHH" -
(HH/ 0
)HH0 1
,HH1 2
$strHH3 _
,HH_ `
newHHa d
PointHHe j
(HHj k
-HHk l
$numHHl m
,HHm n
-HHo p
$numHHp q
)HHq r
,HHr s

_Player1IdHHs }
,HH} ~
$num	HH~ 
)
HH 
}II 
;II 
privateJJ 
ListJJ 
<JJ 
	GamePieceJJ 
>JJ 
_player2PiecesJJ  .
=JJ/ 0
newJJ1 4
ListJJ5 9
<JJ9 :
	GamePieceJJ: C
>JJC D
{KK 
newLL 
	GamePieceLL 
(LL 
newLL !
QueenLL" '
(LL' (
)LL( )
,LL) *
$strLL+ Q
,LLQ R
newLLS V
PointLLW \
(LL\ ]
-LL] ^
$numLL^ _
,LL_ `
-LLa b
$numLLb c
)LLc d
,LLd e

_Player2IdLLe o
,LLo p
$numLLp q
)LLq r
,LLr s
newMM 
	GamePieceMM 
(MM 
newMM !
SpiderMM" (
(MM( )
)MM) *
,MM* +
$strMM, S
,MMS T
newMMU X
PointMMY ^
(MM^ _
-MM_ `
$numMM` a
,MMa b
-MMc d
$numMMd e
)MMe f
,MMf g

_Player2IdMMg q
,MMq r
$numMMr s
)MMs t
,MMt u
newNN 
	GamePieceNN 
(NN 
newNN !
SpiderNN" (
(NN( )
)NN) *
,NN* +
$strNN, S
,NNS T
newNNU X
PointNNY ^
(NN^ _
-NN_ `
$numNN` a
,NNa b
-NNc d
$numNNd e
)NNe f
,NNf g

_Player2IdNNg q
,NNq r
$numNNr s
)NNs t
,NNt u
newOO 
	GamePieceOO 
(OO 
newOO !
BeetleOO" (
(OO( )
)OO) *
,OO* +
$strOO, S
,OOS T
newOOU X
PointOOY ^
(OO^ _
-OO_ `
$numOO` a
,OOa b
-OOc d
$numOOd e
)OOe f
,OOf g

_Player2IdOOg q
,OOq r
$numOOr s
)OOs t
,OOt u
newPP 
	GamePiecePP 
(PP 
newPP !
BeetlePP" (
(PP( )
)PP) *
,PP* +
$strPP, S
,PPS T
newPPU X
PointPPY ^
(PP^ _
-PP_ `
$numPP` a
,PPa b
-PPc d
$numPPd e
)PPe f
,PPf g

_Player2IdPPg q
,PPq r
$numPPr s
)PPs t
,PPt u
newQQ 
	GamePieceQQ 
(QQ 
newQQ !
AntQQ" %
(QQ% &
)QQ& '
,QQ' (
$strQQ) M
,QQM N
newQQO R
PointQQS X
(QQX Y
-QQY Z
$numQQZ [
,QQ[ \
-QQ] ^
$numQQ^ _
)QQ_ `
,QQ` a

_Player2IdQQb l
,QQl m
$numQQm n
)QQn o
,QQo p
newRR 
	GamePieceRR 
(RR 
newRR !
AntRR" %
(RR% &
)RR& '
,RR' (
$strRR) M
,RRM N
newRRO R
PointRRS X
(RRX Y
-RRY Z
$numRRZ [
,RR[ \
-RR] ^
$numRR^ _
)RR_ `
,RR` a

_Player2IdRRb l
,RRl m
$numRRm n
)RRn o
,RRo p
newSS 
	GamePieceSS 
(SS 
newSS !
AntSS" %
(SS% &
)SS& '
,SS' (
$strSS) M
,SSM N
newSSO R
PointSSS X
(SSX Y
-SSY Z
$numSSZ [
,SS[ \
-SS] ^
$numSS^ _
)SS_ `
,SS` a

_Player2IdSSb l
,SSl m
$numSSm n
)SSn o
,SSo p
newTT 
	GamePieceTT 
(TT 
newTT !
GrasshopperTT" -
(TT. /
)TT/ 0
,TT0 1
$strTT2 ^
,TT^ _
newTT` c
PointTTd i
(TTi j
-TTj k
$numTTk l
,TTl m
-TTn o
$numTTo p
)TTp q
,TTq r

_Player2IdTTs }
,TT} ~
$numTT~ 
)	TT 
,
TT 
newUU 
	GamePieceUU 
(UU 
newUU !
GrasshopperUU" -
(UU. /
)UU/ 0
,UU0 1
$strUU2 ^
,UU^ _
newUU` c
PointUUd i
(UUi j
-UUj k
$numUUk l
,UUl m
-UUn o
$numUUo p
)UUp q
,UUq r

_Player2IdUUr |
,UU| }
$numUU} 
)	UU 
,
UU 
newVV 
	GamePieceVV 
(VV 
newVV !
GrasshopperVV" -
(VV. /
)VV/ 0
,VV0 1
$strVV2 ^
,VV^ _
newVV` c
PointVVd i
(VVi j
-VVj k
$numVVk l
,VVl m
-VVn o
$numVVo p
)VVp q
,VVq r

_Player2IdVVs }
,VV} ~
$num	VV~ 
)
VV 
}WW 
;WW 
publicYY 
GameBoardViewYY 
(YY 
)YY 
{ZZ 	
_gameManagerClient[[ 
=[[  
new[[! $
GameManagerClient[[% 6
([[6 7
new[[7 :
InstanceContext[[; J
([[J K
this[[K O
)[[O P
)[[P Q
;[[Q R
InitializeComponent\\ 
(\\  
)\\  !
;\\! "
if]] 
(]] 
App]] 
.]] 
IsMusicPlaying]] "
)]]" #
{^^ 
App__ 
.__ 
	PlayMusic__ 
(__ 
$str__ .
)__. /
;__/ 0
}`` 
InitializeBoardaa 
(aa 
)aa 
;aa 
ConnectToGameBoardbb 
(bb 
)bb  
;bb  !
	Constantscc 
.cc 
	IsInMatchcc 
=cc  !
truecc" &
;cc& '
_numberOfTurndd 
=dd 
$numdd 
;dd 
}ee 	
privategg 
voidgg 
ConnectToGameBoardgg '
(gg' (
)gg( )
{hh 	
LoggerManagerii 
loggerii  
=ii! "
newii# &
LoggerManagerii' 4
(ii4 5
thisii5 9
.ii9 :
GetTypeii: A
(iiA B
)iiB C
)iiC D
;iiD E
tryjj 
{kk 
UserSessionll 
userSessionll '
=ll( )
newll* -
UserSessionll. 9
(ll9 :
)ll: ;
{mm 
usernamenn 
=nn  
UserProfileSingletonnn 3
.nn3 4
usernamenn4 <
,nn< =
	idAccountoo 
=oo  
UserProfileSingletonoo  4
.oo4 5
	idAccountoo5 >
,oo> ?
	codeMatchpp 
=pp 
MatchSingletonpp  .
.pp. /
	codeMatchpp/ 8
}qq 
;qq 
_gameManagerClientrr "
.rr" #
ConnectToGameBoardrr# 5
(rr5 6
userSessionrr6 A
,rrA B
userSessionrrC N
.rrN O
	codeMatchrrO X
)rrX Y
;rrY Z
}ss 
catchtt 
(tt %
EndpointNotFoundExceptiontt ,
endPointExceptiontt- >
)tt> ?
{uu 
loggervv 
.vv 
LogFatalvv 
(vv  
endPointExceptionvv  1
)vv1 2
;vv2 3
DialogManagerww 
.ww !
ShowErrorMessageAlertww 3
(ww3 4

Propertiesww4 >
.ww> ?
	Resourcesww? H
.wwH I#
dialogEndPointExceptionwwI `
)ww` a
;wwa b
}xx 
catchyy 
(yy 
TimeoutExceptionyy #
timeOutExceptionyy$ 4
)yy4 5
{zz 
logger{{ 
.{{ 
LogWarn{{ 
({{ 
timeOutException{{ /
){{/ 0
;{{0 1
DialogManager|| 
.|| !
ShowErrorMessageAlert|| 3
(||3 4

Properties||4 >
.||> ?
	Resources||? H
.||H I"
dialogTimeOutException||I _
)||_ `
;||` a
}}} 
catch~~ 
(~~ "
CommunicationException~~ )"
communicationException~~* @
)~~@ A
{ 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 
LoadPlayerPieces
 %
(
% &

StackPanel
& 0
playerPiecesPanel
1 B
,
B C
List
D H
<
H I
	GamePiece
I R
>
R S
pieces
T Z
,
Z [
string
\ b
username
c k
)
k l
{
 	
for
 
(
 
int
 
indexPieces
  
=
! "
$num
# $
;
$ %
indexPieces
& 1
<
2 3
pieces
4 :
.
: ;
Count
; @
;
@ A
indexPieces
B M
++
M O
)
O P
{
 
pieces
 
[
 
indexPieces
 "
]
" #
.
# $

PlayerName
$ .
=
/ 0
username
1 9
;
9 :
pieces
 
[
 
indexPieces
 "
]
" #
.
# $
Piece
$ )
.
) *

PlayerName
* 4
=
5 6
username
7 ?
;
? @
}
 
playerPiecesPanel
 
.
 
Children
 &
.
& '
Clear
' ,
(
, -
)
- .
;
. /
for
 
(
 
int
 
i
 
=
 
$num
 
;
 
i
 
<
 
pieces
  &
.
& '
Count
' ,
;
, -
i
. /
++
/ 1
)
1 2
{
 
var
 
piece
 
=
 
pieces
 "
[
" #
i
# $
]
$ %
;
% &
piece
 
.
 

PlayerName
  
=
! "
username
# +
;
+ ,
piece
 
.
 
Piece
 
.
 

PlayerName
 &
=
' (
username
) 1
;
1 2
var
 
image
 
=
 
new
 
Image
  %
{
 
Source
 
=
 
new
  
BitmapImage
! ,
(
, -
new
- 0
Uri
1 4
(
4 5
piece
5 :
.
: ;
	ImagePath
; D
,
D E
UriKind
F M
.
M N
Relative
N V
)
V W
)
W X
,
X Y
Width
 
=
 
$num
 
,
 
Height
 
=
 
$num
 
,
  
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ ,
,
, -
$num
. /
*
0 1
$num
2 4
,
4 5
$num
6 7
,
7 8
$num
9 :
)
: ;
,
; <
Tag
 
=
 
piece
 
,
  
DataContext
 
=
  !
piece
" '
}
 
;
 
playerPiecesPanel
 !
.
! "
Children
" *
.
* +
Add
+ .
(
. /
image
/ 4
)
4 5
;
5 6
image
 
.
 
	MouseDown
 
+=
  "
Piece_MouseDown
# 2
;
2 3
}
 
}
 	
private
   
void
   
InitializeBoard
   $
(
  $ %
)
  % &
{
¡¡ 	
int
¢¢ 
rows
¢¢ 
=
¢¢ 
$num
¢¢ 
;
¢¢ 
int
££ 
columns
££ 
=
££ 
$num
££ 
;
££ 
double
¤¤ 
hexagonSize
¤¤ 
=
¤¤  
$num
¤¤! #
;
¤¤# $
double
¥¥ 
xOffset
¥¥ 
=
¥¥ 
hexagonSize
¥¥ (
*
¥¥) *
Math
¥¥+ /
.
¥¥/ 0
Sqrt
¥¥0 4
(
¥¥4 5
$num
¥¥5 6
)
¥¥6 7
;
¥¥7 8
double
¦¦ 
yOffset
¦¦ 
=
¦¦ 
hexagonSize
¦¦ (
*
¦¦) *
$num
¦¦+ .
;
¦¦. /!
canva_GameBoardGrid
§§ 
.
§§  
Children
§§  (
.
§§( )
Clear
§§) .
(
§§. /
)
§§/ 0
;
§§0 1
_cellDictionary
¨¨ 
.
¨¨ 
Clear
¨¨ !
(
¨¨! "
)
¨¨" #
;
¨¨# $
for
©© 
(
©© 
int
©© 
row
©© 
=
©© 
$num
©© 
;
©© 
row
©© !
<
©©" #
rows
©©$ (
;
©©( )
row
©©* -
++
©©- /
)
©©/ 0
{
ªª 
for
«« 
(
«« 
int
«« 
col
«« 
=
«« 
$num
««  
;
««  !
col
««" %
<
««& '
columns
««( /
;
««/ 0
col
««1 4
++
««4 6
)
««6 7
{
¬¬ 
var
­­ 
hexagon
­­ 
=
­­  !
new
­­" %
Polygon
­­& -
{
®® 
Points
¯¯ 
=
¯¯  !
CreateHexagonPoints
¯¯! 4
(
¯¯4 5
hexagonSize
¯¯5 @
)
¯¯@ A
,
¯¯A B
Tag
°° 
=
°° 
new
°° !
Point
°°" '
(
°°' (
row
°°( +
,
°°+ ,
col
°°- 0
)
°°0 1
,
°°1 2
}
±± 
;
±± 
hexagon
²² 
.
²² 
	IsEnabled
²² %
=
²²& '
false
²²( -
;
²²- .
double
³³ 
x
³³ 
=
³³ 
col
³³ "
*
³³# $
xOffset
³³% ,
;
³³, -
double
´´ 
y
´´ 
=
´´ 
row
´´ "
*
´´# $
yOffset
´´% ,
;
´´, -
if
µµ 
(
µµ 
row
µµ 
%
µµ 
$num
µµ 
==
µµ  "
$num
µµ# $
)
µµ$ %
x
µµ& '
+=
µµ( *
xOffset
µµ+ 2
/
µµ3 4
$num
µµ5 6
;
µµ6 7
Canvas
¶¶ 
.
¶¶ 
SetLeft
¶¶ "
(
¶¶" #
hexagon
¶¶# *
,
¶¶* +
x
¶¶, -
)
¶¶- .
;
¶¶. /
Canvas
·· 
.
·· 
SetTop
·· !
(
··! "
hexagon
··" )
,
··) *
y
··+ ,
)
··, -
;
··- .!
canva_GameBoardGrid
¸¸ '
.
¸¸' (
Children
¸¸( 0
.
¸¸0 1
Add
¸¸1 4
(
¸¸4 5
hexagon
¸¸5 <
)
¸¸< =
;
¸¸= >
_cellDictionary
¹¹ #
[
¹¹# $
new
¹¹$ '
Point
¹¹( -
(
¹¹- .
row
¹¹. 1
,
¹¹1 2
col
¹¹3 6
)
¹¹6 7
]
¹¹7 8
=
¹¹9 :
hexagon
¹¹; B
;
¹¹B C
}
ºº 
}
»» 
}
¼¼ 	
private
¾¾ 
void
¾¾ 
Cell_MouseDown
¾¾ #
(
¾¾# $
object
¾¾$ *
sender
¾¾+ 1
,
¾¾1 2"
MouseButtonEventArgs
¾¾3 G
e
¾¾H I
)
¾¾I J
{
¿¿ 	
if
ÀÀ 
(
ÀÀ 
_selectedPiece
ÀÀ 
!=
ÀÀ !
null
ÀÀ" &
&&
ÀÀ' )
sender
ÀÀ* 0
is
ÀÀ1 3
Polygon
ÀÀ4 ;
cell
ÀÀ< @
&&
ÀÀA C
cell
ÀÀD H
!=
ÀÀI K
null
ÀÀL P
)
ÀÀP Q
{
ÁÁ 
PlacePieceOnCell
ÂÂ  
(
ÂÂ  !
cell
ÂÂ! %
)
ÂÂ% &
;
ÂÂ& '
}
ÃÃ 
e
ÄÄ 
.
ÄÄ 
Handled
ÄÄ 
=
ÄÄ 
true
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
private
ÇÇ 
void
ÇÇ %
PieceSelected_MouseDown
ÇÇ ,
(
ÇÇ, -
object
ÇÇ- 3
sender
ÇÇ4 :
,
ÇÇ: ;"
MouseButtonEventArgs
ÇÇ< P
e
ÇÇQ R
)
ÇÇR S
{
ÈÈ 	
if
ÉÉ 
(
ÉÉ 
sender
ÉÉ 
is
ÉÉ 
Image
ÉÉ 

imagePiece
ÉÉ  *
)
ÉÉ* +
{
ÊÊ 
	GamePiece
ËË 
piece
ËË 
=
ËË  !
(
ËË" #
	GamePiece
ËË# ,
)
ËË, -

imagePiece
ËË- 7
.
ËË7 8
Tag
ËË8 ;
;
ËË; <
if
ÌÌ 
(
ÌÌ 
_isBeetleMoved
ÌÌ "
)
ÌÌ" #
{
ÍÍ 
List
ÎÎ 
<
ÎÎ 
Point
ÎÎ 
>
ÎÎ 
adjacentPoints
ÎÎ  .
=
ÎÎ/ 0"
ObtainAdjacentPoints
ÎÎ1 E
(
ÎÎE F
piece
ÎÎF K
.
ÎÎK L
Position
ÎÎL T
)
ÎÎT U
;
ÎÎU V
if
ÏÏ 
(
ÏÏ 
adjacentPoints
ÏÏ &
.
ÏÏ& '
Contains
ÏÏ' /
(
ÏÏ/ 0
_selectedPiece
ÏÏ0 >
.
ÏÏ> ?
Position
ÏÏ? G
)
ÏÏG H
)
ÏÏH I
{
ÐÐ #
PieceSelectedByBeetle
ÑÑ -
(
ÑÑ- .

imagePiece
ÑÑ. 8
,
ÑÑ8 9
_selectedPiece
ÑÑ: H
)
ÑÑH I
;
ÑÑI J
}
ÒÒ 
}
ÓÓ 
else
ÔÔ 
{
ÕÕ 
if
ÖÖ 
(
ÖÖ (
ValidateQueenPieceIsInGame
ÖÖ 2
(
ÖÖ2 3
)
ÖÖ3 4
)
ÖÖ4 5
{
×× "
PieceOnBoardSelected
ØØ ,
(
ØØ, -
piece
ØØ- 2
)
ØØ2 3
;
ØØ3 4
}
ÙÙ 
else
ÚÚ 
{
ÛÛ 
ShowInfoMessage
ÜÜ '
(
ÜÜ' (

Properties
ÜÜ( 2
.
ÜÜ2 3
	Resources
ÜÜ3 <
.
ÜÜ< =!
dialogFourFirstTurn
ÜÜ= P
)
ÜÜP Q
;
ÜÜQ R
}
ÝÝ 
}
ÞÞ 
}
ßß 
e
àà 
.
àà 
Handled
àà 
=
àà 
true
àà 
;
àà 
}
áá 	
private
ãã 
void
ãã 
Piece_MouseDown
ãã $
(
ãã$ %
object
ãã% +
sender
ãã, 2
,
ãã2 3"
MouseButtonEventArgs
ãã4 H
e
ããI J
)
ããJ K
{
ää 	
if
åå 
(
åå 
sender
åå 
is
åå 
Image
åå 

pieceImage
åå  *
&&
åå+ -

pieceImage
åå. 8
.
åå8 9
DataContext
åå9 D
is
ååE G
	GamePiece
ååH Q
piece
ååR W
&&
ååX Z
piece
åå[ `
.
åå` a

PlayerName
ååa k
==
åål n#
UserProfileSingletonååo 
.åå 
usernameåå 
)åå 
{
ææ 
if
çç 
(
çç 
_numberOfTurn
çç !
==
çç" $
$num
çç% &
&&
çç' )
!
çç* +(
ValidateQueenPieceIsInGame
çç+ E
(
ççE F
)
ççF G
&&
ççH J
piece
ççK P
.
ççP Q
Piece
ççQ V
.
ççV W
Name
ççW [
!=
çç\ ^
_QueenPieceName
çç_ n
&&
çço q
!
ççr s
_isQueenInGameççs 
)çç 
{
èè "
HandleQueenNotInPlay
éé (
(
éé( )
)
éé) *
;
éé* +
}
êê 
else
ëë 
{
ìì "
HandlePieceSelection
íí (
(
íí( )
piece
íí) .
)
íí. /
;
íí/ 0
}
îî 
}
ïï 
e
ðð 
.
ðð 
Handled
ðð 
=
ðð 
true
ðð 
;
ðð 
}
ññ 	
private
óó 
void
óó "
HandleQueenNotInPlay
óó )
(
óó) *
)
óó* +
{
ôô 	
ShowInfoMessage
õõ 
(
õõ 

Properties
õõ &
.
õõ& '
	Resources
õõ' 0
.
õõ0 1$
dialogQueenIsNotInPlay
õõ1 G
)
õõG H
;
õõH I-
HighlightAvailableStartingCells
öö +
(
öö+ ,
)
öö, -
;
öö- .
}
÷÷ 	
private
ùù 
void
ùù "
HandlePieceSelection
ùù )
(
ùù) *
	GamePiece
ùù* 3
piece
ùù4 9
)
ùù9 :
{
úú 	
_selectedPiece
ûû 
=
ûû 
piece
ûû "
;
ûû" #
if
üü 
(
üü 
!
üü !
_isFirstPiecePlaced
üü $
)
üü$ %
{
ýý '
HandleFirstPiecePlacement
þþ )
(
þþ) *
)
þþ* +
;
þþ+ ,
}
ÿÿ 
else
 
{
 ,
HandleSubsequentPiecePlacement
 .
(
. /
piece
/ 4
)
4 5
;
5 6
}
 
}
 	
private
 
void
 '
HandleFirstPiecePlacement
 .
(
. /
)
/ 0
{
 	
Point
 
centerPosition
  
=
! "
new
# &
Point
' ,
(
, -
$num
- .
,
. /
$num
0 1
)
1 2
;
2 3
if
 
(
 
_cellDictionary
 
.
  
TryGetValue
  +
(
+ ,
centerPosition
, :
,
: ;
out
< ?
Polygon
@ G

centerCell
H R
)
R S
&&
T V
!
W X
_board
X ^
.
^ _
ContainsKey
_ j
(
j k
centerPosition
k y
)
y z
)
z {
{
 2
$HighlightStartingFirstTurnStaterCell
 4
(
4 5
centerPosition
5 C
)
C D
;
D E
PlacePieceOnCell
  
(
  !
_lastPlacedCell
! 0
)
0 1
;
1 2
}
 
else
 
{
 2
$HigligthStartingFirstTurnOponentCell
 4
(
4 5
)
5 6
;
6 7
}
 
}
 	
private
 
void
 ,
HandleSubsequentPiecePlacement
 3
(
3 4
	GamePiece
4 =
piece
> C
)
C D
{
 	
Point
 

staterMove
 
=
 
new
 "
Point
# (
(
( )
-
) *
$num
* +
,
+ ,
-
- .
$num
. /
)
/ 0
;
0 1
if
 
(
 
piece
 
.
 
Position
 
==
 !

staterMove
" ,
)
, -
{
 -
HighlightAvailableStartingCells
 /
(
/ 0
)
0 1
;
1 2
}
 
}
 	
private
 
bool
 (
ValidateQueenPieceIsInGame
 /
(
/ 0
)
0 1
{
 	
var
 
piecesCaptured
 
=
  (
_piecesCapturedByTheBeetle
! ;
.
; <
Select
< B
(
B C
entry
C H
=>
I K
entry
L Q
.
Q R
Value
R W
.
W X
Tag
X [
as
\ ^
	GamePiece
_ h
)
h i
.
i j
ToList
j p
(
p q
)
q r
;
r s
bool
   
queenOnBoard
   
=
   
_board
    &
.
  & '
Values
  ' -
.
  - .
Any
  . 1
(
  1 2
piece
  2 7
=>
  8 :
piece
¡¡ 
!=
¡¡ 
null
¡¡ 
&&
¡¡  
piece
¢¢ 
.
¢¢ 
Piece
¢¢ 
.
¢¢ 
Name
¢¢  
.
¢¢  !
Equals
¢¢! '
(
¢¢' (
_QueenPieceName
¢¢( 7
)
¢¢7 8
&&
¢¢9 ;
piece
££ 
.
££ 
Piece
££ 
.
££ 

PlayerName
££ &
==
££' )"
UserProfileSingleton
££* >
.
££> ?
username
££? G
)
¤¤ 
;
¤¤ 
bool
¥¥ 
queenCaptured
¥¥ 
=
¥¥  
piecesCaptured
¥¥! /
.
¥¥/ 0
Exists
¥¥0 6
(
¥¥6 7
pieceCaptured
¥¥7 D
=>
¥¥E G
pieceCaptured
¦¦ 
!=
¦¦  
null
¦¦! %
&&
¦¦& (
pieceCaptured
§§ 
.
§§ 

PlayerName
§§ (
==
§§) +"
UserProfileSingleton
§§, @
.
§§@ A
username
§§A I
&&
§§J L
pieceCaptured
¨¨ 
.
¨¨ 
Piece
¨¨ #
.
¨¨# $
Name
¨¨$ (
==
¨¨) +
_QueenPieceName
¨¨, ;
)
©© 
;
©© 
_isQueenInGame
ªª 
=
ªª 
queenOnBoard
ªª )
||
ªª* ,
queenCaptured
ªª- :
;
ªª: ;
return
«« 
_isQueenInGame
«« !
;
««! "
}
¬¬ 	
private
®® 
void
®® "
PieceOnBoardSelected
®® )
(
®®) *
	GamePiece
®®* 3
piece
®®4 9
)
®®9 :
{
¯¯ 	
string
°° 
typeOfPiece
°° 
=
°°  
piece
°°! &
.
°°& '
Piece
°°' ,
.
°°, -
Name
°°- 1
;
°°1 2
if
±± 
(
±± 1
#ValidateThatPieceCannotBreakTheHive
±± 3
(
±±3 4
piece
±±4 9
.
±±9 :
Position
±±: B
)
±±B C
)
±±C D
{
²² 
switch
³³ 
(
³³ 
typeOfPiece
³³ #
)
³³# $
{
´´ 
case
µµ 
_QueenPieceName
µµ (
:
µµ( )
	MoveQueen
¶¶ !
(
¶¶! "
piece
¶¶" '
)
¶¶' (
;
¶¶( )
break
·· 
;
·· 
case
¸¸ 
$str
¸¸ !
:
¸¸! "

MoveSpider
¹¹ "
(
¹¹" #
piece
¹¹# (
)
¹¹( )
;
¹¹) *
break
ºº 
;
ºº 
case
»» 
$str
»» 
:
»» 
MoveAnt
¼¼ 
(
¼¼  
piece
¼¼  %
)
¼¼% &
;
¼¼& '
break
½½ 
;
½½ 
case
¾¾ 
$str
¾¾ &
:
¾¾& '
MoveGrasshopper
¿¿ '
(
¿¿' (
piece
¿¿( -
)
¿¿- .
;
¿¿. /
break
ÀÀ 
;
ÀÀ 
case
ÁÁ 
BeetlePieceName
ÁÁ (
:
ÁÁ( )

MoveBeetle
ÂÂ "
(
ÂÂ" #
piece
ÂÂ# (
)
ÂÂ( )
;
ÂÂ) *
break
ÃÃ 
;
ÃÃ 
default
ÄÄ 
:
ÄÄ 
DialogManager
ÅÅ %
.
ÅÅ% &#
ShowErrorMessageAlert
ÅÅ& ;
(
ÅÅ; <

Properties
ÅÅ< F
.
ÅÅF G
	Resources
ÅÅG P
.
ÅÅP Q*
dialogCouldntObtainPieceName
ÅÅQ m
)
ÅÅm n
;
ÅÅn o
break
ÆÆ 
;
ÆÆ 
}
ÇÇ 
}
ÈÈ 
else
ÉÉ 
{
ÊÊ 
ShowInfoMessage
ËË 
(
ËË  

Properties
ËË  *
.
ËË* +
	Resources
ËË+ 4
.
ËË4 5"
dialogBrokeHiveAlert
ËË5 I
)
ËËI J
;
ËËJ K
}
ÌÌ 
}
ÎÎ 	
public
ÐÐ 
void
ÐÐ 
ShowInfoMessage
ÐÐ #
(
ÐÐ# $
string
ÐÐ$ *
message
ÐÐ+ 2
)
ÐÐ2 3
{
ÑÑ 	"
txtBlock_InfoMessage
ÒÒ  
.
ÒÒ  !
Text
ÒÒ! %
=
ÒÒ& '
message
ÒÒ( /
;
ÒÒ/ 0"
txtBlock_InfoMessage
ÓÓ  
.
ÓÓ  !

Visibility
ÓÓ! +
=
ÓÓ, -

Visibility
ÓÓ. 8
.
ÓÓ8 9
Visible
ÓÓ9 @
;
ÓÓ@ A

Storyboard
ÔÔ 
infoAnimation
ÔÔ $
=
ÔÔ% &
(
ÔÔ' (

Storyboard
ÔÔ( 2
)
ÔÔ2 3
FindResource
ÔÔ3 ?
(
ÔÔ? @
$str
ÔÔ@ ]
)
ÔÔ] ^
;
ÔÔ^ _
infoAnimation
ÕÕ 
.
ÕÕ 
	Completed
ÕÕ #
+=
ÕÕ$ &
(
ÕÕ' (
s
ÕÕ( )
,
ÕÕ) *
e
ÕÕ+ ,
)
ÕÕ, -
=>
ÕÕ. 0
{
ÖÖ "
txtBlock_InfoMessage
×× $
.
××$ %

Visibility
××% /
=
××0 1

Visibility
××2 <
.
××< =
	Collapsed
××= F
;
××F G
}
ØØ 
;
ØØ 
infoAnimation
ÙÙ 
.
ÙÙ 
Begin
ÙÙ 
(
ÙÙ  
)
ÙÙ  !
;
ÙÙ! "
}
ÚÚ 	
private
ÜÜ 
void
ÜÜ 
	MoveQueen
ÜÜ 
(
ÜÜ 
	GamePiece
ÜÜ (
piece
ÜÜ) .
)
ÜÜ. /
{
ÝÝ 	
ResetHighlights
ÞÞ 
(
ÞÞ 
)
ÞÞ 
;
ÞÞ 
_selectedPiece
ßß 
=
ßß 
piece
ßß "
;
ßß" #
var
àà 
checkedPositions
àà  
=
àà! "
new
àà# &
HashSet
àà' .
<
àà. /
Point
àà/ 4
>
àà4 5
(
àà5 6
)
àà6 7
;
àà7 8
Point
áá 
queenPosition
áá 
=
áá  !
piece
áá" '
.
áá' (
Position
áá( 0
;
áá0 1
var
ââ 

queenPiece
ââ 
=
ââ 
_board
ââ #
[
ââ# $
queenPosition
ââ$ 1
]
ââ1 2
;
ââ2 3
_board
ãã 
.
ãã 
Remove
ãã 
(
ãã 
queenPosition
ãã '
)
ãã' (
;
ãã( )
var
ää 
adjacentPoints
ää 
=
ää  "
ObtainAdjacentPoints
ää! 5
(
ää5 6
piece
ää6 ;
.
ää; <
Position
ää< D
)
ääD E
;
ääE F
foreach
åå 
(
åå 
var
åå 
offset
åå 
in
åå  "
adjacentPoints
åå# 1
)
åå1 2
{
ææ 
if
çç 
(
çç 
!
çç 
_board
çç 
.
çç 
ContainsKey
çç '
(
çç' (
offset
çç( .
)
çç. /
&&
çç0 2
_cellDictionary
èè #
.
èè# $
TryGetValue
èè$ /
(
èè/ 0
offset
èè0 6
,
èè6 7
out
èè8 ;
Polygon
èè< C
cell
èèD H
)
èèH I
&&
èèJ L
!
éé 
checkedPositions
éé %
.
éé% &
Contains
éé& .
(
éé. /
offset
éé/ 5
)
éé5 6
&&
éé7 9
IsConnectedToHive
êê %
(
êê% &
offset
êê& ,
)
êê, -
&&
êê. 0
IsNotSurrounded
ëë #
(
ëë# $
offset
ëë$ *
)
ëë* +
)
ëë+ ,
{
ìì 
cell
íí 
.
íí 
Fill
íí 
=
íí 
Brushes
íí  '
.
íí' (
Green
íí( -
;
íí- .
cell
îî 
.
îî 
	IsEnabled
îî "
=
îî# $
true
îî% )
;
îî) *
cell
ïï 
.
ïï 
	MouseDown
ïï "
+=
ïï# %.
 PlacePieceThatIsInGame_MouseDown
ïï& F
;
ïïF G
checkedPositions
ðð $
.
ðð$ %
Add
ðð% (
(
ðð( )
offset
ðð) /
)
ðð/ 0
;
ðð0 1
}
ññ 
}
òò 
_board
óó 
.
óó 
Add
óó 
(
óó 
queenPosition
óó $
,
óó$ %

queenPiece
óó& 0
)
óó0 1
;
óó1 2
}
ôô 	
private
öö 
void
öö 

MoveSpider
öö 
(
öö  
	GamePiece
öö  )
piece
öö* /
)
öö/ 0
{
÷÷ 	
ResetHighlights
øø 
(
øø 
)
øø 
;
øø 
_selectedPiece
ùù 
=
ùù 
piece
ùù "
;
ùù" #
_board
úú 
.
úú 
Remove
úú 
(
úú 
piece
úú 
.
úú  
Position
úú  (
)
úú( )
;
úú) *
List
ûû 
<
ûû 
Point
ûû 
>
ûû 
adjacentToCurrent
ûû )
=
ûû* +"
ObtainAdjacentPoints
ûû, @
(
ûû@ A
piece
ûûA F
.
ûûF G
Position
ûûG O
)
ûûO P
;
ûûP Q
List
üü 
<
üü 
Point
üü 
>
üü 
posibleMoves
üü $
=
üü% &
ObtainSpiderMoves
üü' 8
(
üü8 9
piece
üü9 >
.
üü> ?
Position
üü? G
)
üüG H
.
ýý 
Where
ýý 
(
ýý 
pos
ýý 
=>
ýý 
!
ýý 
adjacentToCurrent
ýý 0
.
ýý0 1
Contains
ýý1 9
(
ýý9 :
pos
ýý: =
)
ýý= >
)
ýý> ?
.
þþ 
ToList
þþ 
(
þþ 
)
þþ 
;
þþ 
foreach
ÿÿ 
(
ÿÿ 
var
ÿÿ 
posiblePosition
ÿÿ (
in
ÿÿ) +
posibleMoves
ÿÿ, 8
)
ÿÿ8 9
{
 
if
 
(
 
_cellDictionary
 #
.
# $
TryGetValue
$ /
(
/ 0
posiblePosition
0 ?
,
? @
out
A D
Polygon
E L
cell
M Q
)
Q R
)
R S
{
 
cell
 
.
 
Fill
 
=
 
Brushes
  '
.
' (
Green
( -
;
- .
cell
 
.
 
	IsEnabled
 "
=
# $
true
% )
;
) *
cell
 
.
 
	MouseDown
 "
+=
# %.
 PlacePieceThatIsInGame_MouseDown
& F
;
F G
}
 
}
 
_board
 
.
 
Add
 
(
 
piece
 
.
 
Position
 %
,
% &
piece
' ,
)
, -
;
- .
}
 	
private
 
void
 

MoveBeetle
 
(
  
	GamePiece
  )
piece
* /
)
/ 0
{
 	
ResetHighlights
 
(
 
)
 
;
 
_selectedPiece
 
=
 
piece
 "
;
" #
_board
 
.
 
Remove
 
(
 
piece
 
.
  
Position
  (
)
( )
;
) *
bool
 
isOnAnotherPiece
 !
=
" #(
_piecesCapturedByTheBeetle
$ >
.
> ?
Any
? B
(
B C
	gamePiece
C L
=>
M O
	gamePiece
P Y
.
Y Z
Key
Z ]
==
^ `
(
a b
piece
b g
.
g h
PieceNumber
h s
,
s t
piece
u z
.
z {

PlayerName{ 
) 
) 
; 
List
 
<
 
Point
 
>
 
possibleMoves
 %
=
& '
ObtainBeetleMoves
( 9
(
9 :
piece
: ?
.
? @
Position
@ H
,
H I
isOnAnotherPiece
J Z
)
Z [
;
[ \
foreach
 
(
 
var
 
possiblePosition
 )
in
* ,
possibleMoves
- :
)
: ;
{
 
if
 
(
 
_cellDictionary
 #
.
# $
TryGetValue
$ /
(
/ 0
possiblePosition
0 @
,
@ A
out
B E
Polygon
F M
cell
N R
)
R S
&&
T V
!
W X
_board
X ^
.
^ _
ContainsKey
_ j
(
j k
possiblePosition
k {
)
{ |
)
| }
{
 
cell
 
.
 
Fill
 
=
 
Brushes
  '
.
' (
Green
( -
;
- .
cell
 
.
 
	IsEnabled
 "
=
# $
true
% )
;
) *
cell
 
.
 
	MouseDown
 "
+=
# %.
 PlacePieceThatIsInGame_MouseDown
& F
;
F G
}
 
else
 
if
 
(
 
_board
 
.
  
ContainsKey
  +
(
+ ,
possiblePosition
, <
)
< =
)
= >
{
 
List
 
<
 
Image
 
>
 
imagesOnBoard
  -
=
. /!
canva_GameBoardGrid
0 C
.
C D
Children
D L
.
L M
OfType
M S
<
S T
Image
T Y
>
Y Z
(
Z [
)
[ \
.
\ ]
ToList
] c
(
c d
)
d e
;
e f
foreach
 
(
 
Image
 "
imageOnBoard
# /
in
0 2
imagesOnBoard
3 @
)
@ A
{
 
	GamePiece
 !
	gamePiece
" +
=
, -
(
. /
	GamePiece
/ 8
)
8 9
imageOnBoard
9 E
.
E F
Tag
F I
;
I J
if
   
(
   
	gamePiece
   %
.
  % &
Position
  & .
==
  / 1
possiblePosition
  2 B
&&
  C E
	gamePiece
  F O
.
  O P

PlayerName
  P Z
!=
  [ ]"
UserProfileSingleton
  ^ r
.
  r s
username
  s {
)
  { |
{
¡¡ 
cell
¢¢  
.
¢¢  !
Fill
¢¢! %
=
¢¢& '
Brushes
¢¢( /
.
¢¢/ 0
Green
¢¢0 5
;
¢¢5 6
imageOnBoard
££ (
.
££( )
	IsEnabled
££) 2
=
££3 4
true
££5 9
;
££9 :
imageOnBoard
¤¤ (
.
¤¤( )
	MouseDown
¤¤) 2
+=
¤¤3 5%
PieceSelected_MouseDown
¤¤6 M
;
¤¤M N
}
¥¥ 
else
¦¦ 
if
¦¦ 
(
¦¦  !
	gamePiece
¦¦! *
.
¦¦* +
Position
¦¦+ 3
==
¦¦4 6
possiblePosition
¦¦7 G
&&
¦¦H J
	gamePiece
¦¦K T
.
¦¦T U

PlayerName
¦¦U _
==
¦¦` b"
UserProfileSingleton
¦¦c w
.
¦¦w x
username¦¦x 
)¦¦ 
{
§§ 
cell
¨¨  
.
¨¨  !
Fill
¨¨! %
=
¨¨& '
Brushes
¨¨( /
.
¨¨/ 0
Green
¨¨0 5
;
¨¨5 6
}
©© 
}
ªª 
_isBeetleMoved
«« "
=
««# $
true
««% )
;
««) *
}
¬¬ 
}
­­ 
_board
®® 
.
®® 
Add
®® 
(
®® 
piece
®® 
.
®® 
Position
®® %
,
®®% &
piece
®®' ,
)
®®, -
;
®®- .
}
¯¯ 	
private
±± 
void
±± 
MoveAnt
±± 
(
±± 
	GamePiece
±± &
piece
±±' ,
)
±±, -
{
²² 	
ResetHighlights
³³ 
(
³³ 
)
³³ 
;
³³ 
_selectedPiece
´´ 
=
´´ 
piece
´´ "
;
´´" #
_board
µµ 
.
µµ 
Remove
µµ 
(
µµ 
piece
µµ 
.
µµ  
Position
µµ  (
)
µµ( )
;
µµ) *
List
¶¶ 
<
¶¶ 
Point
¶¶ 
>
¶¶ 
possibleMoves
¶¶ %
=
¶¶& '
ObtainAntMoves
¶¶( 6
(
¶¶6 7
piece
¶¶7 <
.
¶¶< =
Position
¶¶= E
)
¶¶E F
;
¶¶F G
foreach
·· 
(
·· 
var
·· 
possiblePosition
·· )
in
··* ,
possibleMoves
··- :
)
··: ;
{
¸¸ 
if
¹¹ 
(
¹¹ 
_cellDictionary
¹¹ #
.
¹¹# $
TryGetValue
¹¹$ /
(
¹¹/ 0
possiblePosition
¹¹0 @
,
¹¹@ A
out
¹¹B E
Polygon
¹¹F M
cell
¹¹N R
)
¹¹R S
)
¹¹S T
{
ºº 
cell
»» 
.
»» 
Fill
»» 
=
»» 
Brushes
»»  '
.
»»' (
Green
»»( -
;
»»- .
cell
¼¼ 
.
¼¼ 
	IsEnabled
¼¼ "
=
¼¼# $
true
¼¼% )
;
¼¼) *
cell
½½ 
.
½½ 
	MouseDown
½½ "
+=
½½# %.
 PlacePieceThatIsInGame_MouseDown
½½& F
;
½½F G
}
¾¾ 
}
¿¿ 
_board
ÀÀ 
.
ÀÀ 
Add
ÀÀ 
(
ÀÀ 
piece
ÀÀ 
.
ÀÀ 
Position
ÀÀ %
,
ÀÀ% &
piece
ÀÀ' ,
)
ÀÀ, -
;
ÀÀ- .
}
ÁÁ 	
private
ÃÃ 
void
ÃÃ 
MoveGrasshopper
ÃÃ $
(
ÃÃ$ %
	GamePiece
ÃÃ% .
piece
ÃÃ/ 4
)
ÃÃ4 5
{
ÄÄ 	
ResetHighlights
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
_selectedPiece
ÆÆ 
=
ÆÆ 
piece
ÆÆ "
;
ÆÆ" #
_board
ÇÇ 
.
ÇÇ 
Remove
ÇÇ 
(
ÇÇ 
piece
ÇÇ 
.
ÇÇ  
Position
ÇÇ  (
)
ÇÇ( )
;
ÇÇ) *
List
ÈÈ 
<
ÈÈ 
Point
ÈÈ 
>
ÈÈ 
possibleMoves
ÈÈ %
=
ÈÈ& '$
ObtainGrassHopperMoves
ÈÈ( >
(
ÈÈ> ?
piece
ÈÈ? D
.
ÈÈD E
Position
ÈÈE M
)
ÈÈM N
;
ÈÈN O
foreach
ÉÉ 
(
ÉÉ 
var
ÉÉ 
possiblePosition
ÉÉ )
in
ÉÉ* ,
possibleMoves
ÉÉ- :
)
ÉÉ: ;
{
ÊÊ 
if
ËË 
(
ËË 
_cellDictionary
ËË #
.
ËË# $
TryGetValue
ËË$ /
(
ËË/ 0
possiblePosition
ËË0 @
,
ËË@ A
out
ËËB E
Polygon
ËËF M
cell
ËËN R
)
ËËR S
)
ËËS T
{
ÌÌ 
cell
ÍÍ 
.
ÍÍ 
Fill
ÍÍ 
=
ÍÍ 
Brushes
ÍÍ  '
.
ÍÍ' (
Green
ÍÍ( -
;
ÍÍ- .
cell
ÎÎ 
.
ÎÎ 
	IsEnabled
ÎÎ "
=
ÎÎ# $
true
ÎÎ% )
;
ÎÎ) *
cell
ÏÏ 
.
ÏÏ 
	MouseDown
ÏÏ "
+=
ÏÏ# %.
 PlacePieceThatIsInGame_MouseDown
ÏÏ& F
;
ÏÏF G
}
ÐÐ 
}
ÑÑ 
_board
ÒÒ 
.
ÒÒ 
Add
ÒÒ 
(
ÒÒ 
piece
ÒÒ 
.
ÒÒ 
Position
ÒÒ %
,
ÒÒ% &
piece
ÒÒ' ,
)
ÒÒ, -
;
ÒÒ- .
}
ÓÓ 	
private
ÕÕ 
List
ÕÕ 
<
ÕÕ 
Point
ÕÕ 
>
ÕÕ 
ObtainSpiderMoves
ÕÕ -
(
ÕÕ- .
Point
ÕÕ. 3
start
ÕÕ4 9
)
ÕÕ9 :
{
ÖÖ 	
var
×× 

validMoves
×× 
=
×× 
new
××  
List
××! %
<
××% &
Point
××& +
>
××+ ,
(
××, -
)
××- .
;
××. /
var
ØØ 
visitedPoints
ØØ 
=
ØØ 
new
ØØ  #
HashSet
ØØ$ +
<
ØØ+ ,
Point
ØØ, 1
>
ØØ1 2
{
ØØ3 4
start
ØØ5 :
}
ØØ; <
;
ØØ< =
var
ÙÙ 
queue
ÙÙ 
=
ÙÙ 
InitializeQueue
ÙÙ '
(
ÙÙ' (
start
ÙÙ( -
)
ÙÙ- .
;
ÙÙ. /
while
ÚÚ 
(
ÚÚ 
queue
ÚÚ 
.
ÚÚ 
Count
ÚÚ 
>
ÚÚ  
$num
ÚÚ! "
)
ÚÚ" #
{
ÛÛ 
var
ÜÜ 
(
ÜÜ 
currentPosition
ÜÜ $
,
ÜÜ$ %
previousPosition
ÜÜ& 6
,
ÜÜ6 7
currentSteps
ÜÜ8 D
)
ÜÜD E
=
ÜÜF G
queue
ÜÜH M
.
ÜÜM N
Dequeue
ÜÜN U
(
ÜÜU V
)
ÜÜV W
;
ÜÜW X
if
ÞÞ 
(
ÞÞ 
currentSteps
ÞÞ  
<
ÞÞ! "
$num
ÞÞ# $
)
ÞÞ$ %
{
ßß #
EnqueueAdjacentPoints
àà )
(
àà) *
queue
àà* /
,
àà/ 0
visitedPoints
àà1 >
,
àà> ?
currentPosition
àà@ O
,
ààO P
currentSteps
ààQ ]
)
àà] ^
;
àà^ _
}
áá 
else
ââ 
if
ââ 
(
ââ 
currentSteps
ââ %
==
ââ& (
$num
ââ) *
&&
ââ+ -
IsConnectedToHive
ââ. ?
(
ââ? @
currentPosition
ââ@ O
)
ââO P
)
ââP Q
{
ãã 

validMoves
ää 
.
ää 
Add
ää "
(
ää" #
currentPosition
ää# 2
)
ää2 3
;
ää3 4
}
åå 
}
ææ 
return
çç 

validMoves
çç 
;
çç 
}
èè 	
private
êê 
Queue
êê 
<
êê 
(
êê 
Point
êê 
position
êê %
,
êê% &
Point
êê' ,
previousPosition
êê- =
,
êê= >
int
êê? B
steps
êêC H
)
êêH I
>
êêI J
InitializeQueue
êêK Z
(
êêZ [
Point
êê[ `
start
êêa f
)
êêf g
{
ëë 	
var
ìì 
queue
ìì 
=
ìì 
new
ìì 
Queue
ìì !
<
ìì! "
(
ìì" #
Point
ìì# (
position
ìì) 1
,
ìì1 2
Point
ìì3 8
previousPosition
ìì9 I
,
ììI J
int
ììK N
steps
ììO T
)
ììT U
>
ììU V
(
ììV W
)
ììW X
;
ììX Y
queue
íí 
.
íí 
Enqueue
íí 
(
íí 
(
íí 
start
íí  
,
íí  !
start
íí" '
,
íí' (
$num
íí) *
)
íí* +
)
íí+ ,
;
íí, -
return
îî 
queue
îî 
;
îî 
}
ïï 	
private
ññ 
void
ññ #
EnqueueAdjacentPoints
ññ *
(
ññ* +
Queue
òò 
<
òò 
(
òò 
Point
òò 
position
òò %
,
òò% &
Point
òò' ,
previousPosition
òò- =
,
òò= >
int
òò? B
steps
òòC H
)
òòH I
>
òòI J
queue
òòK P
,
òòP Q
HashSet
óó 
<
óó 
Point
óó 
>
óó 
visitedPoints
óó ,
,
óó, -
Point
ôô 
currentPosition
ôô %
,
ôô% &
int
õõ 
currentSteps
õõ  
)
õõ  !
{
öö 	
var
÷÷ 
adjacentPoints
÷÷ "
=
÷÷# $"
ObtainAdjacentPoints
÷÷% 9
(
÷÷9 :
currentPosition
÷÷: I
)
÷÷I J
;
÷÷J K
foreach
øø 
(
øø 
var
øø 
adjacent
øø %
in
øø& (
adjacentPoints
øø) 7
.
øø7 8
Where
øø8 =
(
øø= >
adj
øø> A
=>
øøB D
IsValidMove
øøE P
(
øøP Q
adj
øøQ T
,
øøT U
visitedPoints
øøV c
,
øøc d
currentPosition
øøe t
)
øøt u
)
øøu v
)
øøv w
{
ùù 
visitedPoints
úú !
.
úú! "
Add
úú" %
(
úú% &
adjacent
úú& .
)
úú. /
;
úú/ 0
queue
ûû 
.
ûû 
Enqueue
ûû !
(
ûû! "
(
ûû" #
adjacent
ûû# +
,
ûû+ ,
currentPosition
ûû- <
,
ûû< =
currentSteps
ûû> J
+
ûûK L
$num
ûûM N
)
ûûN O
)
ûûO P
;
ûûP Q
}
üü 
}
ýý 	
private
ÿÿ 
bool
ÿÿ 
IsValidMove
ÿÿ  
(
ÿÿ  !
Point
ÿÿ! &
adjacent
ÿÿ' /
,
ÿÿ/ 0
HashSet
ÿÿ1 8
<
ÿÿ8 9
Point
ÿÿ9 >
>
ÿÿ> ?
visitedPoints
ÿÿ@ M
,
ÿÿM N
Point
ÿÿO T
currentPosition
ÿÿU d
)
ÿÿd e
{
 	
return
 
!
 
visitedPoints
 !
.
! "
Contains
" *
(
* +
adjacent
+ 3
)
3 4
&&
5 7
!
 
_board
 
.
 
ContainsKey
 &
(
& '
adjacent
' /
)
/ 0
&&
1 3$
IsContinouslyConnected
 )
(
) *
adjacent
* 2
,
2 3
currentPosition
4 C
,
C D
currentPosition
E T
)
T U
;
U V
}
 	
private
 
List
 
<
 
Point
 
>
 
ObtainBeetleMoves
 -
(
- .
Point
. 3
piecePosition
4 A
,
A B
bool
C G
isOnAnotherPiece
H X
)
X Y
{
 	
List
 
<
 
Point
 
>
 
adjacentMoves
 %
=
& '"
ObtainAdjacentPoints
( <
(
< =
piecePosition
= J
)
J K
;
K L
List
 
<
 
Point
 
>
 
possibleMoves
 %
=
& '
new
( +
List
, 0
<
0 1
Point
1 6
>
6 7
(
7 8
)
8 9
;
9 :
if
 
(
 
isOnAnotherPiece
  
)
  !
{
 
_board
 
.
 
Add
 
(
 
_selectedPiece
 )
.
) *
Position
* 2
,
2 3
_selectedPiece
4 B
)
B C
;
C D
possibleMoves
 
.
 
AddRange
 &
(
& '
adjacentMoves
' 4
.
4 5
Where
5 :
(
: ;
adj
; >
=>
? A
IsConnectedToHive
B S
(
S T
adj
T W
)
W X
)
X Y
)
Y Z
;
Z [
_board
 
.
 
Remove
 
(
 
_selectedPiece
 ,
.
, -
Position
- 5
)
5 6
;
6 7
}
 
else
 
{
 
possibleMoves
 
.
 
AddRange
 &
(
& '
adjacentMoves
' 4
.
4 5
Where
5 :
(
: ;
adj
; >
=>
? A%
IsConnectedToHiveBeetle
B Y
(
Y Z
adj
Z ]
)
] ^
)
^ _
)
_ `
;
` a
}
 
return
 
possibleMoves
  
;
  !
}
 	
private
 
List
 
<
 
Point
 
>
 
ObtainAntMoves
 *
(
* +
Point
+ 0

piecePoint
1 ;
)
; <
{
 	
List
 
<
 
Point
 
>
 
possibleMoves
 %
=
& '
new
( +
List
, 0
<
0 1
Point
1 6
>
6 7
(
7 8
)
8 9
;
9 :
HashSet
 
<
 
Point
 
>
 
visitedPoint
 '
=
( )
new
* -
HashSet
. 5
<
5 6
Point
6 ;
>
; <
(
< =
)
= >
;
> ?
Queue
 
<
 
Point
 
>
 
queue
 
=
  
new
! $
Queue
% *
<
* +
Point
+ 0
>
0 1
(
1 2
)
2 3
;
3 4
queue
 
.
 
Enqueue
 
(
 

piecePoint
 $
)
$ %
;
% &
visitedPoint
 
.
 
Add
 
(
 

piecePoint
 '
)
' (
;
( )
while
 
(
 
queue
 
.
 
Count
 
>
  
$num
! "
)
" #
{
 
var
   
currentPosition
   #
=
  $ %
queue
  & +
.
  + ,
Dequeue
  , 3
(
  3 4
)
  4 5
;
  5 6
var
¡¡ 
adjacentPoints
¡¡ "
=
¡¡# $"
ObtainAdjacentPoints
¡¡% 9
(
¡¡9 :
currentPosition
¡¡: I
)
¡¡I J
;
¡¡J K
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
adjacent
¢¢ %
in
¢¢& (
adjacentPoints
¢¢) 7
)
¢¢7 8
{
££ 
if
¤¤ 
(
¤¤ 
!
¤¤ 
visitedPoint
¤¤ %
.
¤¤% &
Contains
¤¤& .
(
¤¤. /
adjacent
¤¤/ 7
)
¤¤7 8
&&
¤¤9 ;
!
¥¥ 
_board
¥¥ 
.
¥¥  
ContainsKey
¥¥  +
(
¥¥+ ,
adjacent
¥¥, 4
)
¥¥4 5
&&
¥¥6 8
IsConnectedToHive
¦¦ )
(
¦¦) *
adjacent
¦¦* 2
)
¦¦2 3
&&
¦¦4 6
IsNotSurrounded
§§ '
(
§§' (
adjacent
§§( 0
)
§§0 1
)
§§1 2
{
¨¨ 
possibleMoves
©© %
.
©©% &
Add
©©& )
(
©©) *
adjacent
©©* 2
)
©©2 3
;
©©3 4
visitedPoint
ªª $
.
ªª$ %
Add
ªª% (
(
ªª( )
adjacent
ªª) 1
)
ªª1 2
;
ªª2 3
queue
«« 
.
«« 
Enqueue
«« %
(
««% &
adjacent
««& .
)
««. /
;
««/ 0
}
¬¬ 
}
­­ 
}
®® 
return
¯¯ 
possibleMoves
¯¯  
;
¯¯  !
}
°° 	
private
²² 
List
²² 
<
²² 
Point
²² 
>
²² $
ObtainGrassHopperMoves
²² 2
(
²²2 3
Point
²²3 8
start
²²9 >
)
²²> ?
{
³³ 	
List
´´ 
<
´´ 
Point
´´ 
>
´´ 

validMoves
´´ "
=
´´# $
new
´´% (
List
´´) -
<
´´- .
Point
´´. 3
>
´´3 4
(
´´4 5
)
´´5 6
;
´´6 7
var
µµ 

directions
µµ 
=
µµ "
ObtainAdjacentPoints
µµ 1
(
µµ1 2
start
µµ2 7
)
µµ7 8
;
µµ8 9
foreach
¶¶ 
(
¶¶ 
var
¶¶ 
	direction
¶¶ "
in
¶¶# %

directions
¶¶& 0
.
¶¶0 1
Where
¶¶1 6
(
¶¶6 7
	direction
¶¶7 @
=>
¶¶A C
_board
¶¶D J
.
¶¶J K
ContainsKey
¶¶K V
(
¶¶V W
	direction
¶¶W `
)
¶¶` a
)
¶¶a b
)
¶¶b c
{
·· 
Point
¸¸ 
currentPosition
¸¸ %
=
¸¸& '!
MoveInSameDirection
¸¸( ;
(
¸¸; <
	direction
¸¸< E
,
¸¸E F
start
¸¸G L
)
¸¸L M
;
¸¸M N
Point
¹¹ 
nextPosition
¹¹ "
=
¹¹# $!
MoveInSameDirection
¹¹% 8
(
¹¹8 9
currentPosition
¹¹9 H
,
¹¹H I
	direction
¹¹J S
)
¹¹S T
;
¹¹T U
bool
ºº 
notFoundPiece
ºº "
=
ºº# $
false
ºº% *
;
ºº* +
while
»» 
(
»» 
!
»» 
notFoundPiece
»» %
)
»»% &
{
¼¼ 
if
½½ 
(
½½ 
_board
½½ 
.
½½ 
ContainsKey
½½ *
(
½½* +
currentPosition
½½+ :
)
½½: ;
)
½½; <
{
¾¾ 
Point
¿¿ %
currentPositionAuxiliar
¿¿ 5
=
¿¿6 7
nextPosition
¿¿8 D
;
¿¿D E
nextPosition
ÀÀ $
=
ÀÀ% &!
MoveInSameDirection
ÀÀ' :
(
ÀÀ: ;
currentPosition
ÀÀ; J
,
ÀÀJ K
nextPosition
ÀÀL X
)
ÀÀX Y
;
ÀÀY Z
currentPosition
ÁÁ '
=
ÁÁ( )%
currentPositionAuxiliar
ÁÁ* A
;
ÁÁA B
}
ÂÂ 
else
ÃÃ 
if
ÃÃ 
(
ÃÃ 
!
ÃÃ 
_board
ÃÃ $
.
ÃÃ$ %
ContainsKey
ÃÃ% 0
(
ÃÃ0 1
currentPosition
ÃÃ1 @
)
ÃÃ@ A
&&
ÃÃB D
IsConnectedToHive
ÃÃE V
(
ÃÃV W
currentPosition
ÃÃW f
)
ÃÃf g
)
ÃÃg h
{
ÄÄ 

validMoves
ÅÅ "
.
ÅÅ" #
Add
ÅÅ# &
(
ÅÅ& '
currentPosition
ÅÅ' 6
)
ÅÅ6 7
;
ÅÅ7 8
notFoundPiece
ÆÆ %
=
ÆÆ& '
true
ÆÆ( ,
;
ÆÆ, -
}
ÇÇ 
}
ÈÈ 
}
ÉÉ 
return
ËË 

validMoves
ËË 
;
ËË 
}
ÌÌ 	
private
ÎÎ 
Point
ÎÎ !
MoveInSameDirection
ÎÎ )
(
ÎÎ) *
Point
ÎÎ* /
current
ÎÎ0 7
,
ÎÎ7 8
Point
ÎÎ9 >
start
ÎÎ? D
)
ÎÎD E
{
ÏÏ 	
Point
ÐÐ 
pointToMove
ÐÐ 
=
ÐÐ 
new
ÐÐ  #
Point
ÐÐ$ )
(
ÐÐ) *
$num
ÐÐ* +
,
ÐÐ+ ,
$num
ÐÐ- .
)
ÐÐ. /
;
ÐÐ/ 0
double
ÑÑ 
dq
ÑÑ 
=
ÑÑ 
current
ÑÑ 
.
ÑÑ  
X
ÑÑ  !
-
ÑÑ" #
start
ÑÑ$ )
.
ÑÑ) *
X
ÑÑ* +
;
ÑÑ+ ,
double
ÒÒ 
dr
ÒÒ 
=
ÒÒ 
current
ÒÒ 
.
ÒÒ  
Y
ÒÒ  !
-
ÒÒ" #
start
ÒÒ$ )
.
ÒÒ) *
Y
ÒÒ* +
;
ÒÒ+ ,
double
ÓÓ 
epsilon
ÓÓ 
=
ÓÓ 
$num
ÓÓ #
;
ÓÓ# $
if
ÔÔ 
(
ÔÔ 
Math
ÔÔ 
.
ÔÔ 
Abs
ÔÔ 
(
ÔÔ 
start
ÔÔ 
.
ÔÔ 
X
ÔÔ  
%
ÔÔ! "
$num
ÔÔ# $
-
ÔÔ% &
$num
ÔÔ' (
)
ÔÔ( )
<
ÔÔ* +
epsilon
ÔÔ, 3
)
ÔÔ3 4
{
ÕÕ 
int
ÖÖ 
index
ÖÖ 
=
ÖÖ !
_hexPairDirecctions
ÖÖ /
.
ÖÖ/ 0
	FindIndex
ÖÖ0 9
(
ÖÖ9 :
dir
ÖÖ: =
=>
ÖÖ> @
dir
ÖÖA D
.
ÖÖD E
dirUp
ÖÖE J
==
ÖÖK M
dq
ÖÖN P
&&
ÖÖQ S
dir
ÖÖT W
.
ÖÖW X
dirDown
ÖÖX _
==
ÖÖ` b
dr
ÖÖc e
)
ÖÖe f
;
ÖÖf g
if
×× 
(
×× 
index
×× 
!=
×× 
-
×× 
$num
×× 
)
××  
{
ØØ 
(
ÙÙ 
double
ÙÙ 
dirU
ÙÙ  
,
ÙÙ  !
double
ÙÙ" (
dirD
ÙÙ) -
)
ÙÙ- .
=
ÙÙ/ 0 
_hexOddDirecctions
ÙÙ1 C
[
ÙÙC D
index
ÙÙD I
]
ÙÙI J
;
ÙÙJ K
pointToMove
ÚÚ 
=
ÚÚ  !
new
ÚÚ" %
Point
ÚÚ& +
(
ÚÚ+ ,
current
ÚÚ, 3
.
ÚÚ3 4
X
ÚÚ4 5
+
ÚÚ6 7
dirU
ÚÚ8 <
,
ÚÚ< =
current
ÚÚ> E
.
ÚÚE F
Y
ÚÚF G
+
ÚÚH I
dirD
ÚÚJ N
)
ÚÚN O
;
ÚÚO P
}
ÛÛ 
}
ÜÜ 
else
ÝÝ 
{
ÞÞ 
int
ßß 
index
ßß 
=
ßß  
_hexOddDirecctions
ßß .
.
ßß. /
	FindIndex
ßß/ 8
(
ßß8 9
dir
ßß9 <
=>
ßß= ?
dir
ßß@ C
.
ßßC D
dirUp
ßßD I
==
ßßJ L
dq
ßßM O
&&
ßßP R
dir
ßßS V
.
ßßV W
dirDown
ßßW ^
==
ßß_ a
dr
ßßb d
)
ßßd e
;
ßße f
if
àà 
(
àà 
index
àà 
!=
àà 
-
àà 
$num
àà 
)
àà  
{
áá 
(
ââ 
double
ââ 
dirU
ââ  
,
ââ  !
double
ââ" (
dirD
ââ) -
)
ââ- .
=
ââ/ 0!
_hexPairDirecctions
ââ1 D
[
ââD E
index
ââE J
]
ââJ K
;
ââK L
pointToMove
ãã 
=
ãã  !
new
ãã" %
Point
ãã& +
(
ãã+ ,
current
ãã, 3
.
ãã3 4
X
ãã4 5
+
ãã6 7
dirU
ãã8 <
,
ãã< =
current
ãã> E
.
ããE F
Y
ããF G
+
ããH I
dirD
ããJ N
)
ããN O
;
ããO P
}
ää 
}
åå 
return
ææ 
pointToMove
ææ 
;
ææ 
}
çç 	
private
éé 
string
éé '
GetIfItsFinalMatchResults
éé 0
(
éé0 1
)
éé1 2
{
êê 	
string
ëë 
winnerResult
ëë 
=
ëë  !
$str
ëë" *
;
ëë* +
	GamePiece
ìì 
queenPlayerOne
ìì $
=
ìì% &"
ObtainQueenOfPlayers
ìì' ;
(
ìì; <
_usernamePlayer1
ìì< L
)
ììL M
;
ììM N
	GamePiece
íí 
queenPlayerTwo
íí $
=
íí% &"
ObtainQueenOfPlayers
íí' ;
(
íí; <
_usernamePlayer2
íí< L
)
ííL M
;
ííM N
if
îî 
(
îî 
queenPlayerOne
îî 
==
îî !
null
îî" &
)
îî& '
{
ïï 
queenPlayerOne
ðð 
=
ðð  3
%ObtainQueenOfPlayersCapturedByABeetle
ðð! F
(
ððF G
_usernamePlayer1
ððG W
)
ððW X
;
ððX Y
}
ññ 
if
òò 
(
òò 
queenPlayerTwo
òò 
==
òò !
null
òò" &
)
òò& '
{
óó 
queenPlayerTwo
ôô 
=
ôô  3
%ObtainQueenOfPlayersCapturedByABeetle
ôô! F
(
ôôF G
_usernamePlayer2
ôôG W
)
ôôW X
;
ôôX Y
}
õõ 
if
öö 
(
öö 
queenPlayerOne
öö 
!=
öö !
null
öö" &
&&
öö' )
queenPlayerTwo
öö* 8
!=
öö9 ;
null
öö< @
)
öö@ A
{
÷÷ 
if
øø 
(
øø 
IsSourrounded
øø !
(
øø! "
queenPlayerOne
øø" 0
.
øø0 1
Position
øø1 9
)
øø9 :
&&
øø; =
IsSourrounded
øø> K
(
øøK L
queenPlayerTwo
øøL Z
.
øøZ [
Position
øø[ c
)
øøc d
)
øød e
{
ùù 
winnerResult
úú  
=
úú! "
$str
úú# )
;
úú) *
}
ûû 
else
üü 
if
üü 
(
üü 
IsSourrounded
üü &
(
üü& '
queenPlayerOne
üü' 5
.
üü5 6
Position
üü6 >
)
üü> ?
)
üü? @
{
ýý 
winnerResult
þþ  
=
þþ! "
_usernamePlayer2
þþ# 3
;
þþ3 4
}
ÿÿ 
else
 
if
 
(
 
IsSourrounded
 &
(
& '
queenPlayerTwo
' 5
.
5 6
Position
6 >
)
> ?
)
? @
{
 
winnerResult
  
=
! "
_usernamePlayer1
# 3
;
3 4
}
 
}
 
return
 
winnerResult
 
;
  
}
 	
private
 
bool
 
IsSourrounded
 "
(
" #
Point
# (
positionPiece
) 6
)
6 7
{
 	
List
 
<
 
Point
 
>
 
adjacentPoints
 &
=
' ("
ObtainAdjacentPoints
) =
(
= >
positionPiece
> K
)
K L
;
L M
int
 +
numberOfColliderPointsExisted
 -
=
. /
adjacentPoints
0 >
.
> ?
Count
? D
(
D E
point
E J
=>
K M
_board
N T
.
T U
ContainsKey
U `
(
` a
point
a f
)
f g
)
g h
;
h i
return
 +
numberOfColliderPointsExisted
 0
==
1 3
$num
4 5
;
5 6
}
 	
private
 
	GamePiece
 "
ObtainQueenOfPlayers
 .
(
. /
string
/ 5
usernameOfPlayer
6 F
)
F G
{
 	
return
 
_board
 
.
 
Values
  
.
  !
FirstOrDefault
! /
(
/ 0
piece
0 5
=>
6 8
piece
9 >
.
> ?

PlayerName
? I
==
J L
usernameOfPlayer
M ]
&&
^ `
piece
a f
.
f g
PieceNumber
g r
==
s u
$num
v w
)
w x
;
x y
}
 	
private
 
	GamePiece
 3
%ObtainQueenOfPlayersCapturedByABeetle
 ?
(
? @
string
@ F
usernameOfPlayer
G W
)
W X
{
 	
return
 (
_piecesCapturedByTheBeetle
 -
.
- .
Values
. 4
.
4 5
Select
5 ;
(
; <
image
< A
=>
B D
image
E J
.
J K
Tag
K N
as
O Q
	GamePiece
R [
)
[ \
.
\ ]
FirstOrDefault
] k
(
k l
	gamePiece
l u
=>
v x
	gamePiecey 
!= 
null 
&& 
	gamePiece 
. 
PieceNumber £
==¤ ¦
$num§ ¨
&&© «
	gamePiece¬ µ
.µ ¶

PlayerName¶ À
==Á Ã 
usernameOfPlayerÄ Ô
)Ô Õ
;Õ Ö
}
 	
private
 
void
 .
 PlacePieceThatIsInGame_MouseDown
 5
(
5 6
object
6 <
sender
= C
,
C D"
MouseButtonEventArgs
E Y
e
Z [
)
[ \
{
 	
if
 
(
 
_selectedPiece
 
!=
 !
null
" &
&&
' )
sender
* 0
is
1 3
Polygon
4 ;
cell
< @
&&
A C
cell
D H
!=
I K
null
L P
)
P Q
{
 
Point
 
oldPosition
 !
=
" #
_selectedPiece
$ 2
.
2 3
Position
3 ;
;
; <
Image
 
imageOfPiece
 "
=
# $!
ObtainImageCreation
% 8
(
8 9
cell
9 =
,
= >
_selectedPiece
? M
)
M N
;
N O
_selectedPiece
 
.
 
Position
 '
=
( )
(
* +
Point
+ 0
)
0 1
cell
1 5
.
5 6
Tag
6 9
;
9 :
_selectedPiece
   
.
   
Piece
   $
.
  $ %
Position
  % -
=
  . /
oldPosition
  0 ;
;
  ; <
if
¡¡ 
(
¡¡ (
_piecesCapturedByTheBeetle
¡¡ .
.
¡¡. /
ContainsKey
¡¡/ :
(
¡¡: ;
(
¡¡; <
_selectedPiece
¡¡< J
.
¡¡J K
PieceNumber
¡¡K V
,
¡¡V W
_selectedPiece
¡¡X f
.
¡¡f g

PlayerName
¡¡g q
)
¡¡q r
)
¡¡r s
)
¡¡s t
{
¢¢ 
Image
££ '
pieceContainedByTheBeetle
££ 3
=
££4 5(
_piecesCapturedByTheBeetle
££6 P
[
££P Q
(
££Q R
_selectedPiece
££R `
.
££` a
PieceNumber
££a l
,
££l m
_selectedPiece
££n |
.
££| }

PlayerName££} 
)££ 
]££ 
;££ -
UpdateOldAndNewPlaceInGameBoard
¤¤ 3
(
¤¤3 4
imageOfPiece
¤¤4 @
,
¤¤@ A
oldPosition
¤¤B M
)
¤¤M N
;
¤¤N O>
0ReturnOriginalPositionOfPieceCapturedByTheBeetle
¥¥ D
(
¥¥D E'
pieceContainedByTheBeetle
¥¥E ^
,
¥¥^ _
_selectedPiece
¥¥` n
)
¥¥n o
;
¥¥o p
}
¦¦ 
else
§§ 
{
¨¨ -
UpdateOldAndNewPlaceInGameBoard
©© 3
(
©©3 4
imageOfPiece
©©4 @
,
©©@ A
oldPosition
©©B M
)
©©M N
;
©©N O
}
ªª /
!EliminateDuplicatedImagesIfExists
«« 1
(
««1 2
oldPosition
««2 =
)
««= >
;
««> ?'
SendPiecePositionToServer
¬¬ )
(
¬¬) *
_selectedPiece
¬¬* 8
)
¬¬8 9
;
¬¬9 :
_winnerName
­­ 
=
­­ '
GetIfItsFinalMatchResults
­­ 7
(
­­7 8
)
­­8 9
;
­­9 :
if
®® 
(
®® 
_winnerName
®® 
!=
®®  "
$str
®®# +
)
®®+ ,
{
¯¯ +
SendFinishOfMatchNotification
°° 1
(
°°1 2
_winnerName
°°2 =
)
°°= >
;
°°> ?
}
±± 
_lastPlacedCell
²² 
=
²²  !
cell
²²" &
;
²²& '
_selectedPiece
³³ 
=
³³  
null
³³! %
;
³³% &
ResetHighlights
´´ 
(
´´  
)
´´  !
;
´´! "
}
µµ 
_isBeetleMoved
¶¶ 
=
¶¶ 
false
¶¶ "
;
¶¶" #
e
·· 
.
·· 
Handled
·· 
=
·· 
true
·· 
;
·· 
}
¸¸ 	
private
ºº 
void
ºº +
SendFinishOfMatchNotification
ºº 2
(
ºº2 3
string
ºº3 9
result
ºº: @
)
ºº@ A
{
»» 	
LoggerManager
¼¼ 
logger
¼¼  
=
¼¼! "
new
¼¼# &
LoggerManager
¼¼' 4
(
¼¼4 5
this
¼¼5 9
.
¼¼9 :
GetType
¼¼: A
(
¼¼A B
)
¼¼B C
)
¼¼C D
;
¼¼D E
try
½½ 
{
¾¾  
_gameManagerClient
¿¿ "
.
¿¿" #
FinishOfTheMatch
¿¿# 3
(
¿¿3 4
MatchSingleton
¿¿4 B
.
¿¿B C
	codeMatch
¿¿C L
,
¿¿L M
result
¿¿N T
)
¿¿T U
;
¿¿U V
}
ÀÀ 
catch
ÁÁ 
(
ÁÁ '
EndpointNotFoundException
ÁÁ ,
endPointException
ÁÁ- >
)
ÁÁ> ?
{
ÂÂ 
logger
ÃÃ 
.
ÃÃ 
LogFatal
ÃÃ 
(
ÃÃ  
endPointException
ÃÃ  1
)
ÃÃ1 2
;
ÃÃ2 3
DialogManager
ÄÄ 
.
ÄÄ #
ShowErrorMessageAlert
ÄÄ 3
(
ÄÄ3 4

Properties
ÄÄ4 >
.
ÄÄ> ?
	Resources
ÄÄ? H
.
ÄÄH I%
dialogEndPointException
ÄÄI `
)
ÄÄ` a
;
ÄÄa b
}
ÅÅ 
catch
ÆÆ 
(
ÆÆ 
TimeoutException
ÆÆ #
timeOutException
ÆÆ$ 4
)
ÆÆ4 5
{
ÇÇ 
logger
ÈÈ 
.
ÈÈ 
LogWarn
ÈÈ 
(
ÈÈ 
timeOutException
ÈÈ /
)
ÈÈ/ 0
;
ÈÈ0 1
DialogManager
ÉÉ 
.
ÉÉ #
ShowErrorMessageAlert
ÉÉ 3
(
ÉÉ3 4

Properties
ÉÉ4 >
.
ÉÉ> ?
	Resources
ÉÉ? H
.
ÉÉH I$
dialogTimeOutException
ÉÉI _
)
ÉÉ_ `
;
ÉÉ` a
}
ÊÊ 
catch
ËË 
(
ËË $
CommunicationException
ËË )$
communicationException
ËË* @
)
ËË@ A
{
ÌÌ 
logger
ÍÍ 
.
ÍÍ 
LogFatal
ÍÍ 
(
ÍÍ  $
communicationException
ÍÍ  6
)
ÍÍ6 7
;
ÍÍ7 8
DialogManager
ÎÎ 
.
ÎÎ #
ShowErrorMessageAlert
ÎÎ 3
(
ÎÎ3 4

Properties
ÎÎ4 >
.
ÎÎ> ?
	Resources
ÎÎ? H
.
ÎÎH I)
dialogComunicationException
ÎÎI d
)
ÎÎd e
;
ÎÎe f
}
ÏÏ 
}
ÐÐ 	
private
ÒÒ 
void
ÒÒ /
!EliminateDuplicatedImagesIfExists
ÒÒ 6
(
ÒÒ6 7
Point
ÒÒ7 <
oldPosition
ÒÒ= H
)
ÒÒH I
{
ÓÓ 	
if
ÔÔ 
(
ÔÔ 
!
ÔÔ 
_board
ÔÔ 
.
ÔÔ 
ContainsKey
ÔÔ #
(
ÔÔ# $
oldPosition
ÔÔ$ /
)
ÔÔ/ 0
)
ÔÔ0 1
{
ÕÕ 
var
ÖÖ 
imagesToRemove
ÖÖ "
=
ÖÖ# $!
canva_GameBoardGrid
ÖÖ% 8
.
ÖÖ8 9
Children
ÖÖ9 A
.
×× 
OfType
×× 
<
×× 
Image
×× !
>
××! "
(
××" #
)
××# $
.
ØØ 
Where
ØØ 
(
ØØ 
image
ØØ  
=>
ØØ! #
image
ÙÙ 
.
ÙÙ 
Tag
ÙÙ !
is
ÙÙ" $
	GamePiece
ÙÙ% .
piece
ÙÙ/ 4
&&
ÙÙ5 7
piece
ÙÙ8 =
.
ÙÙ= >
Position
ÙÙ> F
==
ÙÙG I
oldPosition
ÙÙJ U
)
ÙÙU V
.
ÚÚ 
ToList
ÚÚ 
(
ÚÚ 
)
ÚÚ 
;
ÚÚ 
for
ÛÛ 
(
ÛÛ 
int
ÛÛ 
indexOfImage
ÛÛ %
=
ÛÛ& '
$num
ÛÛ( )
;
ÛÛ) *
indexOfImage
ÛÛ+ 7
<
ÛÛ8 9
imagesToRemove
ÛÛ: H
.
ÛÛH I
Count
ÛÛI N
;
ÛÛN O
indexOfImage
ÛÛP \
++
ÛÛ\ ^
)
ÛÛ^ _
{
ÜÜ 
Image
ÝÝ 
imageToQuit
ÝÝ %
=
ÝÝ& '
imagesToRemove
ÝÝ( 6
[
ÝÝ6 7
indexOfImage
ÝÝ7 C
]
ÝÝC D
;
ÝÝD E
List
ÞÞ 
<
ÞÞ 
	UIElement
ÞÞ "
>
ÞÞ" #
childrenGrids
ÞÞ$ 1
=
ÞÞ2 3!
canva_GameBoardGrid
ÞÞ4 G
.
ÞÞG H
Children
ÞÞH P
.
ÞÞP Q
OfType
ÞÞQ W
<
ÞÞW X
	UIElement
ÞÞX a
>
ÞÞa b
(
ÞÞb c
)
ÞÞc d
.
ÞÞd e
ToList
ÞÞe k
(
ÞÞk l
)
ÞÞl m
;
ÞÞm n
int
ßß 
indexToRemove
ßß %
=
ßß& '
childrenGrids
ßß( 5
.
ßß5 6
IndexOf
ßß6 =
(
ßß= >
imageToQuit
ßß> I
)
ßßI J
;
ßßJ K
if
àà 
(
àà 
indexToRemove
àà %
!=
àà& (
-
àà) *
$num
àà* +
)
àà+ ,
{
áá !
canva_GameBoardGrid
ââ +
.
ââ+ ,
Children
ââ, 4
.
ââ4 5
RemoveAt
ââ5 =
(
ââ= >
indexToRemove
ââ> K
)
ââK L
;
ââL M
}
ãã 
}
ää 
}
åå 
}
ææ 	
private
èè 
Image
èè !
ObtainImageCreation
èè )
(
èè) *
Polygon
èè* 1
cell
èè2 6
,
èè6 7
	GamePiece
èè8 A
piece
èèB G
)
èèG H
{
éé 	
Image
êê 

pieceImage
êê 
=
êê 
new
êê "
Image
êê# (
{
ëë 
Source
ìì 
=
ìì 
new
ìì 
BitmapImage
ìì (
(
ìì( )
new
ìì) ,
Uri
ìì- 0
(
ìì0 1
piece
ìì1 6
.
ìì6 7
	ImagePath
ìì7 @
,
ìì@ A
UriKind
ììB I
.
ììI J
Relative
ììJ R
)
ììR S
)
ììS T
,
ììT U
Width
íí 
=
íí 
$num
íí 
,
íí 
Height
îî 
=
îî 
$num
îî 
,
îî 
Tag
ïï 
=
ïï 
piece
ïï 
,
ïï 
}
ðð 
;
ðð 
double
ññ 
hexX
ññ 
=
ññ 
Canvas
ññ  
.
ññ  !
GetLeft
ññ! (
(
ññ( )
cell
ññ) -
)
ññ- .
;
ññ. /
double
òò 
hexY
òò 
=
òò 
Canvas
òò  
.
òò  !
GetTop
òò! '
(
òò' (
cell
òò( ,
)
òò, -
;
òò- .
double
óó 
pieceX
óó 
=
óó 
hexX
óó  
+
óó! "
(
óó# $
cell
óó$ (
.
óó( )
ActualWidth
óó) 4
-
óó5 6

pieceImage
óó7 A
.
óóA B
Width
óóB G
)
óóG H
/
óóI J
$num
óóK L
;
óóL M
double
ôô 
pieceY
ôô 
=
ôô 
hexY
ôô  
+
ôô! "
(
ôô# $
cell
ôô$ (
.
ôô( )
ActualHeight
ôô) 5
-
ôô6 7

pieceImage
ôô8 B
.
ôôB C
Height
ôôC I
)
ôôI J
/
ôôK L
$num
ôôM N
;
ôôN O
Canvas
õõ 
.
õõ 
SetLeft
õõ 
(
õõ 

pieceImage
õõ %
,
õõ% &
pieceX
õõ' -
)
õõ- .
;
õõ. /
Canvas
öö 
.
öö 
SetTop
öö 
(
öö 

pieceImage
öö $
,
öö$ %
pieceY
öö& ,
)
öö, -
;
öö- .
return
÷÷ 

pieceImage
÷÷ 
;
÷÷ 
}
øø 	
private
úú 
void
úú >
0ReturnOriginalPositionOfPieceCapturedByTheBeetle
úú E
(
úúE F
Image
úúF K&
pieceCapturedByTheBeetle
úúL d
,
úúd e
	GamePiece
úúf o
beetlePiece
úúp {
)
úú{ |
{
ûû 	
	GamePiece
üü 
pieceToReturn
üü #
=
üü$ %&
pieceCapturedByTheBeetle
üü& >
.
üü> ?
Tag
üü? B
as
üüC E
	GamePiece
üüF O
;
üüO P
if
ýý 
(
ýý !
canva_GameBoardGrid
ýý #
.
ýý# $
Children
ýý$ ,
.
ýý, -
Contains
ýý- 5
(
ýý5 6&
pieceCapturedByTheBeetle
ýý6 N
)
ýýN O
)
ýýO P
{
þþ 
List
ÿÿ 
<
ÿÿ 
	UIElement
ÿÿ 
>
ÿÿ 
childrenGrids
ÿÿ  -
=
ÿÿ. /!
canva_GameBoardGrid
ÿÿ0 C
.
ÿÿC D
Children
ÿÿD L
.
ÿÿL M
OfType
ÿÿM S
<
ÿÿS T
	UIElement
ÿÿT ]
>
ÿÿ] ^
(
ÿÿ^ _
)
ÿÿ_ `
.
ÿÿ` a
ToList
ÿÿa g
(
ÿÿg h
)
ÿÿh i
;
ÿÿi j
int
 
indexToRemove
 !
=
" #
childrenGrids
$ 1
.
1 2
IndexOf
2 9
(
9 :&
pieceCapturedByTheBeetle
: R
)
R S
;
S T!
canva_GameBoardGrid
 #
.
# $
Children
$ ,
.
, -
RemoveAt
- 5
(
5 6
indexToRemove
6 C
)
C D
;
D E
}
 !
canva_GameBoardGrid
 
.
  
Children
  (
.
( )
Add
) ,
(
, -&
pieceCapturedByTheBeetle
- E
)
E F
;
F G(
_piecesCapturedByTheBeetle
 &
.
& '
Remove
' -
(
- .
(
. /
beetlePiece
/ :
.
: ;
PieceNumber
; F
,
F G
beetlePiece
H S
.
S T

PlayerName
T ^
)
^ _
)
_ `
;
` a
if
 
(
 
_board
 
.
 
ContainsKey
 "
(
" #
pieceToReturn
# 0
.
0 1
Position
1 9
)
9 :
)
: ;
{
 
_board
 
.
 
Remove
 
(
 
pieceToReturn
 +
.
+ ,
Position
, 4
)
4 5
;
5 6
}
 
_board
 
.
 
Add
 
(
 
pieceToReturn
 $
.
$ %
Position
% -
,
- .
pieceToReturn
/ <
)
< =
;
= >
}
 	
private
 
void
 #
PieceSelectedByBeetle
 *
(
* +
Image
+ 0

imagePiece
1 ;
,
; <
	GamePiece
= F
beetlePiece
G R
)
R S
{
 	
	GamePiece
 
pieceToKeepSafe
 %
=
& '

imagePiece
( 2
.
2 3
Tag
3 6
as
7 9
	GamePiece
: C
;
C D
List
 
<
 
Image
 
>
 
imagesOfPieces
 &
=
' (!
canva_GameBoardGrid
) <
.
< =
Children
= E
.
E F
OfType
F L
<
L M
Image
M R
>
R S
(
S T
)
T U
.
U V
ToList
V \
(
\ ]
)
] ^
;
^ _
Image
  
imageWhereBeetleIs
 $
=
% &
new
' *
Image
+ 0
(
0 1
)
1 2
;
2 3
foreach
 
(
 
var
 
imageOnBeetle
 &
in
' )
imagesOfPieces
* 8
)
8 9
{
 
	GamePiece
 
piece
 
=
  !
imageOnBeetle
" /
.
/ 0
Tag
0 3
as
4 6
	GamePiece
7 @
;
@ A
if
 
(
 
piece
 
.
 
PieceNumber
 %
==
& (
beetlePiece
) 4
.
4 5
PieceNumber
5 @
&&
A C
piece
D I
.
I J

PlayerName
J T
==
U W
beetlePiece
X c
.
c d

PlayerName
d n
)
n o
{
  
imageWhereBeetleIs
 &
=
' (
imageOnBeetle
) 6
;
6 7
break
 
;
 
}
 
}
 
if
 
(
 (
_piecesCapturedByTheBeetle
 *
.
* +
ContainsKey
+ 6
(
6 7
(
7 8
beetlePiece
8 C
.
C D
PieceNumber
D O
,
O P
beetlePiece
Q \
.
\ ]

PlayerName
] g
)
g h
)
h i
)
i j
{
 5
'RestoreOriginalPieceCapturedByTheBeetle
 7
(
7 8 
imageWhereBeetleIs
8 J
,
J K
beetlePiece
L W
)
W X
;
X Y
}
 
else
 
{
 '
PieceToReplaceByTheBeetle
   )
(
  ) *
beetlePiece
  * 5
,
  5 6
pieceToKeepSafe
  7 F
,
  F G 
imageWhereBeetleIs
  H Z
)
  Z [
;
  [ \
}
¡¡ (
_piecesCapturedByTheBeetle
¢¢ &
.
¢¢& '
Add
¢¢' *
(
¢¢* +
(
¢¢+ ,
beetlePiece
¢¢, 7
.
¢¢7 8
PieceNumber
¢¢8 C
,
¢¢C D
beetlePiece
¢¢E P
.
¢¢P Q

PlayerName
¢¢Q [
)
¢¢[ \
,
¢¢\ ]

imagePiece
¢¢^ h
)
¢¢h i
;
¢¢i j
Point
££ 
oldPosition
££ 
=
££ 
beetlePiece
££  +
.
££+ ,
Position
££, 4
;
££4 5
Polygon
¤¤ 
cell
¤¤ 
=
¤¤ 
_cellDictionary
¤¤ *
[
¤¤* +
pieceToKeepSafe
¤¤+ :
.
¤¤: ;
Position
¤¤; C
]
¤¤C D
;
¤¤D E
beetlePiece
¥¥ 
.
¥¥ 
Position
¥¥  
=
¥¥! "
pieceToKeepSafe
¥¥# 2
.
¥¥2 3
Position
¥¥3 ;
;
¥¥; <
beetlePiece
¦¦ 
.
¦¦ 
Piece
¦¦ 
.
¦¦ 
Position
¦¦ &
=
¦¦' (
oldPosition
¦¦) 4
;
¦¦4 5)
UpdateGameboardGridByBeetle
§§ '
(
§§' (
cell
§§( ,
,
§§, -
beetlePiece
§§. 9
)
§§9 :
;
§§: ;
_isBeetleMoved
¨¨ 
=
¨¨ 
false
¨¨ "
;
¨¨" #
}
©© 	
private
«« 
void
«« '
PieceToReplaceByTheBeetle
«« .
(
««. /
	GamePiece
««/ 8
beetlePiece
««9 D
,
««D E
	GamePiece
««F O
pieceToKeepSafe
««P _
,
««_ `
Image
««a f 
imageWhereBeetleIs
««g y
)
««y z
{
¬¬ 	
List
­­ 
<
­­ 
	UIElement
­­ 
>
­­ 
childrenGrids
­­ )
=
­­* +!
canva_GameBoardGrid
­­, ?
.
­­? @
Children
­­@ H
.
­­H I
OfType
­­I O
<
­­O P
	UIElement
­­P Y
>
­­Y Z
(
­­Z [
)
­­[ \
.
­­\ ]
ToList
­­] c
(
­­c d
)
­­d e
;
­­e f
int
®® 
indexToRemove
®® 
=
®® 
childrenGrids
®®  -
.
®®- .
IndexOf
®®. 5
(
®®5 6 
imageWhereBeetleIs
®®6 H
)
®®H I
;
®®I J
if
¯¯ 
(
¯¯ 
indexToRemove
¯¯ 
!=
¯¯  
-
¯¯! "
$num
¯¯" #
)
¯¯# $
{
°° !
canva_GameBoardGrid
±± #
.
±±# $
Children
±±$ ,
.
±±, -
RemoveAt
±±- 5
(
±±5 6
indexToRemove
±±6 C
)
±±C D
;
±±D E
}
²² 
_board
³³ 
.
³³ 
Remove
³³ 
(
³³ 
pieceToKeepSafe
³³ )
.
³³) *
Position
³³* 2
)
³³2 3
;
³³3 4
if
´´ 
(
´´ 
_board
´´ 
.
´´ 
ContainsKey
´´ "
(
´´" #
beetlePiece
´´# .
.
´´. /
Position
´´/ 7
)
´´7 8
&&
´´9 ;
_board
´´< B
[
´´B C
beetlePiece
´´C N
.
´´N O
Position
´´O W
]
´´W X
==
´´Y [
beetlePiece
´´\ g
)
´´g h
{
µµ 
_board
¶¶ 
.
¶¶ 
Remove
¶¶ 
(
¶¶ 
beetlePiece
¶¶ )
.
¶¶) *
Position
¶¶* 2
)
¶¶2 3
;
¶¶3 4
}
·· 
}
¸¸ 	
private
ºº 
void
ºº 5
'RestoreOriginalPieceCapturedByTheBeetle
ºº <
(
ºº< =
Image
ºº= B 
imageWhereBeetleIs
ººC U
,
ººU V
	GamePiece
ººW `
beetlePiece
ººa l
)
ººl m
{
»» 	
Image
¼¼  
originalPieceImage
¼¼ $
=
¼¼% &(
_piecesCapturedByTheBeetle
¼¼' A
[
¼¼A B
(
¼¼B C
beetlePiece
¼¼C N
.
¼¼N O
PieceNumber
¼¼O Z
,
¼¼Z [
beetlePiece
¼¼\ g
.
¼¼g h

PlayerName
¼¼h r
)
¼¼r s
]
¼¼s t
;
¼¼t u
	GamePiece
½½ 
originalPiece
½½ #
=
½½$ % 
originalPieceImage
½½& 8
.
½½8 9
Tag
½½9 <
as
½½= ?
	GamePiece
½½@ I
;
½½I J
_board
¾¾ 
.
¾¾ 
Remove
¾¾ 
(
¾¾ 
originalPiece
¾¾ '
.
¾¾' (
Position
¾¾( 0
)
¾¾0 1
;
¾¾1 2
_board
¿¿ 
.
¿¿ 
Add
¿¿ 
(
¿¿ 
originalPiece
¿¿ $
.
¿¿$ %
Position
¿¿% -
,
¿¿- .
originalPiece
¿¿/ <
)
¿¿< =
;
¿¿= >
if
ÀÀ 
(
ÀÀ !
canva_GameBoardGrid
ÀÀ #
.
ÀÀ# $
Children
ÀÀ$ ,
.
ÀÀ, -
Contains
ÀÀ- 5
(
ÀÀ5 6 
imageWhereBeetleIs
ÀÀ6 H
)
ÀÀH I
)
ÀÀI J
{
ÁÁ 
List
ÂÂ 
<
ÂÂ 
	UIElement
ÂÂ 
>
ÂÂ 
childrenGrid
ÂÂ  ,
=
ÂÂ- .!
canva_GameBoardGrid
ÂÂ/ B
.
ÂÂB C
Children
ÂÂC K
.
ÂÂK L
OfType
ÂÂL R
<
ÂÂR S
	UIElement
ÂÂS \
>
ÂÂ\ ]
(
ÂÂ] ^
)
ÂÂ^ _
.
ÂÂ_ `
ToList
ÂÂ` f
(
ÂÂf g
)
ÂÂg h
;
ÂÂh i
int
ÃÃ !
indexToRemoveBeetle
ÃÃ '
=
ÃÃ( )
childrenGrid
ÃÃ* 6
.
ÃÃ6 7
IndexOf
ÃÃ7 >
(
ÃÃ> ? 
imageWhereBeetleIs
ÃÃ? Q
)
ÃÃQ R
;
ÃÃR S!
canva_GameBoardGrid
ÄÄ #
.
ÄÄ# $
Children
ÄÄ$ ,
.
ÄÄ, -
RemoveAt
ÄÄ- 5
(
ÄÄ5 6!
indexToRemoveBeetle
ÄÄ6 I
)
ÄÄI J
;
ÄÄJ K
}
ÅÅ 
if
ÆÆ 
(
ÆÆ !
canva_GameBoardGrid
ÆÆ #
.
ÆÆ# $
Children
ÆÆ$ ,
.
ÆÆ, -
Contains
ÆÆ- 5
(
ÆÆ5 6 
originalPieceImage
ÆÆ6 H
)
ÆÆH I
)
ÆÆI J
{
ÇÇ 
List
ÈÈ 
<
ÈÈ 
	UIElement
ÈÈ 
>
ÈÈ "
childrenGridNewPiece
ÈÈ  4
=
ÈÈ5 6!
canva_GameBoardGrid
ÈÈ7 J
.
ÈÈJ K
Children
ÈÈK S
.
ÈÈS T
OfType
ÈÈT Z
<
ÈÈZ [
	UIElement
ÈÈ[ d
>
ÈÈd e
(
ÈÈe f
)
ÈÈf g
.
ÈÈg h
ToList
ÈÈh n
(
ÈÈn o
)
ÈÈo p
;
ÈÈp q
int
ÉÉ #
indexToRemoveNewPiece
ÉÉ )
=
ÉÉ* +"
childrenGridNewPiece
ÉÉ, @
.
ÉÉ@ A
IndexOf
ÉÉA H
(
ÉÉH I 
originalPieceImage
ÉÉI [
)
ÉÉ[ \
;
ÉÉ\ ]!
canva_GameBoardGrid
ÊÊ #
.
ÊÊ# $
Children
ÊÊ$ ,
.
ÊÊ, -
RemoveAt
ÊÊ- 5
(
ÊÊ5 6#
indexToRemoveNewPiece
ÊÊ6 K
)
ÊÊK L
;
ÊÊL M
}
ËË !
canva_GameBoardGrid
ÌÌ 
.
ÌÌ  
Children
ÌÌ  (
.
ÌÌ( )
Add
ÌÌ) ,
(
ÌÌ, - 
originalPieceImage
ÌÌ- ?
)
ÌÌ? @
;
ÌÌ@ A(
_piecesCapturedByTheBeetle
ÍÍ &
.
ÍÍ& '
Remove
ÍÍ' -
(
ÍÍ- .
(
ÍÍ. /
beetlePiece
ÍÍ/ :
.
ÍÍ: ;
PieceNumber
ÍÍ; F
,
ÍÍF G
beetlePiece
ÍÍH S
.
ÍÍS T

PlayerName
ÍÍT ^
)
ÍÍ^ _
)
ÍÍ_ `
;
ÍÍ` a
}
ÎÎ 	
private
ÐÐ 
void
ÐÐ )
UpdateGameboardGridByBeetle
ÐÐ 0
(
ÐÐ0 1
Polygon
ÐÐ1 8
cell
ÐÐ9 =
,
ÐÐ= >
	GamePiece
ÐÐ? H
piece
ÐÐI N
)
ÐÐN O
{
ÑÑ 	
Image
ÒÒ 

pieceImage
ÒÒ 
=
ÒÒ !
ObtainImageCreation
ÒÒ 2
(
ÒÒ2 3
cell
ÒÒ3 7
,
ÒÒ7 8
piece
ÒÒ9 >
)
ÒÒ> ?
;
ÒÒ? @!
canva_GameBoardGrid
ÓÓ 
.
ÓÓ  
Children
ÓÓ  (
.
ÓÓ( )
Add
ÓÓ) ,
(
ÓÓ, -

pieceImage
ÓÓ- 7
)
ÓÓ7 8
;
ÓÓ8 9
_board
ÔÔ 
[
ÔÔ 
piece
ÔÔ 
.
ÔÔ 
Position
ÔÔ !
]
ÔÔ! "
=
ÔÔ# $
piece
ÔÔ% *
;
ÔÔ* +'
SendPiecePositionToServer
ÕÕ %
(
ÕÕ% &
piece
ÕÕ& +
)
ÕÕ+ ,
;
ÕÕ, -
_lastPlacedCell
ÖÖ 
=
ÖÖ 
cell
ÖÖ "
;
ÖÖ" #
_selectedPiece
×× 
=
×× 
null
×× !
;
××! "
ResetHighlights
ØØ 
(
ØØ 
)
ØØ 
;
ØØ 
}
ÙÙ 	
private
ÛÛ 
void
ÛÛ -
UpdateOldAndNewPlaceInGameBoard
ÛÛ 4
(
ÛÛ4 5
Image
ÛÛ5 :

pieceImage
ÛÛ; E
,
ÛÛE F
Point
ÛÛG L
oldPosition
ÛÛM X
)
ÛÛX Y
{
ÜÜ 	
if
ÝÝ 
(
ÝÝ 
_board
ÝÝ 
.
ÝÝ 
ContainsKey
ÝÝ "
(
ÝÝ" #
oldPosition
ÝÝ# .
)
ÝÝ. /
)
ÝÝ/ 0
{
ÞÞ 
_board
ßß 
.
ßß 
Remove
ßß 
(
ßß 
oldPosition
ßß )
)
ßß) *
;
ßß* +
}
àà 
var
áá #
imagesOnGameBoardGrid
áá %
=
áá& '!
canva_GameBoardGrid
áá( ;
.
áá; <
Children
áá< D
.
ááD E
OfType
ááE K
<
ááK L
Image
ááL Q
>
ááQ R
(
ááR S
)
ááS T
.
ááT U
ToList
ááU [
(
áá[ \
)
áá\ ]
;
áá] ^
	GamePiece
ââ 
pieceToMove
ââ !
=
ââ" #

pieceImage
ââ$ .
.
ââ. /
Tag
ââ/ 2
as
ââ3 5
	GamePiece
ââ6 ?
;
ââ? @
Image
ãã 
imageToRemove
ãã 
=
ãã  !
new
ãã" %
Image
ãã& +
(
ãã+ ,
)
ãã, -
;
ãã- .
foreach
ää 
(
ää 
var
ää 
imageOnGrid
ää $
in
ää% '#
imagesOnGameBoardGrid
ää( =
)
ää= >
{
åå 
	GamePiece
ææ 
piece
ææ 
=
ææ  !
imageOnGrid
ææ" -
.
ææ- .
Tag
ææ. 1
as
ææ2 4
	GamePiece
ææ5 >
;
ææ> ?
if
çç 
(
çç 
piece
çç 
.
çç 
Piece
çç 
.
çç  
Position
çç  (
==
çç) +
oldPosition
çç, 7
&&
çç8 :
piece
çç; @
.
çç@ A
PieceNumber
ççA L
==
ççM O
pieceToMove
ççP [
.
çç[ \
PieceNumber
çç\ g
&&
ççh j
piece
ççk p
.
ççp q

PlayerName
ççq {
==
çç| ~
pieceToMoveçç 
.çç 

PlayerNameçç 
)çç 
{
èè 
imageToRemove
éé !
=
éé" #
imageOnGrid
éé$ /
;
éé/ 0
break
êê 
;
êê 
}
ëë 
}
ìì 
List
íí 
<
íí 
	UIElement
íí 
>
íí 
childrenGrids
íí )
=
íí* +!
canva_GameBoardGrid
íí, ?
.
íí? @
Children
íí@ H
.
ííH I
OfType
ííI O
<
ííO P
	UIElement
ííP Y
>
ííY Z
(
ííZ [
)
íí[ \
.
íí\ ]
ToList
íí] c
(
ííc d
)
ííd e
;
ííe f
int
îî 
indexToRemove
îî 
=
îî 
childrenGrids
îî  -
.
îî- .
IndexOf
îî. 5
(
îî5 6
imageToRemove
îî6 C
)
îîC D
;
îîD E
if
ïï 
(
ïï 
indexToRemove
ïï 
!=
ïï 
-
ïï  !
$num
ïï! "
)
ïï" #
{
ïï$ %!
canva_GameBoardGrid
ðð #
.
ðð# $
Children
ðð$ ,
.
ðð, -
RemoveAt
ðð- 5
(
ðð5 6
indexToRemove
ðð6 C
)
ððC D
;
ððD E
}
ññ !
canva_GameBoardGrid
òò 
.
òò  
Children
òò  (
.
òò( )
Add
òò) ,
(
òò, -

pieceImage
òò- 7
)
òò7 8
;
òò8 9
	GamePiece
óó 

pieceToAdd
óó  
=
óó! "

pieceImage
óó# -
.
óó- .
Tag
óó. 1
as
óó2 4
	GamePiece
óó5 >
;
óó> ?
_board
ôô 
[
ôô 

pieceToAdd
ôô 
.
ôô 
Position
ôô &
]
ôô& '
=
ôô( )

pieceToAdd
ôô* 4
;
ôô4 5
}
õõ 	
private
÷÷ 
bool
÷÷ 1
#ValidateThatPieceCannotBreakTheHive
÷÷ 8
(
÷÷8 9
Point
÷÷9 >
positionPiece
÷÷? L
)
÷÷L M
{
øø 	
bool
ùù 
validationResult
ùù !
=
ùù" #
false
ùù$ )
;
ùù) *
	GamePiece
úú '
verifyIfPieceIsNotABeetle
úú /
=
úú0 1
_board
úú2 8
[
úú8 9
positionPiece
úú9 F
]
úúF G
;
úúG H
if
ûû 
(
ûû (
_piecesCapturedByTheBeetle
ûû *
.
ûû* +
ContainsKey
ûû+ 6
(
ûû6 7
(
ûû7 8'
verifyIfPieceIsNotABeetle
ûû8 Q
.
ûûQ R
PieceNumber
ûûR ]
,
ûû] ^'
verifyIfPieceIsNotABeetle
ûû_ x
.
ûûx y

PlayerNameûûy 
)ûû 
)ûû 
)ûû 
{
üü 
validationResult
ýý  
=
ýý! "
true
ýý# '
;
ýý' (
}
þþ 
else
ÿÿ 
{
 
if
 
(
 
positionPiece
 !
!=
" $
new
% (
Point
) .
(
. /
-
/ 0
$num
0 1
,
1 2
-
3 4
$num
4 5
)
5 6
)
6 7
{
 
var
 
piece
 
=
 
_board
  &
[
& '
positionPiece
' 4
]
4 5
;
5 6
_board
 
.
 
Remove
 !
(
! "
positionPiece
" /
)
/ 0
;
0 1
Point
 
start
 
=
  !
_board
" (
.
( )
Keys
) -
.
- .
FirstOrDefault
. <
(
< =
)
= >
;
> ?
HashSet
 
<
 
Point
 !
>
! "
visited
# *
=
+ ,
new
- 0
HashSet
1 8
<
8 9
Point
9 >
>
> ?
(
? @
)
@ A
;
A B"
CheckConnectedPieces
 (
(
( )
start
) .
,
. /
visited
0 7
)
7 8
;
8 9
if
 
(
 
visited
 
.
  
Count
  %
==
& (
_board
) /
.
/ 0
Count
0 5
)
5 6
{
 
validationResult
 (
=
) *
true
+ /
;
/ 0
}
 
else
 
{
 
validationResult
 (
=
) *
false
+ 0
;
0 1
}
 
_board
 
.
 
Add
 
(
 
positionPiece
 ,
,
, -
piece
. 3
)
3 4
;
4 5
}
 
}
 
return
 
validationResult
 #
;
# $
}
 	
private
 
void
 "
CheckConnectedPieces
 )
(
) *
Point
* /
start
0 5
,
5 6
HashSet
7 >
<
> ?
Point
? D
>
D E
visited
F M
)
M N
{
 	
Stack
 
<
 
Point
 
>
 
stack
 
=
  
new
! $
Stack
% *
<
* +
Point
+ 0
>
0 1
(
1 2
)
2 3
;
3 4
stack
 
.
 
Push
 
(
 
start
 
)
 
;
 
while
 
(
 
stack
 
.
 
Count
 
>
  
$num
! "
)
" #
{
 
Point
 
currentPoint
 "
=
# $
stack
% *
.
* +
Pop
+ .
(
. /
)
/ 0
;
0 1
if
 
(
 
!
 
visited
 
.
 
Contains
 %
(
% &
currentPoint
& 2
)
2 3
)
3 4
{
 
visited
 
.
 
Add
 
(
  
currentPoint
  ,
)
, -
;
- .
List
   
<
   
Point
   
>
   
adjacentPoints
    .
=
  / 0"
ObtainAdjacentPoints
  1 E
(
  E F
currentPoint
  F R
)
  R S
;
  S T
foreach
¡¡ 
(
¡¡ 
var
¡¡  
adjacentCollider
¡¡! 1
in
¡¡2 4
adjacentPoints
¡¡5 C
)
¡¡C D
{
¢¢ 
if
££ 
(
££ 
!
££ 
visited
££ $
.
££$ %
Contains
££% -
(
££- .
adjacentCollider
££. >
)
££> ?
&&
££@ B
_board
££C I
.
££I J
ContainsKey
££J U
(
££U V
adjacentCollider
££V f
)
££f g
)
££g h
{
¤¤ 
stack
¥¥ !
.
¥¥! "
Push
¥¥" &
(
¥¥& '
adjacentCollider
¥¥' 7
)
¥¥7 8
;
¥¥8 9
}
¦¦ 
}
§§ 
}
¨¨ 
}
©© 
}
ªª 	
private
¬¬ 
void
¬¬ 2
$HighlightStartingFirstTurnStaterCell
¬¬ 9
(
¬¬9 :
Point
¬¬: ?
position
¬¬@ H
)
¬¬H I
{
­­ 	
if
®® 
(
®® 
_cellDictionary
®® 
.
®®  
TryGetValue
®®  +
(
®®+ ,
position
®®, 4
,
®®4 5
out
®®6 9
Polygon
®®: A
cell
®®B F
)
®®F G
)
®®G H
{
¯¯ 
cell
°° 
.
°° 
Fill
°° 
=
°° 
Brushes
°° #
.
°°# $
Yellow
°°$ *
;
°°* +
_lastPlacedCell
±± 
=
±±  !
cell
±±" &
;
±±& '
cell
²² 
.
²² 
	MouseDown
²² 
+=
²² !
Cell_MouseDown
²²" 0
;
²²0 1
}
³³ 
}
´´ 	
private
¶¶ 
void
¶¶ 2
$HigligthStartingFirstTurnOponentCell
¶¶ 9
(
¶¶9 :
)
¶¶: ;
{
·· 	
ResetHighlights
¸¸ 
(
¸¸ 
)
¸¸ 
;
¸¸ 
var
¹¹ 
checkedPositions
¹¹  
=
¹¹! "
new
¹¹# &
HashSet
¹¹' .
<
¹¹. /
Point
¹¹/ 4
>
¹¹4 5
(
¹¹5 6
)
¹¹6 7
;
¹¹7 8
foreach
ºº 
(
ºº 
var
ºº 
piecePosition
ºº &
in
ºº' )
_board
ºº* 0
.
ºº0 1
Keys
ºº1 5
)
ºº5 6
{
»» 
if
¼¼ 
(
¼¼ 
_board
¼¼ 
.
¼¼ 
TryGetValue
¼¼ &
(
¼¼& '
piecePosition
¼¼' 4
,
¼¼4 5
out
¼¼6 9
var
¼¼: =!
currentStarterPiece
¼¼> Q
)
¼¼Q R
&&
¼¼S U!
currentStarterPiece
¼¼V i
!=
¼¼j l
null
¼¼m q
)
¼¼q r
{
½½ #
HighlightValidOffsets
¾¾ )
(
¾¾) *
piecePosition
¾¾* 7
,
¾¾7 8
checkedPositions
¾¾9 I
)
¾¾I J
;
¾¾J K
}
¿¿ 
}
ÀÀ 
}
ÁÁ 	
private
ÃÃ 
void
ÃÃ #
HighlightValidOffsets
ÃÃ *
(
ÃÃ* +
Point
ÃÃ+ 0
piecePosition
ÃÃ1 >
,
ÃÃ> ?
HashSet
ÃÃ@ G
<
ÃÃG H
Point
ÃÃH M
>
ÃÃM N
checkedPositions
ÃÃO _
)
ÃÃ_ `
{
ÄÄ 	
foreach
ÅÅ 
(
ÅÅ 
var
ÅÅ 
offset
ÅÅ 
in
ÅÅ  ""
ObtainAdjacentPoints
ÅÅ# 7
(
ÅÅ7 8
piecePosition
ÅÅ8 E
)
ÅÅE F
)
ÅÅF G
{
ÆÆ 
if
ÇÇ 
(
ÇÇ 
!
ÇÇ 
_board
ÇÇ 
.
ÇÇ 
ContainsKey
ÇÇ '
(
ÇÇ' (
offset
ÇÇ( .
)
ÇÇ. /
&&
ÇÇ0 2
_cellDictionary
ÈÈ #
.
ÈÈ# $
TryGetValue
ÈÈ$ /
(
ÈÈ/ 0
offset
ÈÈ0 6
,
ÈÈ6 7
out
ÈÈ8 ;
var
ÈÈ< ?
cell
ÈÈ@ D
)
ÈÈD E
&&
ÈÈF H
!
ÉÉ 
checkedPositions
ÉÉ %
.
ÉÉ% &
Contains
ÉÉ& .
(
ÉÉ. /
offset
ÉÉ/ 5
)
ÉÉ5 6
&&
ÉÉ7 9+
ObtaintAdjacentColliderPoints
ÊÊ 1
(
ÊÊ1 2
offset
ÊÊ2 8
,
ÊÊ8 9
piecePosition
ÊÊ: G
)
ÊÊG H
.
ÊÊH I
Exists
ÊÊI O
(
ÊÊO P
adj
ÊÊP S
=>
ÊÊT V
_board
ÊÊW ]
.
ÊÊ] ^
ContainsKey
ÊÊ^ i
(
ÊÊi j
adj
ÊÊj m
)
ÊÊm n
)
ÊÊn o
)
ÊÊo p
{
ËË 
cell
ÌÌ 
.
ÌÌ 
Fill
ÌÌ 
=
ÌÌ 
Brushes
ÌÌ  '
.
ÌÌ' (

LightGreen
ÌÌ( 2
;
ÌÌ2 3
cell
ÍÍ 
.
ÍÍ 
	IsEnabled
ÍÍ "
=
ÍÍ# $
true
ÍÍ% )
;
ÍÍ) *
cell
ÎÎ 
.
ÎÎ 
	MouseDown
ÎÎ "
+=
ÎÎ# %
Cell_MouseDown
ÎÎ& 4
;
ÎÎ4 5
checkedPositions
ÏÏ $
.
ÏÏ$ %
Add
ÏÏ% (
(
ÏÏ( )
offset
ÏÏ) /
)
ÏÏ/ 0
;
ÏÏ0 1
}
ÐÐ 
}
ÑÑ 
}
ÒÒ 	
private
ÔÔ 
void
ÔÔ -
HighlightAvailableStartingCells
ÔÔ 4
(
ÔÔ4 5
)
ÔÔ5 6
{
ÕÕ 	
ResetHighlights
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
var
×× 
checkedPositions
××  
=
××! "
new
××# &
HashSet
××' .
<
××. /
Point
××/ 4
>
××4 5
(
××5 6
)
××6 7
;
××7 8
if
ØØ 
(
ØØ 
_numberOfTurn
ØØ 
==
ØØ  
$num
ØØ! "
&&
ØØ# %
!
ØØ& '(
ValidateQueenPieceIsInGame
ØØ' A
(
ØØA B
)
ØØB C
)
ØØC D
{
ÙÙ 
_selectedPiece
ÚÚ 
=
ÚÚ  
_numberOfPlayer
ÚÚ! 0
==
ÚÚ1 3
$num
ÚÚ4 5
?
ÚÚ6 7
_player1Pieces
ÚÚ8 F
[
ÚÚF G
$num
ÚÚG H
]
ÚÚH I
:
ÚÚJ K
_player2Pieces
ÚÚL Z
[
ÚÚZ [
$num
ÚÚ[ \
]
ÚÚ\ ]
;
ÚÚ] ^
}
ÛÛ 
foreach
ÜÜ 
(
ÜÜ 
var
ÜÜ 
piecePosition
ÜÜ &
in
ÜÜ' )
_board
ÜÜ* 0
.
ÜÜ0 1
Keys
ÜÜ1 5
)
ÜÜ5 6
{
ÝÝ 
if
ÞÞ 
(
ÞÞ 
_board
ÞÞ 
[
ÞÞ 
piecePosition
ÞÞ (
]
ÞÞ( )
.
ÞÞ) *

PlayerName
ÞÞ* 4
==
ÞÞ5 7"
UserProfileSingleton
ÞÞ8 L
.
ÞÞL M
username
ÞÞM U
)
ÞÞU V
{
ßß )
HighlightValidCellsForPiece
àà /
(
àà/ 0
piecePosition
àà0 =
,
àà= >
checkedPositions
àà? O
)
ààO P
;
ààP Q
}
áá 
}
ââ 
}
ãã 	
private
åå 
void
åå )
HighlightValidCellsForPiece
åå 0
(
åå0 1
Point
åå1 6
piecePosition
åå7 D
,
ååD E
HashSet
ååF M
<
ååM N
Point
ååN S
>
ååS T
checkedPositions
ååU e
)
ååe f
{
ææ 	
foreach
çç 
(
çç 
var
çç 
offset
çç 
in
çç  ""
ObtainAdjacentPoints
çç# 7
(
çç7 8
piecePosition
çç8 E
)
ççE F
)
ççF G
{
èè 
if
éé 
(
éé 
IsValidCell
éé 
(
éé  
offset
éé  &
,
éé& '
checkedPositions
éé( 8
,
éé8 9
out
éé: =
var
éé> A
cell
ééB F
)
ééF G
)
ééG H
{
êê 
bool
ëë !
isConnectedToColony
ëë ,
=
ëë- .!
IsConnectedToColony
ëë/ B
(
ëëB C
offset
ëëC I
)
ëëI J
;
ëëJ K
bool
ìì 
isNearEnemy
ìì $
=
ìì% &
IsNearEnemy
ìì' 2
(
ìì2 3
offset
ìì3 9
)
ìì9 :
;
ìì: ;
if
íí 
(
íí !
isConnectedToColony
íí +
&&
íí, .
!
íí/ 0
isNearEnemy
íí0 ;
)
íí; <
{
îî 
cell
ïï 
.
ïï 
Fill
ïï !
=
ïï" #
Brushes
ïï$ +
.
ïï+ ,

LightGreen
ïï, 6
;
ïï6 7
cell
ðð 
.
ðð 
	IsEnabled
ðð &
=
ðð' (
true
ðð) -
;
ðð- .
cell
ññ 
.
ññ 
	MouseDown
ññ &
+=
ññ' )
Cell_MouseDown
ññ* 8
;
ññ8 9
checkedPositions
òò (
.
òò( )
Add
òò) ,
(
òò, -
offset
òò- 3
)
òò3 4
;
òò4 5
}
óó 
}
ôô 
}
õõ 
}
öö 	
private
øø 
bool
øø 
IsValidCell
øø  
(
øø  !
Point
øø! &
offset
øø' -
,
øø- .
HashSet
øø/ 6
<
øø6 7
Point
øø7 <
>
øø< =
checkedPositions
øø> N
,
øøN O
out
øøP S
Polygon
øøT [
cell
øø\ `
)
øø` a
{
ùù 	
cell
úú 
=
úú 
null
úú 
;
úú 
return
ûû 
!
ûû 
_board
ûû 
.
ûû 
ContainsKey
ûû &
(
ûû& '
offset
ûû' -
)
ûû- .
&&
ûû/ 1
_cellDictionary
üü "
.
üü" #
TryGetValue
üü# .
(
üü. /
offset
üü/ 5
,
üü5 6
out
üü7 :
cell
üü; ?
)
üü? @
&&
üüA C
!
ýý 
checkedPositions
ýý $
.
ýý$ %
Contains
ýý% -
(
ýý- .
offset
ýý. 4
)
ýý4 5
;
ýý5 6
}
þþ 	
private
 
bool
 !
IsConnectedToColony
 (
(
( )
Point
) .
offset
/ 5
)
5 6
{
 	
return
 "
ObtainAdjacentPoints
 '
(
' (
offset
( .
)
. /
.
/ 0
Exists
0 6
(
6 7
adj
7 :
=>
; =
_board
> D
.
D E
ContainsKey
E P
(
P Q
adj
Q T
)
T U
&&
V X
_board
Y _
[
_ `
adj
` c
]
c d
.
d e

PlayerName
e o
==
p r#
UserProfileSingletons 
. 
username 
) 
; 
}
 	
private
 
bool
 
IsNearEnemy
  
(
  !
Point
! &
offset
' -
)
- .
{
 	
return
 "
ObtainAdjacentPoints
 '
(
' (
offset
( .
)
. /
.
/ 0
Exists
0 6
(
6 7
adj
7 :
=>
; =
_board
> D
.
D E
ContainsKey
E P
(
P Q
adj
Q T
)
T U
&&
V X
_board
Y _
[
_ `
adj
` c
]
c d
.
d e

PlayerName
e o
!=
p r#
UserProfileSingletons 
. 
username 
) 
; 
}
 	
private
 
bool
 %
IsConnectedToHiveBeetle
 ,
(
, -
Point
- 2
position
3 ;
)
; <
{
 	
var
 
adjacentPoints
 
=
  "
ObtainAdjacentPoints
! 5
(
5 6
position
6 >
)
> ?
;
? @
return
 
adjacentPoints
 !
.
! "
Exists
" (
(
( )
adj
) ,
=>
- /
_board
0 6
.
6 7
ContainsKey
7 B
(
B C
adj
C F
)
F G
)
G H
;
H I
}
 	
private
 
bool
 $
IsContinouslyConnected
 +
(
+ ,
Point
, 1
adjacent
2 :
,
: ;
Point
< A
previousPosition
B R
,
R S
Point
T Y
currentPosition
Z i
)
i j
{
 	
var
 
adjacentPoints
 
=
  "
ObtainAdjacentPoints
! 5
(
5 6
adjacent
6 >
)
> ?
;
? @
return
 
adjacentPoints
 !
.
! "
Exists
" (
(
( )
adj
) ,
=>
- /
_board
0 6
.
6 7
ContainsKey
7 B
(
B C
adj
C F
)
F G
&&
H J"
ObtainAdjacentPoints
0 D
(
D E
adj
E H
)
H I
.
I J
Contains
J R
(
R S
currentPosition
S b
)
b c
&&
d f"
ObtainAdjacentPoints
0 D
(
D E
adj
E H
)
H I
.
I J
Contains
J R
(
R S
previousPosition
S c
)
c d
)
d e
;
e f
}
 	
private
 
bool
 
IsNotSurrounded
 $
(
$ %
Point
% *
position
+ 3
)
3 4
{
 	
var
 
adjacentPoints
 
=
  "
ObtainAdjacentPoints
! 5
(
5 6
position
6 >
)
> ?
;
? @
int
 
occupiedSides
 
=
 
adjacentPoints
  .
.
. /
Count
/ 4
(
4 5
adj
5 8
=>
9 ;
_board
< B
.
B C
ContainsKey
C N
(
N O
adj
O R
)
R S
)
S T
;
T U
return
 
occupiedSides
  
!=
! #
$num
$ %
;
% &
}
 	
private
 
bool
 
IsConnectedToHive
 &
(
& '
Point
' ,
position
- 5
)
5 6
{
   	
var
¡¡ 
adjacentPoints
¡¡ 
=
¡¡  "
ObtainAdjacentPoints
¡¡! 5
(
¡¡5 6
position
¡¡6 >
)
¡¡> ?
;
¡¡? @
bool
¢¢ !
isConnectedToColony
¢¢ $
=
¢¢% &
adjacentPoints
¢¢' 5
.
¢¢5 6
Exists
¢¢6 <
(
¢¢< =
adj
¢¢= @
=>
¢¢A C
_board
¢¢D J
.
¢¢J K
ContainsKey
¢¢K V
(
¢¢V W
adj
¢¢W Z
)
¢¢Z [
)
¢¢[ \
;
¢¢\ ]
return
££ !
isConnectedToColony
££ &
;
££& '
}
¤¤ 	
private
¦¦ 
List
¦¦ 
<
¦¦ 
Point
¦¦ 
>
¦¦ "
ObtainAdjacentPoints
¦¦ 0
(
¦¦0 1
Point
¦¦1 6
piecePosition
¦¦7 D
)
¦¦D E
{
§§ 	
List
¨¨ 
<
¨¨ 
Point
¨¨ 
>
¨¨ 
adjacentPoints
¨¨ &
=
¨¨' (
new
¨¨) ,
List
¨¨- 1
<
¨¨1 2
Point
¨¨2 7
>
¨¨7 8
(
¨¨8 9
)
¨¨9 :
;
¨¨: ;
double
©© 
epsilon
©© 
=
©© 
$num
©© #
;
©©# $
if
ªª 
(
ªª 
Math
ªª 
.
ªª 
Abs
ªª 
(
ªª 
piecePosition
ªª &
.
ªª& '
X
ªª' (
%
ªª) *
$num
ªª+ ,
-
ªª- .
$num
ªª/ 0
)
ªª0 1
<
ªª2 3
epsilon
ªª4 ;
)
ªª; <
{
«« 
adjacentPoints
¬¬ 
.
¬¬ 
Add
¬¬ "
(
¬¬" #
new
¬¬# &
Point
¬¬' ,
(
¬¬, -
piecePosition
¬¬- :
.
¬¬: ;
X
¬¬; <
-
¬¬= >
$num
¬¬? @
,
¬¬@ A
piecePosition
¬¬B O
.
¬¬O P
Y
¬¬P Q
-
¬¬R S
$num
¬¬T U
)
¬¬U V
)
¬¬V W
;
¬¬W X
adjacentPoints
­­ 
.
­­ 
Add
­­ "
(
­­" #
new
­­# &
Point
­­' ,
(
­­, -
piecePosition
­­- :
.
­­: ;
X
­­; <
,
­­< =
piecePosition
­­> K
.
­­K L
Y
­­L M
-
­­N O
$num
­­P Q
)
­­Q R
)
­­R S
;
­­S T
adjacentPoints
®® 
.
®® 
Add
®® "
(
®®" #
new
®®# &
Point
®®' ,
(
®®, -
piecePosition
®®- :
.
®®: ;
X
®®; <
+
®®= >
$num
®®? @
,
®®@ A
piecePosition
®®B O
.
®®O P
Y
®®P Q
-
®®R S
$num
®®T U
)
®®U V
)
®®V W
;
®®W X
adjacentPoints
¯¯ 
.
¯¯ 
Add
¯¯ "
(
¯¯" #
new
¯¯# &
Point
¯¯' ,
(
¯¯, -
piecePosition
¯¯- :
.
¯¯: ;
X
¯¯; <
+
¯¯= >
$num
¯¯? @
,
¯¯@ A
piecePosition
¯¯B O
.
¯¯O P
Y
¯¯P Q
)
¯¯Q R
)
¯¯R S
;
¯¯S T
adjacentPoints
°° 
.
°° 
Add
°° "
(
°°" #
new
°°# &
Point
°°' ,
(
°°, -
piecePosition
°°- :
.
°°: ;
X
°°; <
,
°°< =
piecePosition
°°> K
.
°°K L
Y
°°L M
+
°°N O
$num
°°P Q
)
°°Q R
)
°°R S
;
°°S T
adjacentPoints
±± 
.
±± 
Add
±± "
(
±±" #
new
±±# &
Point
±±' ,
(
±±, -
piecePosition
±±- :
.
±±: ;
X
±±; <
-
±±= >
$num
±±? @
,
±±@ A
piecePosition
±±B O
.
±±O P
Y
±±P Q
)
±±Q R
)
±±R S
;
±±S T
}
²² 
else
³³ 
{
´´ 
adjacentPoints
µµ 
.
µµ 
Add
µµ "
(
µµ" #
new
µµ# &
Point
µµ' ,
(
µµ, -
piecePosition
µµ- :
.
µµ: ;
X
µµ; <
-
µµ= >
$num
µµ? @
,
µµ@ A
piecePosition
µµB O
.
µµO P
Y
µµP Q
)
µµQ R
)
µµR S
;
µµS T
adjacentPoints
¶¶ 
.
¶¶ 
Add
¶¶ "
(
¶¶" #
new
¶¶# &
Point
¶¶' ,
(
¶¶, -
piecePosition
¶¶- :
.
¶¶: ;
X
¶¶; <
,
¶¶< =
piecePosition
¶¶> K
.
¶¶K L
Y
¶¶L M
-
¶¶N O
$num
¶¶P Q
)
¶¶Q R
)
¶¶R S
;
¶¶S T
adjacentPoints
·· 
.
·· 
Add
·· "
(
··" #
new
··# &
Point
··' ,
(
··, -
piecePosition
··- :
.
··: ;
X
··; <
+
··= >
$num
··? @
,
··@ A
piecePosition
··B O
.
··O P
Y
··P Q
)
··Q R
)
··R S
;
··S T
adjacentPoints
¸¸ 
.
¸¸ 
Add
¸¸ "
(
¸¸" #
new
¸¸# &
Point
¸¸' ,
(
¸¸, -
piecePosition
¸¸- :
.
¸¸: ;
X
¸¸; <
+
¸¸= >
$num
¸¸? @
,
¸¸@ A
piecePosition
¸¸B O
.
¸¸O P
Y
¸¸P Q
+
¸¸R S
$num
¸¸T U
)
¸¸U V
)
¸¸V W
;
¸¸W X
adjacentPoints
¹¹ 
.
¹¹ 
Add
¹¹ "
(
¹¹" #
new
¹¹# &
Point
¹¹' ,
(
¹¹, -
piecePosition
¹¹- :
.
¹¹: ;
X
¹¹; <
,
¹¹< =
piecePosition
¹¹> K
.
¹¹K L
Y
¹¹L M
+
¹¹N O
$num
¹¹P Q
)
¹¹Q R
)
¹¹R S
;
¹¹S T
adjacentPoints
ºº 
.
ºº 
Add
ºº "
(
ºº" #
new
ºº# &
Point
ºº' ,
(
ºº, -
piecePosition
ºº- :
.
ºº: ;
X
ºº; <
-
ºº= >
$num
ºº? @
,
ºº@ A
piecePosition
ººB O
.
ººO P
Y
ººP Q
+
ººR S
$num
ººT U
)
ººU V
)
ººV W
;
ººW X
}
»» 
return
¼¼ 
adjacentPoints
¼¼ !
;
¼¼! "
}
½½ 	
private
¿¿ 
List
¿¿ 
<
¿¿ 
Point
¿¿ 
>
¿¿ +
ObtaintAdjacentColliderPoints
¿¿ 9
(
¿¿9 :
Point
¿¿: ?
offset
¿¿@ F
,
¿¿F G
Point
¿¿H M
piecePosition
¿¿N [
)
¿¿[ \
{
ÀÀ 	
List
ÁÁ 
<
ÁÁ 
Point
ÁÁ 
>
ÁÁ 
adjacentPoints
ÁÁ &
=
ÁÁ' (
new
ÁÁ) ,
List
ÁÁ- 1
<
ÁÁ1 2
Point
ÁÁ2 7
>
ÁÁ7 8
(
ÁÁ8 9
)
ÁÁ9 :
;
ÁÁ: ;
double
ÂÂ 
epsilon
ÂÂ 
=
ÂÂ 
$num
ÂÂ #
;
ÂÂ# $
if
ÃÃ 
(
ÃÃ 
Math
ÃÃ 
.
ÃÃ 
Abs
ÃÃ 
(
ÃÃ 
piecePosition
ÃÃ &
.
ÃÃ& '
X
ÃÃ' (
%
ÃÃ) *
$num
ÃÃ+ ,
-
ÃÃ- .
$num
ÃÃ/ 0
)
ÃÃ0 1
<
ÃÃ2 3
epsilon
ÃÃ4 ;
)
ÃÃ; <
{
ÄÄ 
adjacentPoints
ÅÅ 
.
ÅÅ 
Add
ÅÅ "
(
ÅÅ" #
new
ÅÅ# &
Point
ÅÅ' ,
(
ÅÅ, -
offset
ÅÅ- 3
.
ÅÅ3 4
X
ÅÅ4 5
+
ÅÅ6 7
$num
ÅÅ8 9
,
ÅÅ9 :
offset
ÅÅ; A
.
ÅÅA B
Y
ÅÅB C
+
ÅÅD E
$num
ÅÅF G
)
ÅÅG H
)
ÅÅH I
;
ÅÅI J
adjacentPoints
ÆÆ 
.
ÆÆ 
Add
ÆÆ "
(
ÆÆ" #
new
ÆÆ# &
Point
ÆÆ' ,
(
ÆÆ, -
offset
ÆÆ- 3
.
ÆÆ3 4
X
ÆÆ4 5
,
ÆÆ5 6
offset
ÆÆ7 =
.
ÆÆ= >
Y
ÆÆ> ?
+
ÆÆ@ A
$num
ÆÆB C
)
ÆÆC D
)
ÆÆD E
;
ÆÆE F
adjacentPoints
ÇÇ 
.
ÇÇ 
Add
ÇÇ "
(
ÇÇ" #
new
ÇÇ# &
Point
ÇÇ' ,
(
ÇÇ, -
offset
ÇÇ- 3
.
ÇÇ3 4
X
ÇÇ4 5
-
ÇÇ6 7
$num
ÇÇ8 9
,
ÇÇ9 :
offset
ÇÇ; A
.
ÇÇA B
Y
ÇÇB C
+
ÇÇD E
$num
ÇÇF G
)
ÇÇG H
)
ÇÇH I
;
ÇÇI J
adjacentPoints
ÈÈ 
.
ÈÈ 
Add
ÈÈ "
(
ÈÈ" #
new
ÈÈ# &
Point
ÈÈ' ,
(
ÈÈ, -
offset
ÈÈ- 3
.
ÈÈ3 4
X
ÈÈ4 5
-
ÈÈ6 7
$num
ÈÈ8 9
,
ÈÈ9 :
offset
ÈÈ; A
.
ÈÈA B
Y
ÈÈB C
)
ÈÈC D
)
ÈÈD E
;
ÈÈE F
adjacentPoints
ÉÉ 
.
ÉÉ 
Add
ÉÉ "
(
ÉÉ" #
new
ÉÉ# &
Point
ÉÉ' ,
(
ÉÉ, -
offset
ÉÉ- 3
.
ÉÉ3 4
X
ÉÉ4 5
,
ÉÉ5 6
offset
ÉÉ7 =
.
ÉÉ= >
Y
ÉÉ> ?
-
ÉÉ@ A
$num
ÉÉB C
)
ÉÉC D
)
ÉÉD E
;
ÉÉE F
adjacentPoints
ÊÊ 
.
ÊÊ 
Add
ÊÊ "
(
ÊÊ" #
new
ÊÊ# &
Point
ÊÊ' ,
(
ÊÊ, -
offset
ÊÊ- 3
.
ÊÊ3 4
X
ÊÊ4 5
+
ÊÊ6 7
$num
ÊÊ8 9
,
ÊÊ9 :
offset
ÊÊ; A
.
ÊÊA B
Y
ÊÊB C
)
ÊÊC D
)
ÊÊD E
;
ÊÊE F
}
ËË 
else
ÌÌ 
{
ÍÍ 
adjacentPoints
ÎÎ 
.
ÎÎ 
Add
ÎÎ "
(
ÎÎ" #
new
ÎÎ# &
Point
ÎÎ' ,
(
ÎÎ, -
offset
ÎÎ- 3
.
ÎÎ3 4
X
ÎÎ4 5
+
ÎÎ6 7
$num
ÎÎ8 9
,
ÎÎ9 :
offset
ÎÎ; A
.
ÎÎA B
Y
ÎÎB C
)
ÎÎC D
)
ÎÎD E
;
ÎÎE F
adjacentPoints
ÏÏ 
.
ÏÏ 
Add
ÏÏ "
(
ÏÏ" #
new
ÏÏ# &
Point
ÏÏ' ,
(
ÏÏ, -
offset
ÏÏ- 3
.
ÏÏ3 4
X
ÏÏ4 5
,
ÏÏ5 6
offset
ÏÏ7 =
.
ÏÏ= >
Y
ÏÏ> ?
+
ÏÏ@ A
$num
ÏÏB C
)
ÏÏC D
)
ÏÏD E
;
ÏÏE F
adjacentPoints
ÐÐ 
.
ÐÐ 
Add
ÐÐ "
(
ÐÐ" #
new
ÐÐ# &
Point
ÐÐ' ,
(
ÐÐ, -
offset
ÐÐ- 3
.
ÐÐ3 4
X
ÐÐ4 5
-
ÐÐ6 7
$num
ÐÐ8 9
,
ÐÐ9 :
offset
ÐÐ; A
.
ÐÐA B
Y
ÐÐB C
)
ÐÐC D
)
ÐÐD E
;
ÐÐE F
adjacentPoints
ÑÑ 
.
ÑÑ 
Add
ÑÑ "
(
ÑÑ" #
new
ÑÑ# &
Point
ÑÑ' ,
(
ÑÑ, -
offset
ÑÑ- 3
.
ÑÑ3 4
X
ÑÑ4 5
-
ÑÑ6 7
$num
ÑÑ8 9
,
ÑÑ9 :
offset
ÑÑ; A
.
ÑÑA B
Y
ÑÑB C
-
ÑÑD E
$num
ÑÑF G
)
ÑÑG H
)
ÑÑH I
;
ÑÑI J
adjacentPoints
ÒÒ 
.
ÒÒ 
Add
ÒÒ "
(
ÒÒ" #
new
ÒÒ# &
Point
ÒÒ' ,
(
ÒÒ, -
offset
ÒÒ- 3
.
ÒÒ3 4
X
ÒÒ4 5
,
ÒÒ5 6
offset
ÒÒ7 =
.
ÒÒ= >
Y
ÒÒ> ?
-
ÒÒ@ A
$num
ÒÒB C
)
ÒÒC D
)
ÒÒD E
;
ÒÒE F
adjacentPoints
ÓÓ 
.
ÓÓ 
Add
ÓÓ "
(
ÓÓ" #
new
ÓÓ# &
Point
ÓÓ' ,
(
ÓÓ, -
offset
ÓÓ- 3
.
ÓÓ3 4
X
ÓÓ4 5
+
ÓÓ6 7
$num
ÓÓ8 9
,
ÓÓ9 :
offset
ÓÓ; A
.
ÓÓA B
Y
ÓÓB C
-
ÓÓD E
$num
ÓÓF G
)
ÓÓG H
)
ÓÓH I
;
ÓÓI J
}
ÔÔ 
return
ÕÕ 
adjacentPoints
ÕÕ !
;
ÕÕ! "
}
ÖÖ 	
private
ØØ 
PointCollection
ØØ !
CreateHexagonPoints
ØØ  3
(
ØØ3 4
double
ØØ4 :
size
ØØ; ?
)
ØØ? @
{
ÙÙ 	
var
ÚÚ 
points
ÚÚ 
=
ÚÚ 
new
ÚÚ 
PointCollection
ÚÚ ,
(
ÚÚ, -
)
ÚÚ- .
;
ÚÚ. /
for
ÛÛ 
(
ÛÛ 
int
ÛÛ 
i
ÛÛ 
=
ÛÛ 
$num
ÛÛ 
;
ÛÛ 
i
ÛÛ 
<
ÛÛ 
$num
ÛÛ  !
;
ÛÛ! "
i
ÛÛ# $
++
ÛÛ$ &
)
ÛÛ& '
{
ÜÜ 
double
ÝÝ 
angle
ÝÝ 
=
ÝÝ 
(
ÝÝ  
i
ÝÝ  !
*
ÝÝ" #
$num
ÝÝ$ &
+
ÝÝ' (
$num
ÝÝ) +
)
ÝÝ+ ,
*
ÝÝ- .
Math
ÝÝ/ 3
.
ÝÝ3 4
PI
ÝÝ4 6
/
ÝÝ7 8
$num
ÝÝ9 <
;
ÝÝ< =
points
ÞÞ 
.
ÞÞ 
Add
ÞÞ 
(
ÞÞ 
new
ÞÞ 
Point
ÞÞ $
(
ÞÞ$ %
size
ÞÞ% )
*
ÞÞ* +
Math
ÞÞ, 0
.
ÞÞ0 1
Cos
ÞÞ1 4
(
ÞÞ4 5
angle
ÞÞ5 :
)
ÞÞ: ;
,
ÞÞ; <
size
ÞÞ= A
*
ÞÞB C
Math
ÞÞD H
.
ÞÞH I
Sin
ÞÞI L
(
ÞÞL M
angle
ÞÞM R
)
ÞÞR S
)
ÞÞS T
)
ÞÞT U
;
ÞÞU V
}
ßß 
return
àà 
points
àà 
;
àà 
}
áá 	
private
ãã 
void
ãã 
PlacePieceOnCell
ãã %
(
ãã% &
Polygon
ãã& -
cell
ãã. 2
)
ãã2 3
{
ää 	
if
åå 
(
åå 
cell
åå 
!=
åå 
null
åå 
)
åå 
{
ææ 
foreach
çç 
(
çç 
var
çç 
polygon
çç $
in
çç% '!
canva_GameBoardGrid
çç( ;
.
çç; <
Children
çç< D
.
ççD E
OfType
ççE K
<
ççK L
Polygon
ççL S
>
ççS T
(
ççT U
)
ççU V
)
ççV W
{
èè 
polygon
éé 
.
éé 
	IsEnabled
éé %
=
éé& '
false
éé( -
;
éé- .
}
êê 
_selectedPiece
ëë 
.
ëë 
Position
ëë '
=
ëë( )
(
ëë* +
Point
ëë+ 0
)
ëë0 1
cell
ëë1 5
.
ëë5 6
Tag
ëë6 9
;
ëë9 :
Image
ìì 

pieceImage
ìì  
=
ìì! "!
ObtainImageCreation
ìì# 6
(
ìì6 7
cell
ìì7 ;
,
ìì; <
_selectedPiece
ìì= K
)
ììK L
;
ììL M!
canva_GameBoardGrid
íí #
.
íí# $
Children
íí$ ,
.
íí, -
Add
íí- 0
(
íí0 1

pieceImage
íí1 ;
)
íí; <
;
íí< =
_board
îî 
[
îî 
_selectedPiece
îî %
.
îî% &
Position
îî& .
]
îî. /
=
îî0 1
_selectedPiece
îî2 @
;
îî@ A#
RemovePieceFromPlayer
ïï %
(
ïï% &
_selectedPiece
ïï& 4
)
ïï4 5
;
ïï5 6'
SendPiecePositionToServer
ðð )
(
ðð) *
_selectedPiece
ðð* 8
)
ðð8 9
;
ðð9 :
_lastPlacedCell
ññ 
=
ññ  !
cell
ññ" &
;
ññ& '!
_isFirstPiecePlaced
òò #
=
òò$ %
true
òò& *
;
òò* +
_selectedPiece
óó 
=
óó  
null
óó! %
;
óó% &
ResetHighlights
ôô 
(
ôô  
)
ôô  !
;
ôô! "
}
õõ 
}
öö 	
private
øø 
void
øø +
UnlockPlacesWhereThereIsPiece
øø 2
(
øø2 3
)
øø3 4
{
ùù 	
foreach
úú 
(
úú 
var
úú 
pieceInBoard
úú %
in
úú& (
_board
úú) /
)
úú/ 0
{
ûû 
Point
üü 
placeToUnlock
üü #
=
üü$ %
pieceInBoard
üü& 2
.
üü2 3
Key
üü3 6
;
üü6 7
if
ýý 
(
ýý 
_cellDictionary
ýý #
.
ýý# $
ContainsKey
ýý$ /
(
ýý/ 0
placeToUnlock
ýý0 =
)
ýý= >
&&
ýý? A
pieceInBoard
ýýB N
.
ýýN O
Value
ýýO T
.
ýýT U

PlayerName
ýýU _
==
ýý` b"
UserProfileSingleton
ýýc w
.
ýýw x
usernameýýx 
)ýý 
{
þþ 
_cellDictionary
ÿÿ #
[
ÿÿ# $
placeToUnlock
ÿÿ$ 1
]
ÿÿ1 2
.
ÿÿ2 3
	IsEnabled
ÿÿ3 <
=
ÿÿ= >
true
ÿÿ? C
;
ÿÿC D
}
		 
}
		 
List
		 
<
		 
Image
		 
>
		 
imagesOnBoard
		 %
=
		& '!
canva_GameBoardGrid
		( ;
.
		; <
Children
		< D
.
		D E
OfType
		E K
<
		K L
Image
		L Q
>
		Q R
(
		R S
)
		S T
.
		T U
ToList
		U [
(
		[ \
)
		\ ]
;
		] ^
foreach
		 
(
		 
Image
		 
imageOnBoard
		 &
in
		' )
imagesOnBoard
		* 7
)
		7 8
{
		 
	GamePiece
		 
piece
		 
=
		  !
(
		" #
	GamePiece
		# ,
)
		, -
imageOnBoard
		- 9
.
		9 :
Tag
		: =
;
		= >
if
		 
(
		 
piece
		 
.
		 

PlayerName
		 $
==
		% '"
UserProfileSingleton
		( <
.
		< =
username
		= E
)
		E F
{
		 
imageOnBoard
		  
.
		  !
	IsEnabled
		! *
=
		+ ,
true
		- 1
;
		1 2
}
		 
}
		 
}
		 	
private
		 
void
		 '
SendPiecePositionToServer
		 .
(
		. /
Logic
		/ 4
.
		4 5
	GamePiece
		5 >
	gamePiece
		? H
)
		H I
{
		 	
LoggerManager
		 
logger
		  
=
		! "
new
		# &
LoggerManager
		' 4
(
		4 5
this
		5 9
.
		9 :
GetType
		: A
(
		A B
)
		B C
)
		C D
;
		D E
try
		 
{
		 
	HiveProxy
		 
.
		 
Piece
		 

pieceMoved
		  *
=
		+ ,
new
		- 0
	HiveProxy
		1 :
.
		: ;
Piece
		; @
(
		@ A
)
		A B
{
		 
name
		 
=
		 
	gamePiece
		 $
.
		$ %
Piece
		% *
.
		* +
Name
		+ /
,
		/ 0

playerName
		 
=
		  
	gamePiece
		! *
.
		* +
Piece
		+ 0
.
		0 1

PlayerName
		1 ;
,
		; <
position
		 
=
		 
	gamePiece
		 (
.
		( )
Piece
		) .
.
		. /
Position
		/ 7
}
		 
;
		 
	HiveProxy
		 
.
		 
GamePice
		 "
gamePieceMoved
		# 1
=
		2 3
new
		4 7
	HiveProxy
		8 A
.
		A B
GamePice
		B J
(
		J K
)
		K L
{
		 

playerName
		 
=
		  
	gamePiece
		! *
.
		* +

PlayerName
		+ 5
,
		5 6
piece
		 
=
		 

pieceMoved
		 &
,
		& '
	imagePath
		 
=
		 
	gamePiece
		  )
.
		) *
	ImagePath
		* 3
,
		3 4
position
		 
=
		 
	gamePiece
		 (
.
		( )
Position
		) 1
,
		1 2
numberOfPiece
		 !
=
		" #
	gamePiece
		$ -
.
		- .
PieceNumber
		. 9
,
		9 :
}
		 
;
		 
UserSession
 	 	 
userSession
 	 	 '
=
 	 	( )
new
 	 	* -
UserSession
 	 	. 9
(
 	 	9 :
)
 	 	: ;
{
¡	¡	 
	idAccount
¢	¢	 
=
¢	¢	 "
UserProfileSingleton
¢	¢	  4
.
¢	¢	4 5
	idAccount
¢	¢	5 >
,
¢	¢	> ?
username
£	£	 
=
£	£	 "
UserProfileSingleton
£	£	 3
.
£	£	3 4
username
£	£	4 <
,
£	£	< =
	codeMatch
¤	¤	 
=
¤	¤	 
MatchSingleton
¤	¤	  .
.
¤	¤	. /
	codeMatch
¤	¤	/ 8
}
¥	¥	 
;
¥	¥	  
_gameManagerClient
¦	¦	 "
.
¦	¦	" #
	MovePiece
¦	¦	# ,
(
¦	¦	, -
gamePieceMoved
¦	¦	- ;
,
¦	¦	; <
userSession
¦	¦	= H
,
¦	¦	H I
userSession
¦	¦	J U
.
¦	¦	U V
	codeMatch
¦	¦	V _
)
¦	¦	_ `
;
¦	¦	` a 
_gameManagerClient
§	§	 "
.
§	§	" #
SetTurns
§	§	# +
(
§	§	+ ,
userSession
§	§	, 7
,
§	§	7 8
userSession
§	§	9 D
.
§	§	D E
	codeMatch
§	§	E N
)
§	§	N O
;
§	§	O P
}
¨	¨	 
catch
©	©	 
(
©	©	 '
EndpointNotFoundException
©	©	 ,
endPointException
©	©	- >
)
©	©	> ?
{
ª	ª	 
logger
«	«	 
.
«	«	 
LogFatal
«	«	 
(
«	«	  
endPointException
«	«	  1
)
«	«	1 2
;
«	«	2 3
DialogManager
¬	¬	 
.
¬	¬	 #
ShowErrorMessageAlert
¬	¬	 3
(
¬	¬	3 4

Properties
¬	¬	4 >
.
¬	¬	> ?
	Resources
¬	¬	? H
.
¬	¬	H I%
dialogEndPointException
¬	¬	I `
)
¬	¬	` a
;
¬	¬	a b
ReturnToLoginView
­	­	 !
(
­	­	! "
)
­	­	" #
;
­	­	# $
}
®	®	 
catch
¯	¯	 
(
¯	¯	 
TimeoutException
¯	¯	 #
timeOutException
¯	¯	$ 4
)
¯	¯	4 5
{
°	°	 
logger
±	±	 
.
±	±	 
LogWarn
±	±	 
(
±	±	 
timeOutException
±	±	 /
)
±	±	/ 0
;
±	±	0 1
DialogManager
²	²	 
.
²	²	 #
ShowErrorMessageAlert
²	²	 3
(
²	²	3 4

Properties
²	²	4 >
.
²	²	> ?
	Resources
²	²	? H
.
²	²	H I$
dialogTimeOutException
²	²	I _
)
²	²	_ `
;
²	²	` a
ReturnToLoginView
³	³	 !
(
³	³	! "
)
³	³	" #
;
³	³	# $
}
´	´	 
catch
µ	µ	 
(
µ	µ	 $
CommunicationException
µ	µ	 )$
communicationException
µ	µ	* @
)
µ	µ	@ A
{
¶	¶	 
logger
·	·	 
.
·	·	 
LogFatal
·	·	 
(
·	·	  $
communicationException
·	·	  6
)
·	·	6 7
;
·	·	7 8
DialogManager
¸	¸	 
.
¸	¸	 #
ShowErrorMessageAlert
¸	¸	 3
(
¸	¸	3 4

Properties
¸	¸	4 >
.
¸	¸	> ?
	Resources
¸	¸	? H
.
¸	¸	H I)
dialogComunicationException
¸	¸	I d
)
¸	¸	d e
;
¸	¸	e f
ReturnToLoginView
¹	¹	 !
(
¹	¹	! "
)
¹	¹	" #
;
¹	¹	# $
}
º	º	 
}
»	»	 	
private
½	½	 
void
½	½	 #
RemovePieceFromPlayer
½	½	 *
(
½	½	* +
	GamePiece
½	½	+ 4
piece
½	½	5 :
)
½	½	: ;
{
¾	¾	 	
if
¿	¿	 
(
¿	¿	 
_player1Pieces
¿	¿	 
.
¿	¿	 
Contains
¿	¿	 '
(
¿	¿	' (
piece
¿	¿	( -
)
¿	¿	- .
)
¿	¿	. /
{
À	À	 
foreach
Á	Á	 
(
Á	Á	 
var
Á	Á	 
child
Á	Á	 "
in
Á	Á	# %!
stckp_Player1Pieces
Á	Á	& 9
.
Á	Á	9 :
Children
Á	Á	: B
.
Á	Á	B C
OfType
Á	Á	C I
<
Á	Á	I J
Image
Á	Á	J O
>
Á	Á	O P
(
Á	Á	P Q
)
Á	Á	Q R
)
Á	Á	R S
{
Â	Â	 
if
Ã	Ã	 
(
Ã	Ã	 
child
Ã	Ã	 
.
Ã	Ã	 
Tag
Ã	Ã	 !
==
Ã	Ã	" $
piece
Ã	Ã	% *
)
Ã	Ã	* +
{
Ä	Ä	 !
stckp_Player1Pieces
Å	Å	 +
.
Å	Å	+ ,
Children
Å	Å	, 4
.
Å	Å	4 5
Remove
Å	Å	5 ;
(
Å	Å	; <
child
Å	Å	< A
)
Å	Å	A B
;
Å	Å	B C
break
Æ	Æ	 
;
Æ	Æ	 
}
Ç	Ç	 
}
È	È	 
}
É	É	 
else
Ê	Ê	 
if
Ê	Ê	 
(
Ê	Ê	 
_player2Pieces
Ê	Ê	 #
.
Ê	Ê	# $
Contains
Ê	Ê	$ ,
(
Ê	Ê	, -
piece
Ê	Ê	- 2
)
Ê	Ê	2 3
)
Ê	Ê	3 4
{
Ë	Ë	 
foreach
Ì	Ì	 
(
Ì	Ì	 
var
Ì	Ì	 
child
Ì	Ì	 "
in
Ì	Ì	# %!
stckp_Player2Pieces
Ì	Ì	& 9
.
Ì	Ì	9 :
Children
Ì	Ì	: B
.
Ì	Ì	B C
OfType
Ì	Ì	C I
<
Ì	Ì	I J
Image
Ì	Ì	J O
>
Ì	Ì	O P
(
Ì	Ì	P Q
)
Ì	Ì	Q R
)
Ì	Ì	R S
{
Í	Í	 
if
Î	Î	 
(
Î	Î	 
child
Î	Î	 
.
Î	Î	 
Tag
Î	Î	 !
==
Î	Î	" $
piece
Î	Î	% *
)
Î	Î	* +
{
Ï	Ï	 !
stckp_Player2Pieces
Ð	Ð	 +
.
Ð	Ð	+ ,
Children
Ð	Ð	, 4
.
Ð	Ð	4 5
Remove
Ð	Ð	5 ;
(
Ð	Ð	; <
child
Ð	Ð	< A
)
Ð	Ð	A B
;
Ð	Ð	B C
break
Ñ	Ñ	 
;
Ñ	Ñ	 
}
Ò	Ò	 
}
Ó	Ó	 
}
Ô	Ô	 
}
Õ	Õ	 	
private
×	×	 
void
×	×	 
ResetHighlights
×	×	 $
(
×	×	$ %
)
×	×	% &
{
Ø	Ø	 	
_isBeetleMoved
Ù	Ù	 
=
Ù	Ù	 
false
Ù	Ù	 "
;
Ù	Ù	" #
foreach
Ú	Ú	 
(
Ú	Ú	 
	UIElement
Ú	Ú	 
element
Ú	Ú	 &
in
Ú	Ú	' )!
canva_GameBoardGrid
Ú	Ú	* =
.
Ú	Ú	= >
Children
Ú	Ú	> F
)
Ú	Ú	F G
{
Û	Û	 
if
Ü	Ü	 
(
Ü	Ü	 
element
Ü	Ü	 
is
Ü	Ü	 
Polygon
Ü	Ü	 &
cell
Ü	Ü	' +
)
Ü	Ü	+ ,
{
Ý	Ý	 
cell
Þ	Þ	 
.
Þ	Þ	 
Fill
Þ	Þ	 
=
Þ	Þ	 
Brushes
Þ	Þ	  '
.
Þ	Þ	' (
Transparent
Þ	Þ	( 3
;
Þ	Þ	3 4
cell
ß	ß	 
.
ß	ß	 
	MouseDown
ß	ß	 "
-=
ß	ß	# %
Cell_MouseDown
ß	ß	& 4
;
ß	ß	4 5
cell
à	à	 
.
à	à	 
	MouseDown
à	à	 "
-=
à	à	# %.
 PlacePieceThatIsInGame_MouseDown
à	à	& F
;
à	à	F G
}
á	á	 
}
â	â	 
foreach
ã	ã	 
(
ã	ã	 
var
ã	ã	 
cell
ã	ã	 
in
ã	ã	  
_cellDictionary
ã	ã	! 0
)
ã	ã	0 1
{
ä	ä	 
cell
å	å	 
.
å	å	 
Value
å	å	 
.
å	å	 
	IsEnabled
å	å	 $
=
å	å	% &
false
å	å	' ,
;
å	å	, -
}
æ	æ	 
foreach
ç	ç	 
(
ç	ç	 
	UIElement
ç	ç	 
element
ç	ç	 &
in
ç	ç	' )!
canva_GameBoardGrid
ç	ç	* =
.
ç	ç	= >
Children
ç	ç	> F
)
ç	ç	F G
{
è	è	 
if
é	é	 
(
é	é	 
element
é	é	 
is
é	é	 
Image
é	é	 $
image
é	é	% *
&&
é	é	+ -
image
é	é	. 3
.
é	é	3 4
Tag
é	é	4 7
is
é	é	8 :
Logic
é	é	; @
.
é	é	@ A
	GamePiece
é	é	A J
	gamePiece
é	é	K T
&&
é	é	U W
	gamePiece
é	é	X a
.
é	é	a b

PlayerName
é	é	b l
!=
é	é	m o#
UserProfileSingletoné	é	p 
.é	é	 
usernameé	é	 
)é	é	 
{
ê	ê	 
image
ë	ë	 
.
ë	ë	 
	IsEnabled
ë	ë	 #
=
ë	ë	$ %
false
ë	ë	& +
;
ë	ë	+ ,
image
ì	ì	 
.
ì	ì	 
	MouseDown
ì	ì	 #
-=
ì	ì	$ &%
PieceSelected_MouseDown
ì	ì	' >
;
ì	ì	> ?
}
í	í	 
}
î	î	 
}
ï	ï	 	
private
ñ	ñ	 
void
ñ	ñ	 
Image_MouseDown
ñ	ñ	 $
(
ñ	ñ	$ %
object
ñ	ñ	% +
sender
ñ	ñ	, 2
,
ñ	ñ	2 3"
MouseButtonEventArgs
ñ	ñ	4 H
e
ñ	ñ	I J
)
ñ	ñ	J K
{
ò	ò	 	
if
ó	ó	 
(
ó	ó	 
!
ó	ó	 
_IsMatchFinished
ó	ó	 !
)
ó	ó	! "
{
ô	ô	 
if
õ	õ	 
(
õ	õ	 
DialogManager
õ	õ	 !
.
õ	õ	! "*
ShowConfirmationMessageAlert
õ	õ	" >
(
õ	õ	> ?

Properties
õ	õ	? I
.
õ	õ	I J
	Resources
õ	õ	J S
.
õ	õ	S T1
#dialogManagerConfirmationLeaveMatch
õ	õ	T w
)
õ	õ	w x
)
õ	õ	x y
{
ö	ö	 
if
÷	÷	 
(
÷	÷	 "
UserProfileSingleton
÷	÷	 ,
.
÷	÷	, -
	idAccount
÷	÷	- 6
==
÷	÷	7 9
	Constants
÷	÷	: C
.
÷	÷	C D
DefaultGuestId
÷	÷	D R
)
÷	÷	R S
{
ø	ø	 #
DisconnectGuestPlayer
ù	ù	 -
(
ù	ù	- .
)
ù	ù	. /
;
ù	ù	/ 0
}
ú	ú	 
else
û	û	 
{
ü	ü	 $
DisconnectNormalPlayer
ý	ý	 .
(
ý	ý	. /
)
ý	ý	/ 0
;
ý	ý	0 1
}
þ	þ	 
}
ÿ	ÿ	 
}


 
else


 
{


 
	Constants


 
.


 
	IsInMatch


 #
=


$ %
false


& +
;


+ , 
LeaveFinishedMatch


 "
(


" #
)


# $
;


$ %
}


 
}


 	
private


 
void


  
LeaveFinishedMatch


 '
(


' (
)


( )
{


 	
if


 
(


 "
UserProfileSingleton


 $
.


$ %
	idAccount


% .
!=


/ 1
	Constants


2 ;
.


; <
DefaultGuestId


< J
)


J K
{


 
LeavePlayer


 
(


 
)


 
;


 
}


 
else


 
{


 
LeaveGuestPlayer


  
(


  !
)


! "
;


" #
}


 
}


 	
private


 
void


 
LeavePlayer


  
(


  !
)


! "
{


 	
LoggerManager


 
logger


  
=


! "
new


# &
LoggerManager


' 4
(


4 5
this


5 9
.


9 :
GetType


: A
(


A B
)


B C
)


C D
;


D E
try


 
{


 
UserSession


 
session


 #
=


$ %
new


& )
UserSession


* 5
(


5 6
)


6 7
{


 
	idAccount


 
=


 "
UserProfileSingleton


  4
.


4 5
	idAccount


5 >
,


> ?
username


 
=


 "
UserProfileSingleton


 3
.


3 4
username


4 <
,


< =
	codeMatch


 
=


 
MatchSingleton


  .
.


. /
	codeMatch


/ 8
,


8 9
}


 
;


  
_gameManagerClient
 
 
 "
.
 
 
" # 
LeaveMatchFinished
 
 
# 5
(
 
 
5 6
session
 
 
6 =
.
 
 
= >
	codeMatch
 
 
> G
,
 
 
G H
session
 
 
I P
)
 
 
P Q
;
 
 
Q R
GoToMainView
¡
¡
 
(
¡
¡
 
)
¡
¡
 
;
¡
¡
 
}
¢
¢
 
catch
£
£
 
(
£
£
 '
EndpointNotFoundException
£
£
 ,
endPointException
£
£
- >
)
£
£
> ?
{
¤
¤
 
logger
¥
¥
 
.
¥
¥
 
LogFatal
¥
¥
 
(
¥
¥
  
endPointException
¥
¥
  1
)
¥
¥
1 2
;
¥
¥
2 3
DialogManager
¦
¦
 
.
¦
¦
 #
ShowErrorMessageAlert
¦
¦
 3
(
¦
¦
3 4

Properties
¦
¦
4 >
.
¦
¦
> ?
	Resources
¦
¦
? H
.
¦
¦
H I%
dialogEndPointException
¦
¦
I `
)
¦
¦
` a
;
¦
¦
a b
ReturnToLoginView
§
§
 !
(
§
§
! "
)
§
§
" #
;
§
§
# $
}
¨
¨
 
catch
©
©
 
(
©
©
 
TimeoutException
©
©
 #
timeOutException
©
©
$ 4
)
©
©
4 5
{
ª
ª
 
logger
«
«
 
.
«
«
 
LogWarn
«
«
 
(
«
«
 
timeOutException
«
«
 /
)
«
«
/ 0
;
«
«
0 1
DialogManager
¬
¬
 
.
¬
¬
 #
ShowErrorMessageAlert
¬
¬
 3
(
¬
¬
3 4

Properties
¬
¬
4 >
.
¬
¬
> ?
	Resources
¬
¬
? H
.
¬
¬
H I$
dialogTimeOutException
¬
¬
I _
)
¬
¬
_ `
;
¬
¬
` a
}
­
­
 
catch
®
®
 
(
®
®
 $
CommunicationException
®
®
 )$
communicationException
®
®
* @
)
®
®
@ A
{
¯
¯
 
logger
°
°
 
.
°
°
 
LogFatal
°
°
 
(
°
°
  $
communicationException
°
°
  6
)
°
°
6 7
;
°
°
7 8
DialogManager
±
±
 
.
±
±
 #
ShowErrorMessageAlert
±
±
 3
(
±
±
3 4

Properties
±
±
4 >
.
±
±
> ?
	Resources
±
±
? H
.
±
±
H I)
dialogComunicationException
±
±
I d
)
±
±
d e
;
±
±
e f
ReturnToLoginView
²
²
 !
(
²
²
! "
)
²
²
" #
;
²
²
# $
}
³
³
 
}
´
´
 	
private
¶
¶
 
void
¶
¶
 
LeaveGuestPlayer
¶
¶
 %
(
¶
¶
% &
)
¶
¶
& '
{
·
·
 	
LoggerManager
¸
¸
 
logger
¸
¸
  
=
¸
¸
! "
new
¸
¸
# &
LoggerManager
¸
¸
' 4
(
¸
¸
4 5
this
¸
¸
5 9
.
¸
¸
9 :
GetType
¸
¸
: A
(
¸
¸
A B
)
¸
¸
B C
)
¸
¸
C D
;
¸
¸
D E
try
¹
¹
 
{
º
º
 
	HiveProxy
»
»
 
.
»
»
 &
UserSessionManagerClient
»
»
 2&
userSessionManagerClient
»
»
3 K
=
»
»
L M
new
»
»
N Q&
UserSessionManagerClient
»
»
R j
(
»
»
j k
)
»
»
k l
;
»
»
l m
UserSession
¼
¼
 
session
¼
¼
 #
=
¼
¼
$ %
new
¼
¼
& )
UserSession
¼
¼
* 5
(
¼
¼
5 6
)
¼
¼
6 7
{
½
½
 
	idAccount
¾
¾
 
=
¾
¾
 "
UserProfileSingleton
¾
¾
  4
.
¾
¾
4 5
	idAccount
¾
¾
5 >
,
¾
¾
> ?
username
¿
¿
 
=
¿
¿
 "
UserProfileSingleton
¿
¿
 3
.
¿
¿
3 4
username
¿
¿
4 <
,
¿
¿
< =
	codeMatch
À
À
 
=
À
À
 
MatchSingleton
À
À
  .
.
À
À
. /
	codeMatch
À
À
/ 8
,
À
À
8 9
}
Á
Á
 
;
Á
Á
  
_gameManagerClient
Â
Â
 "
.
Â
Â
" # 
LeaveMatchFinished
Â
Â
# 5
(
Â
Â
5 6
session
Â
Â
6 =
.
Â
Â
= >
	codeMatch
Â
Â
> G
,
Â
Â
G H
session
Â
Â
I P
)
Â
Â
P Q
;
Â
Â
Q R&
userSessionManagerClient
Ã
Ã
 (
.
Ã
Ã
( )

Disconnect
Ã
Ã
) 3
(
Ã
Ã
3 4
session
Ã
Ã
4 ;
,
Ã
Ã
; <
false
Ã
Ã
= B
)
Ã
Ã
B C
;
Ã
Ã
C D
ReturnToLoginView
Ä
Ä
 !
(
Ä
Ä
! "
)
Ä
Ä
" #
;
Ä
Ä
# $
}
Å
Å
 
catch
Æ
Æ
 
(
Æ
Æ
 '
EndpointNotFoundException
Æ
Æ
 ,
endPointException
Æ
Æ
- >
)
Æ
Æ
> ?
{
Ç
Ç
 
logger
È
È
 
.
È
È
 
LogFatal
È
È
 
(
È
È
  
endPointException
È
È
  1
)
È
È
1 2
;
È
È
2 3
DialogManager
É
É
 
.
É
É
 #
ShowErrorMessageAlert
É
É
 3
(
É
É
3 4

Properties
É
É
4 >
.
É
É
> ?
	Resources
É
É
? H
.
É
É
H I%
dialogEndPointException
É
É
I `
)
É
É
` a
;
É
É
a b
ReturnToLoginView
Ê
Ê
 !
(
Ê
Ê
! "
)
Ê
Ê
" #
;
Ê
Ê
# $
}
Ë
Ë
 
catch
Ì
Ì
 
(
Ì
Ì
 
TimeoutException
Ì
Ì
 #
timeOutException
Ì
Ì
$ 4
)
Ì
Ì
4 5
{
Í
Í
 
logger
Î
Î
 
.
Î
Î
 
LogWarn
Î
Î
 
(
Î
Î
 
timeOutException
Î
Î
 /
)
Î
Î
/ 0
;
Î
Î
0 1
DialogManager
Ï
Ï
 
.
Ï
Ï
 #
ShowErrorMessageAlert
Ï
Ï
 3
(
Ï
Ï
3 4

Properties
Ï
Ï
4 >
.
Ï
Ï
> ?
	Resources
Ï
Ï
? H
.
Ï
Ï
H I$
dialogTimeOutException
Ï
Ï
I _
)
Ï
Ï
_ `
;
Ï
Ï
` a
}
Ð
Ð
 
catch
Ñ
Ñ
 
(
Ñ
Ñ
 $
CommunicationException
Ñ
Ñ
 )$
communicationException
Ñ
Ñ
* @
)
Ñ
Ñ
@ A
{
Ò
Ò
 
logger
Ó
Ó
 
.
Ó
Ó
 
LogFatal
Ó
Ó
 
(
Ó
Ó
  $
communicationException
Ó
Ó
  6
)
Ó
Ó
6 7
;
Ó
Ó
7 8
DialogManager
Ô
Ô
 
.
Ô
Ô
 #
ShowErrorMessageAlert
Ô
Ô
 3
(
Ô
Ô
3 4

Properties
Ô
Ô
4 >
.
Ô
Ô
> ?
	Resources
Ô
Ô
? H
.
Ô
Ô
H I)
dialogComunicationException
Ô
Ô
I d
)
Ô
Ô
d e
;
Ô
Ô
e f
ReturnToLoginView
Õ
Õ
 !
(
Õ
Õ
! "
)
Õ
Õ
" #
;
Õ
Õ
# $
}
Ö
Ö
 
}
×
×
 	
private
Ù
Ù
 
void
Ù
Ù
 #
DisconnectGuestPlayer
Ù
Ù
 *
(
Ù
Ù
* +
)
Ù
Ù
+ ,
{
Ú
Ú
 	
LoggerManager
Û
Û
 
logger
Û
Û
  
=
Û
Û
! "
new
Û
Û
# &
LoggerManager
Û
Û
' 4
(
Û
Û
4 5
this
Û
Û
5 9
.
Û
Û
9 :
GetType
Û
Û
: A
(
Û
Û
A B
)
Û
Û
B C
)
Û
Û
C D
;
Û
Û
D E
try
Ü
Ü
 
{
Ý
Ý
 
	HiveProxy
Þ
Þ
 
.
Þ
Þ
 &
UserSessionManagerClient
Þ
Þ
 2&
userSessionManagerClient
Þ
Þ
3 K
=
Þ
Þ
L M
new
Þ
Þ
N Q&
UserSessionManagerClient
Þ
Þ
R j
(
Þ
Þ
j k
)
Þ
Þ
k l
;
Þ
Þ
l m
UserSession
ß
ß
 
session
ß
ß
 #
=
ß
ß
$ %
new
ß
ß
& )
UserSession
ß
ß
* 5
(
ß
ß
5 6
)
ß
ß
6 7
{
à
à
 
	idAccount
á
á
 
=
á
á
 "
UserProfileSingleton
á
á
  4
.
á
á
4 5
	idAccount
á
á
5 >
,
á
á
> ?
username
â
â
 
=
â
â
 "
UserProfileSingleton
â
â
 3
.
â
â
3 4
username
â
â
4 <
,
â
â
< =
	codeMatch
ã
ã
 
=
ã
ã
 
MatchSingleton
ã
ã
  .
.
ã
ã
. /
	codeMatch
ã
ã
/ 8
,
ã
ã
8 9
}
ä
ä
 
;
ä
ä
  
_gameManagerClient
å
å
 "
.
å
å
" #
LeaveTheGame
å
å
# /
(
å
å
/ 0
session
å
å
0 7
,
å
å
7 8
session
å
å
9 @
.
å
å
@ A
	codeMatch
å
å
A J
)
å
å
J K
;
å
å
K L&
userSessionManagerClient
æ
æ
 (
.
æ
æ
( )

Disconnect
æ
æ
) 3
(
æ
æ
3 4
session
æ
æ
4 ;
,
æ
æ
; <
false
æ
æ
= B
)
æ
æ
B C
;
æ
æ
C D
ReturnToLoginView
ç
ç
 !
(
ç
ç
! "
)
ç
ç
" #
;
ç
ç
# $
}
è
è
 
catch
é
é
 
(
é
é
 '
EndpointNotFoundException
é
é
 ,
endPointException
é
é
- >
)
é
é
> ?
{
ê
ê
 
logger
ë
ë
 
.
ë
ë
 
LogFatal
ë
ë
 
(
ë
ë
  
endPointException
ë
ë
  1
)
ë
ë
1 2
;
ë
ë
2 3
DialogManager
ì
ì
 
.
ì
ì
 #
ShowErrorMessageAlert
ì
ì
 3
(
ì
ì
3 4

Properties
ì
ì
4 >
.
ì
ì
> ?
	Resources
ì
ì
? H
.
ì
ì
H I%
dialogEndPointException
ì
ì
I `
)
ì
ì
` a
;
ì
ì
a b
ReturnToLoginView
í
í
 !
(
í
í
! "
)
í
í
" #
;
í
í
# $
}
î
î
 
catch
ï
ï
 
(
ï
ï
 
TimeoutException
ï
ï
 #
timeOutException
ï
ï
$ 4
)
ï
ï
4 5
{
ð
ð
 
logger
ñ
ñ
 
.
ñ
ñ
 
LogWarn
ñ
ñ
 
(
ñ
ñ
 
timeOutException
ñ
ñ
 /
)
ñ
ñ
/ 0
;
ñ
ñ
0 1
DialogManager
ò
ò
 
.
ò
ò
 #
ShowErrorMessageAlert
ò
ò
 3
(
ò
ò
3 4

Properties
ò
ò
4 >
.
ò
ò
> ?
	Resources
ò
ò
? H
.
ò
ò
H I$
dialogTimeOutException
ò
ò
I _
)
ò
ò
_ `
;
ò
ò
` a
}
ó
ó
 
catch
ô
ô
 
(
ô
ô
 $
CommunicationException
ô
ô
 )$
communicationException
ô
ô
* @
)
ô
ô
@ A
{
õ
õ
 
logger
ö
ö
 
.
ö
ö
 
LogFatal
ö
ö
 
(
ö
ö
  $
communicationException
ö
ö
  6
)
ö
ö
6 7
;
ö
ö
7 8
DialogManager
÷
÷
 
.
÷
÷
 #
ShowErrorMessageAlert
÷
÷
 3
(
÷
÷
3 4

Properties
÷
÷
4 >
.
÷
÷
> ?
	Resources
÷
÷
? H
.
÷
÷
H I)
dialogComunicationException
÷
÷
I d
)
÷
÷
d e
;
÷
÷
e f
ReturnToLoginView
ø
ø
 !
(
ø
ø
! "
)
ø
ø
" #
;
ø
ø
# $
}
ù
ù
 
}
ú
ú
 	
private
ü
ü
 
void
ü
ü
 $
DisconnectNormalPlayer
ü
ü
 +
(
ü
ü
+ ,
)
ü
ü
, -
{
ý
ý
 	
LoggerManager
þ
þ
 
logger
þ
þ
  
=
þ
þ
! "
new
þ
þ
# &
LoggerManager
þ
þ
' 4
(
þ
þ
4 5
this
þ
þ
5 9
.
þ
þ
9 :
GetType
þ
þ
: A
(
þ
þ
A B
)
þ
þ
B C
)
þ
þ
C D
;
þ
þ
D E
try
ÿ
ÿ
 
{
 
	HiveProxy
 
.
 
UserManagerClient
 +
userManagerClient
, =
=
> ?
new
@ C
UserManagerClient
D U
(
U V
)
V W
;
W X
	HiveProxy
 
.
 &
LeaderBoardManagerClient
 2&
leaderBoardManagerClient
3 K
=
L M
new
N Q&
LeaderBoardManagerClient
R j
(
j k
)
k l
;
l m
int
  
resultModification
 &
=
' (
userManagerClient
) :
.
: ;'
UpdateMinusUserReputation
; T
(
T U"
UserProfileSingleton
U i
.
i j
username
j r
,
r s
$num
t w
)
w x
;
x y
if
 
(
  
resultModification
 &
==
' )
	Constants
* 3
.
3 4
SuccesOperation
4 C
)
C D
{
 &
leaderBoardManagerClient
 ,
.
, -2
$UpdateLoserResultToPlayerLeaderBoard
- Q
(
Q R"
UserProfileSingleton
R f
.
f g
	idAccount
g p
)
p q
;
q r
UserSession
 
session
  '
=
( )
new
* -
UserSession
. 9
(
9 :
)
: ;
{
 
	idAccount
 !
=
" #"
UserProfileSingleton
$ 8
.
8 9
	idAccount
9 B
,
B C
username
  
=
! ""
UserProfileSingleton
# 7
.
7 8
username
8 @
,
@ A
	codeMatch
 !
=
" #
MatchSingleton
$ 2
.
2 3
	codeMatch
3 <
,
< =
}
 
;
  
_gameManagerClient
 &
.
& '
LeaveTheGame
' 3
(
3 4
session
4 ;
,
; <
session
= D
.
D E
	codeMatch
E N
)
N O
;
O P
GoToMainView
  
(
  !
)
! "
;
" #
}
 
else
 
if
 
(
  
resultModification
 +
==
, .
	Constants
/ 8
.
8 9
ErrorOperation
9 G
)
G H
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M!
dialogDataBaseError
M `
)
` a
;
a b
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
ReturnToLoginView
 !
(
! "
)
" #
;
# $
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
   
(
   $
CommunicationException
   )$
communicationException
  * @
)
  @ A
{
¡¡ 
logger
¢¢ 
.
¢¢ 
LogFatal
¢¢ 
(
¢¢  $
communicationException
¢¢  6
)
¢¢6 7
;
¢¢7 8
DialogManager
££ 
.
££ #
ShowErrorMessageAlert
££ 3
(
££3 4

Properties
££4 >
.
££> ?
	Resources
££? H
.
££H I)
dialogComunicationException
££I d
)
££d e
;
££e f
ReturnToLoginView
¤¤ !
(
¤¤! "
)
¤¤" #
;
¤¤# $
}
¥¥ 
}
¦¦ 	
private
§§ 
void
§§ 
GoToMainView
§§ !
(
§§! "
)
§§" #
{
¨¨ 	
MatchSingleton
©© 
.
©© 
Instance
©© #
.
©©# $
ResetSingleton
©©$ 2
(
©©2 3
)
©©3 4
;
©©4 5
MainMenu
ªª 
mainMenu
ªª 
=
ªª 
new
ªª  #
MainMenu
ªª$ ,
(
ªª, -
)
ªª- .
;
ªª. /
this
«« 
.
«« 
NavigationService
«« "
.
««" #
Navigate
««# +
(
««+ ,
mainMenu
««, 4
)
««4 5
;
««5 6
}
¬¬ 	
public
®® 
void
®® #
ChargePlayerGameBoard
®® )
(
®®) *

PlayerSide
®®* 4
side
®®5 9
)
®®9 :
{
¯¯ 	
if
°° 
(
°° 
side
°° 
.
°° 
	playerOne
°° 
)
°° 
{
±± 
	DockPanel
²² 
.
²² 
SetDock
²² !
(
²²! "
stckp_Player1
²²" /
,
²²/ 0
Dock
²²0 4
.
²²4 5
Bottom
²²5 ;
)
²²; <
;
²²< =
	DockPanel
³³ 
.
³³ 
SetDock
³³ !
(
³³! "
stckp_Player2
³³" /
,
³³/ 0
Dock
³³1 5
.
³³5 6
Top
³³6 9
)
³³9 :
;
³³: ;
img_ProfilePic1
´´ 
.
´´  
Source
´´  &
=
´´' (
new
´´) ,
BitmapImage
´´- 8
(
´´8 9
new
´´9 <
Uri
´´= @
(
´´@ A"
UserProfileSingleton
´´A U
.
´´U V

imageRoute
´´V `
,
´´` a
UriKind
´´b i
.
´´i j
Relative
´´j r
)
´´r s
)
´´s t
;
´´t u"
txtBlock_PlayerName1
µµ $
.
µµ$ %
Text
µµ% )
=
µµ* +"
UserProfileSingleton
µµ, @
.
µµ@ A
username
µµA I
;
µµI J
stckp_Player2
¶¶ 
.
¶¶ 
	IsEnabled
¶¶ '
=
¶¶( )
false
¶¶* /
;
¶¶/ 0
_numberOfPlayer
·· 
=
··  !
$num
··" #
;
··# $
}
¸¸ 
else
¹¹ 
if
¹¹ 
(
¹¹ 
side
¹¹ 
.
¹¹ 
	playerTwo
¹¹ #
)
¹¹# $
{
ºº 
	DockPanel
»» 
.
»» 
SetDock
»» !
(
»»! "
stckp_Player2
»»" /
,
»»/ 0
Dock
»»0 4
.
»»4 5
Bottom
»»5 ;
)
»»; <
;
»»< =
	DockPanel
¼¼ 
.
¼¼ 
SetDock
¼¼ !
(
¼¼! "
stckp_Player1
¼¼" /
,
¼¼/ 0
Dock
¼¼0 4
.
¼¼4 5
Top
¼¼5 8
)
¼¼8 9
;
¼¼9 :
stckp_Player1
½½ 
.
½½ 
	IsEnabled
½½ '
=
½½( )
false
½½* /
;
½½/ 0
img_ProfilePic2
¾¾ 
.
¾¾  
Source
¾¾  &
=
¾¾' (
new
¾¾) ,
BitmapImage
¾¾- 8
(
¾¾8 9
new
¾¾9 <
Uri
¾¾= @
(
¾¾@ A"
UserProfileSingleton
¾¾A U
.
¾¾U V

imageRoute
¾¾V `
,
¾¾` a
UriKind
¾¾b i
.
¾¾i j
Relative
¾¾j r
)
¾¾r s
)
¾¾s t
;
¾¾t u"
txtBlock_PlayerName2
¿¿ $
.
¿¿$ %
Text
¿¿% )
=
¿¿* +"
UserProfileSingleton
¿¿, @
.
¿¿@ A
username
¿¿A I
;
¿¿I J
_numberOfPlayer
ÀÀ 
=
ÀÀ  !
$num
ÀÀ" #
;
ÀÀ# $
}
ÁÁ 
	DockPanel
ÂÂ 
	dockPanel
ÂÂ 
=
ÂÂ  !
(
ÂÂ" #
	DockPanel
ÂÂ# ,
)
ÂÂ, -
this
ÂÂ- 1
.
ÂÂ1 2
Content
ÂÂ2 9
;
ÂÂ9 :
	dockPanel
ÃÃ 
.
ÃÃ 
UpdateLayout
ÃÃ "
(
ÃÃ" #
)
ÃÃ# $
;
ÃÃ$ %
}
ÄÄ 	
public
ÇÇ 
void
ÇÇ 
ReceivePieceMoved
ÇÇ %
(
ÇÇ% &
	HiveProxy
ÇÇ& /
.
ÇÇ/ 0
GamePice
ÇÇ0 8
piece
ÇÇ9 >
)
ÇÇ> ?
{
ÈÈ 	"
_hasOtherPlayerMoved
ÉÉ  
=
ÉÉ! "
true
ÉÉ# '
;
ÉÉ' ("
StopTurnTimeoutTimer
ÊÊ  
(
ÊÊ  !
)
ÊÊ! "
;
ÊÊ" #
if
ËË 
(
ËË 
piece
ËË 
!=
ËË 
null
ËË 
)
ËË 
{
ÌÌ 
Logic
ÍÍ 
.
ÍÍ 
Piece
ÍÍ 
pieceReceived
ÍÍ )
=
ÍÍ* +%
CreateConcretePieceType
ÍÍ, C
(
ÍÍC D
piece
ÍÍD I
)
ÍÍI J
;
ÍÍJ K
Logic
ÎÎ 
.
ÎÎ 
	GamePiece
ÎÎ 
gamePieceReceived
ÎÎ  1
=
ÎÎ2 3
new
ÎÎ4 7
Logic
ÎÎ8 =
.
ÎÎ= >
	GamePiece
ÎÎ> G
(
ÎÎG H
)
ÎÎH I
{
ÏÏ 
Piece
ÐÐ 
=
ÐÐ 
pieceReceived
ÐÐ )
,
ÐÐ) *

PlayerName
ÑÑ 
=
ÑÑ  
piece
ÑÑ! &
.
ÑÑ& '

playerName
ÑÑ' 1
,
ÑÑ1 2
Position
ÒÒ 
=
ÒÒ 
piece
ÒÒ $
.
ÒÒ$ %
position
ÒÒ% -
,
ÒÒ- .
	ImagePath
ÓÓ 
=
ÓÓ 
piece
ÓÓ  %
.
ÓÓ% &
	imagePath
ÓÓ& /
,
ÓÓ/ 0
PieceNumber
ÔÔ 
=
ÔÔ  !
piece
ÔÔ" '
.
ÔÔ' (
numberOfPiece
ÔÔ( 5
,
ÔÔ5 6
}
ÕÕ 
;
ÕÕ 
gamePieceReceived
ÖÖ !
.
ÖÖ! "
Piece
ÖÖ" '
.
ÖÖ' (
Position
ÖÖ( 0
=
ÖÖ1 2
piece
ÖÖ3 8
.
ÖÖ8 9
piece
ÖÖ9 >
.
ÖÖ> ?
position
ÖÖ? G
;
ÖÖG H
	GamePiece
×× 

pieceToAdd
×× $
=
××% &
gamePieceReceived
××' 8
;
××8 9
Point
ØØ 
pointOfPieceToAdd
ØØ '
=
ØØ( )
gamePieceReceived
ØØ* ;
.
ØØ; <
Position
ØØ< D
;
ØØD E
Point
ÙÙ $
previousPositionPlaced
ÙÙ ,
=
ÙÙ- .
gamePieceReceived
ÙÙ/ @
.
ÙÙ@ A
Piece
ÙÙA F
.
ÙÙF G
Position
ÙÙG O
;
ÙÙO P4
&RemovePieceReceiveFromPlayerStackPanel
ÚÚ 6
(
ÚÚ6 7
gamePieceReceived
ÚÚ7 H
)
ÚÚH I
;
ÚÚI J

pieceToAdd
ÛÛ 
.
ÛÛ 
Position
ÛÛ #
=
ÛÛ$ %
pointOfPieceToAdd
ÛÛ& 7
;
ÛÛ7 8

pieceToAdd
ÜÜ 
.
ÜÜ 
Piece
ÜÜ  
.
ÜÜ  !
Position
ÜÜ! )
=
ÜÜ* +$
previousPositionPlaced
ÜÜ, B
;
ÜÜB C(
UpdatePiecePositionOnBoard
ÝÝ *
(
ÝÝ* +

pieceToAdd
ÝÝ+ 5
)
ÝÝ5 6
;
ÝÝ6 7
}
ÞÞ 
}
ßß 	
private
áá 
static
áá 
Logic
áá 
.
áá 
Piece
áá "%
CreateConcretePieceType
áá# :
(
áá: ;
	HiveProxy
áá; D
.
ááD E
GamePice
ááE M
piece
ááN S
)
ááS T
{
ââ 	
Logic
ãã 
.
ãã 
Piece
ãã 
pieceObtained
ãã %
=
ãã& '
null
ãã( ,
;
ãã, -
string
ää 
typeOfPiece
ää 
=
ää  
piece
ää! &
.
ää& '
piece
ää' ,
.
ää, -
name
ää- 1
;
ää1 2
switch
åå 
(
åå 
typeOfPiece
åå 
)
åå  
{
ææ 
case
çç 
_QueenPieceName
çç $
:
çç$ %
pieceObtained
èè !
=
èè" #
new
èè$ '
Queen
èè( -
(
èè- .
)
èè. /
;
èè/ 0
break
éé 
;
éé 
case
êê 
$str
êê 
:
êê 
pieceObtained
ëë !
=
ëë" #
new
ëë$ '
Spider
ëë( .
(
ëë. /
)
ëë/ 0
;
ëë0 1
break
ìì 
;
ìì 
case
íí 
BeetlePieceName
íí $
:
íí$ %
pieceObtained
îî !
=
îî" #
new
îî$ '
Beetle
îî( .
(
îî. /
)
îî/ 0
;
îî0 1
break
ïï 
;
ïï 
case
ðð 
$str
ðð 
:
ðð 
pieceObtained
ññ !
=
ññ" #
new
ññ$ '
Ant
ññ( +
(
ññ+ ,
)
ññ, -
;
ññ- .
break
òò 
;
òò 
case
óó 
$str
óó "
:
óó" #
pieceObtained
ôô !
=
ôô" #
new
ôô$ '
Grasshopper
ôô( 3
(
ôô3 4
)
ôô4 5
;
ôô5 6
break
õõ 
;
õõ 
}
öö 
pieceObtained
÷÷ 
.
÷÷ 

PlayerName
÷÷ $
=
÷÷% &
piece
÷÷' ,
.
÷÷, -

playerName
÷÷- 7
;
÷÷7 8
return
øø 
pieceObtained
øø  
;
øø  !
}
ùù 	
private
ûû 
void
ûû 4
&RemovePieceReceiveFromPlayerStackPanel
ûû ;
(
ûû; <
	GamePiece
ûû< E
piece
ûûF K
)
ûûK L
{
üü 	
	GamePiece
ýý 
pieceAuxiliar
ýý #
=
ýý$ %
piece
ýý& +
;
ýý+ ,
pieceAuxiliar
þþ 
.
þþ 
Position
þþ "
=
þþ# $
new
þþ% (
Point
þþ) .
(
þþ. /
-
þþ/ 0
$num
þþ0 1
,
þþ1 2
-
þþ3 4
$num
þþ4 5
)
þþ5 6
;
þþ6 7
if
ÿÿ 
(
ÿÿ 
_player1Pieces
ÿÿ 
.
ÿÿ 
Contains
ÿÿ '
(
ÿÿ' (
pieceAuxiliar
ÿÿ( 5
)
ÿÿ5 6
)
ÿÿ6 7
{
 
foreach
 
(
 
var
 
child
 "
in
# %!
stckp_Player1Pieces
& 9
.
9 :
Children
: B
.
B C
OfType
C I
<
I J
Image
J O
>
O P
(
P Q
)
Q R
)
R S
{
 
if
 
(
 
child
 
.
 
Tag
 !
is
" $
	GamePiece
% .
tagPiece
/ 7
&&
8 :
tagPiece
; C
.
C D
PieceNumber
D O
==
P R
pieceAuxiliar
S `
.
` a
PieceNumber
a l
&&
m o
tagPiece
p x
.
x y

PlayerNamey 
== 
piece 
. 

PlayerName 
) 
{
 !
stckp_Player1Pieces
 +
.
+ ,
Children
, 4
.
4 5
Remove
5 ;
(
; <
child
< A
)
A B
;
B C
break
 
;
 
}
 
}
 
}
 
else
 
if
 
(
 
_player2Pieces
 #
.
# $
Contains
$ ,
(
, -
pieceAuxiliar
- :
)
: ;
)
; <
{
 
foreach
 
(
 
var
 
child
 "
in
# %!
stckp_Player2Pieces
& 9
.
9 :
Children
: B
.
B C
OfType
C I
<
I J
Image
J O
>
O P
(
P Q
)
Q R
)
R S
{
 
if
 
(
 
child
 
.
 
Tag
 !
is
" $
	GamePiece
% .
tagPiece
/ 7
&&
8 :
tagPiece
; C
.
C D
PieceNumber
D O
==
P R
pieceAuxiliar
S `
.
` a
PieceNumber
a l
&&
m o
tagPiece
p x
.
x y

PlayerNamey 
== 
piece 
. 

PlayerName 
) 
{
 !
stckp_Player2Pieces
 +
.
+ ,
Children
, 4
.
4 5
Remove
5 ;
(
; <
child
< A
)
A B
;
B C
break
 
;
 
}
 
}
 
}
 
}
 	
private
 
void
 *
UpdateBeetleOnAPieceReceived
 1
(
1 2
	GamePiece
2 ;
piece
< A
,
A B
Image
C H 
imageOfPieceToSafe
I [
)
[ \
{
 	
	GamePiece
 
pieceToKeepSafe
 %
=
& ' 
imageOfPieceToSafe
( :
.
: ;
Tag
; >
as
? A
	GamePiece
B K
;
K L
List
 
<
 
Image
 
>
 
imagesOfPieces
 &
=
' (!
canva_GameBoardGrid
) <
.
< =
Children
= E
.
E F
OfType
F L
<
L M
Image
M R
>
R S
(
S T
)
T U
.
U V
ToList
V \
(
\ ]
)
] ^
;
^ _
Image
  
imageWhereBeetleIs
 $
=
% &
new
' *
Image
+ 0
(
0 1
)
1 2
;
2 3
foreach
 
(
 
var
 
imageOnBeetle
 &
in
' )
imagesOfPieces
* 8
)
8 9
{
 
	GamePiece
 
beetlePiece
 %
=
& '
imageOnBeetle
( 5
.
5 6
Tag
6 9
as
: <
	GamePiece
= F
;
F G
if
 
(
 
beetlePiece
 
.
  
PieceNumber
  +
==
, .
piece
/ 4
.
4 5
PieceNumber
5 @
&&
A C
beetlePiece
D O
.
O P

PlayerName
P Z
==
[ ]
piece
^ c
.
c d

PlayerName
d n
)
n o
{
    
imageWhereBeetleIs
¡¡ &
=
¡¡' (
imageOnBeetle
¡¡) 6
;
¡¡6 7
break
¢¢ 
;
¢¢ 
}
££ 
}
¤¤ 
if
¥¥ 
(
¥¥ (
_piecesCapturedByTheBeetle
¥¥ *
.
¥¥* +
ContainsKey
¥¥+ 6
(
¥¥6 7
(
¥¥7 8
piece
¥¥8 =
.
¥¥= >
PieceNumber
¥¥> I
,
¥¥I J
piece
¥¥K P
.
¥¥P Q

PlayerName
¥¥Q [
)
¥¥[ \
)
¥¥\ ]
)
¥¥] ^
{
¦¦ =
/RestoreOriginalPieceCapturedByTheBeetleReceived
§§ ?
(
§§? @ 
imageWhereBeetleIs
§§@ R
,
§§R S
piece
§§T Y
)
§§Y Z
;
§§Z [
}
¨¨ 
else
©© 
{
ªª /
!PieceToReplaceByTheBeetleReceived
«« 1
(
««1 2
piece
««2 7
,
««7 8
pieceToKeepSafe
««9 H
,
««H I 
imageWhereBeetleIs
««J \
)
««\ ]
;
««] ^
}
¬¬ (
RemoveExistingPieceInBoard
­­ &
(
­­& '
piece
­­' ,
)
­­, -
;
­­- .(
_piecesCapturedByTheBeetle
®® &
.
®®& '
Add
®®' *
(
®®* +
(
®®+ ,
piece
®®, 1
.
®®1 2
PieceNumber
®®2 =
,
®®= >
piece
®®? D
.
®®D E

PlayerName
®®E O
)
®®O P
,
®®P Q 
imageOfPieceToSafe
®®R d
)
®®d e
;
®®e f
Polygon
¯¯ 
cellOfPieceToSafe
¯¯ %
=
¯¯& '
_cellDictionary
¯¯( 7
[
¯¯7 8
pieceToKeepSafe
¯¯8 G
.
¯¯G H
Position
¯¯H P
]
¯¯P Q
;
¯¯Q R8
*UpdateGameboardOfBeetlePieceReceivedToGrid
°° 6
(
°°6 7
cellOfPieceToSafe
°°7 H
,
°°H I
piece
°°J O
)
°°O P
;
°°P Q
}
±± 	
private
³³ 
void
³³ =
/RestoreOriginalPieceCapturedByTheBeetleReceived
³³ D
(
³³D E
Image
³³E J 
imageWhereBeetleIs
³³K ]
,
³³] ^
	GamePiece
³³_ h
beetlePiece
³³i t
)
³³t u
{
´´ 	
Image
µµ  
originalPieceImage
µµ $
=
µµ% &(
_piecesCapturedByTheBeetle
µµ' A
[
µµA B
(
µµB C
beetlePiece
µµC N
.
µµN O
PieceNumber
µµO Z
,
µµZ [
beetlePiece
µµ\ g
.
µµg h

PlayerName
µµh r
)
µµr s
]
µµs t
;
µµt u
	GamePiece
¶¶ 
originalPiece
¶¶ #
=
¶¶$ % 
originalPieceImage
¶¶& 8
.
¶¶8 9
Tag
¶¶9 <
as
¶¶= ?
	GamePiece
¶¶@ I
;
¶¶I J
_board
·· 
.
·· 
Remove
·· 
(
·· 
originalPiece
·· '
.
··' (
Position
··( 0
)
··0 1
;
··1 2
_board
¸¸ 
.
¸¸ 
Add
¸¸ 
(
¸¸ 
originalPiece
¸¸ $
.
¸¸$ %
Position
¸¸% -
,
¸¸- .
originalPiece
¸¸/ <
)
¸¸< =
;
¸¸= >
if
¹¹ 
(
¹¹ !
canva_GameBoardGrid
¹¹ #
.
¹¹# $
Children
¹¹$ ,
.
¹¹, -
Contains
¹¹- 5
(
¹¹5 6 
imageWhereBeetleIs
¹¹6 H
)
¹¹H I
)
¹¹I J
{
ºº 
List
»» 
<
»» 
	UIElement
»» 
>
»» 
childrenGrid
»»  ,
=
»»- .!
canva_GameBoardGrid
»»/ B
.
»»B C
Children
»»C K
.
»»K L
OfType
»»L R
<
»»R S
	UIElement
»»S \
>
»»\ ]
(
»»] ^
)
»»^ _
.
»»_ `
ToList
»»` f
(
»»f g
)
»»g h
;
»»h i
int
¼¼ !
indexToRemoveBeetle
¼¼ '
=
¼¼( )
childrenGrid
¼¼* 6
.
¼¼6 7
IndexOf
¼¼7 >
(
¼¼> ? 
imageWhereBeetleIs
¼¼? Q
)
¼¼Q R
;
¼¼R S!
canva_GameBoardGrid
½½ #
.
½½# $
Children
½½$ ,
.
½½, -
RemoveAt
½½- 5
(
½½5 6!
indexToRemoveBeetle
½½6 I
)
½½I J
;
½½J K
}
¾¾ 
if
¿¿ 
(
¿¿ !
canva_GameBoardGrid
¿¿ #
.
¿¿# $
Children
¿¿$ ,
.
¿¿, -
Contains
¿¿- 5
(
¿¿5 6 
originalPieceImage
¿¿6 H
)
¿¿H I
)
¿¿I J
{
ÀÀ 
List
ÁÁ 
<
ÁÁ 
	UIElement
ÁÁ 
>
ÁÁ "
childrenGridNewPiece
ÁÁ  4
=
ÁÁ5 6!
canva_GameBoardGrid
ÁÁ7 J
.
ÁÁJ K
Children
ÁÁK S
.
ÁÁS T
OfType
ÁÁT Z
<
ÁÁZ [
	UIElement
ÁÁ[ d
>
ÁÁd e
(
ÁÁe f
)
ÁÁf g
.
ÁÁg h
ToList
ÁÁh n
(
ÁÁn o
)
ÁÁo p
;
ÁÁp q
int
ÂÂ #
indexToRemoveNewPiece
ÂÂ )
=
ÂÂ* +"
childrenGridNewPiece
ÂÂ, @
.
ÂÂ@ A
IndexOf
ÂÂA H
(
ÂÂH I 
originalPieceImage
ÂÂI [
)
ÂÂ[ \
;
ÂÂ\ ]!
canva_GameBoardGrid
ÃÃ #
.
ÃÃ# $
Children
ÃÃ$ ,
.
ÃÃ, -
RemoveAt
ÃÃ- 5
(
ÃÃ5 6#
indexToRemoveNewPiece
ÃÃ6 K
)
ÃÃK L
;
ÃÃL M
}
ÄÄ !
canva_GameBoardGrid
ÅÅ 
.
ÅÅ  
Children
ÅÅ  (
.
ÅÅ( )
Add
ÅÅ) ,
(
ÅÅ, - 
originalPieceImage
ÅÅ- ?
)
ÅÅ? @
;
ÅÅ@ A(
_piecesCapturedByTheBeetle
ÆÆ &
.
ÆÆ& '
Remove
ÆÆ' -
(
ÆÆ- .
(
ÆÆ. /
beetlePiece
ÆÆ/ :
.
ÆÆ: ;
PieceNumber
ÆÆ; F
,
ÆÆF G
beetlePiece
ÆÆH S
.
ÆÆS T

PlayerName
ÆÆT ^
)
ÆÆ^ _
)
ÆÆ_ `
;
ÆÆ` a
}
ÇÇ 	
private
ÉÉ 
void
ÉÉ /
!PieceToReplaceByTheBeetleReceived
ÉÉ 6
(
ÉÉ6 7
	GamePiece
ÉÉ7 @
beetlePiece
ÉÉA L
,
ÉÉL M
	GamePiece
ÉÉN W
pieceToKeepSafe
ÉÉX g
,
ÉÉg h
Image
ÉÉi n!
imageWhereBeetleIsÉÉo 
)ÉÉ 
{
ÊÊ 	#
RemoveImageFromCanvas
ËË !
(
ËË! " 
imageWhereBeetleIs
ËË" 4
)
ËË4 5
;
ËË5 6+
RemoveImageForPieceToKeepSafe
ÌÌ )
(
ÌÌ) *
pieceToKeepSafe
ÌÌ* 9
)
ÌÌ9 :
;
ÌÌ: ;
UpdateBoard
ÍÍ 
(
ÍÍ 
beetlePiece
ÍÍ #
,
ÍÍ# $
pieceToKeepSafe
ÍÍ% 4
)
ÍÍ4 5
;
ÍÍ5 6
}
ÎÎ 	
private
ÐÐ 
void
ÐÐ #
RemoveImageFromCanvas
ÐÐ *
(
ÐÐ* +
Image
ÐÐ+ 0
imageToRemove
ÐÐ1 >
)
ÐÐ> ?
{
ÑÑ 	
var
ÒÒ 
childrenGrids
ÒÒ 
=
ÒÒ !
canva_GameBoardGrid
ÒÒ  3
.
ÒÒ3 4
Children
ÒÒ4 <
.
ÒÒ< =
OfType
ÒÒ= C
<
ÒÒC D
	UIElement
ÒÒD M
>
ÒÒM N
(
ÒÒN O
)
ÒÒO P
.
ÒÒP Q
ToList
ÒÒQ W
(
ÒÒW X
)
ÒÒX Y
;
ÒÒY Z
int
ÓÓ 
indexToRemove
ÓÓ 
=
ÓÓ 
childrenGrids
ÓÓ  -
.
ÓÓ- .
IndexOf
ÓÓ. 5
(
ÓÓ5 6
imageToRemove
ÓÓ6 C
)
ÓÓC D
;
ÓÓD E
if
ÔÔ 
(
ÔÔ 
indexToRemove
ÔÔ 
!=
ÔÔ  
-
ÔÔ! "
$num
ÔÔ" #
)
ÔÔ# $
{
ÕÕ !
canva_GameBoardGrid
ÖÖ #
.
ÖÖ# $
Children
ÖÖ$ ,
.
ÖÖ, -
RemoveAt
ÖÖ- 5
(
ÖÖ5 6
indexToRemove
ÖÖ6 C
)
ÖÖC D
;
ÖÖD E
}
×× 
}
ØØ 	
private
ÚÚ 
void
ÚÚ +
RemoveImageForPieceToKeepSafe
ÚÚ 2
(
ÚÚ2 3
	GamePiece
ÚÚ3 <
pieceToKeepSafe
ÚÚ= L
)
ÚÚL M
{
ÛÛ 	
foreach
ÜÜ 
(
ÜÜ 
	UIElement
ÜÜ 
child
ÜÜ $
in
ÜÜ% '!
canva_GameBoardGrid
ÜÜ( ;
.
ÜÜ; <
Children
ÜÜ< D
)
ÜÜD E
{
ÝÝ 
if
ÞÞ 
(
ÞÞ 
child
ÞÞ 
is
ÞÞ 
Image
ÞÞ "
image
ÞÞ# (
&&
ÞÞ) +
image
ÞÞ, 1
.
ÞÞ1 2
Tag
ÞÞ2 5
is
ÞÞ6 8
	GamePiece
ÞÞ9 B
piece
ÞÞC H
&&
ÞÞI K
IsMatchingPiece
ÞÞL [
(
ÞÞ[ \
piece
ÞÞ\ a
,
ÞÞa b
pieceToKeepSafe
ÞÞc r
)
ÞÞr s
)
ÞÞs t
{
ßß !
canva_GameBoardGrid
àà '
.
àà' (
Children
àà( 0
.
àà0 1
Remove
àà1 7
(
àà7 8
image
àà8 =
)
àà= >
;
àà> ?
break
áá 
;
áá 
}
ââ 
}
ãã 
}
ää 	
private
ææ 
static
ææ 
bool
ææ 
IsMatchingPiece
ææ +
(
ææ+ ,
	GamePiece
ææ, 5
piece
ææ6 ;
,
ææ; <
	GamePiece
ææ= F
pieceToKeepSafe
ææG V
)
ææV W
{
çç 	
return
èè 
piece
èè 
.
èè 
PieceNumber
èè $
==
èè% '
pieceToKeepSafe
èè( 7
.
èè7 8
PieceNumber
èè8 C
&&
èèD F
piece
éé 
.
éé 

PlayerName
éé #
==
éé$ &
pieceToKeepSafe
éé' 6
.
éé6 7

PlayerName
éé7 A
&&
ééB D
pieceToKeepSafe
êê "
.
êê" #
Position
êê# +
==
êê, .
piece
êê/ 4
.
êê4 5
Position
êê5 =
;
êê= >
}
ëë 	
private
íí 
void
íí 
UpdateBoard
íí  
(
íí  !
	GamePiece
íí! *
beetlePiece
íí+ 6
,
íí6 7
	GamePiece
íí8 A
pieceToKeepSafe
ííB Q
)
ííQ R
{
îî 	
_board
ïï 
.
ïï 
Remove
ïï 
(
ïï 
pieceToKeepSafe
ïï )
.
ïï) *
Position
ïï* 2
)
ïï2 3
;
ïï3 4
if
ðð 
(
ðð 
_board
ðð 
.
ðð 
ContainsKey
ðð "
(
ðð" #
beetlePiece
ðð# .
.
ðð. /
Position
ðð/ 7
)
ðð7 8
&&
ðð9 ;
_board
ðð< B
[
ððB C
beetlePiece
ððC N
.
ððN O
Position
ððO W
]
ððW X
==
ððY [
beetlePiece
ðð\ g
)
ððg h
{
ññ 
_board
òò 
.
òò 
Remove
òò 
(
òò 
beetlePiece
òò )
.
òò) *
Position
òò* 2
)
òò2 3
;
òò3 4
}
óó 
}
ôô 	
private
öö 
void
öö (
RemoveExistingPieceInBoard
öö /
(
öö/ 0
	GamePiece
öö0 9
piece
öö: ?
)
öö? @
{
÷÷ 	
if
øø 
(
øø 
_board
øø 
.
øø 
ContainsKey
øø "
(
øø" #
piece
øø# (
.
øø( )
Piece
øø) .
.
øø. /
Position
øø/ 7
)
øø7 8
&&
øø9 ;
_board
øø< B
[
øøB C
piece
øøC H
.
øøH I
Piece
øøI N
.
øøN O
Position
øøO W
]
øøW X
.
øøX Y
PieceNumber
øøY d
==
øøe g
piece
øøh m
.
øøm n
PieceNumber
øøn y
&&
øøz |
_boardøø} 
[øø 
pieceøø 
.øø 
Pieceøø 
.øø 
Positionøø 
]øø 
.øø 

PlayerNameøø ¤
==øø¥ §
pieceøø¨ ­
.øø­ ®

PlayerNameøø® ¸
)øø¸ ¹
{
ùù 
_board
úú 
.
úú 
Remove
úú 
(
úú 
piece
úú #
.
úú# $
Piece
úú$ )
.
úú) *
Position
úú* 2
)
úú2 3
;
úú3 4
}
ûû 
}
üü 	
private
þþ 
void
þþ 8
*UpdateGameboardOfBeetlePieceReceivedToGrid
þþ ?
(
þþ? @
Polygon
þþ@ G
cell
þþH L
,
þþL M
	GamePiece
þþN W
piece
þþX ]
)
þþ] ^
{
ÿÿ 	
Image
 

pieceImage
 
=
 !
ObtainImageCreation
 2
(
2 3
cell
3 7
,
7 8
piece
9 >
)
> ?
;
? @!
canva_GameBoardGrid
 
.
  
Children
  (
.
( )
Add
) ,
(
, -

pieceImage
- 7
)
7 8
;
8 9
_board
 
[
 
piece
 
.
 
Position
 !
]
! "
=
# $
piece
% *
;
* +
_lastPlacedCell
 
=
 
cell
 "
;
" #
}
 	
private
 
Image
 &
ObtainImageOfPieceToSafe
 .
(
. /
	GamePiece
/ 8
piece
9 >
)
> ?
{
 	
Image
  
imageOfPieceToSafe
 $
=
% &
new
' *
Image
+ 0
(
0 1
)
1 2
;
2 3
var
 
listOfImages
 
=
 !
canva_GameBoardGrid
 2
.
2 3
Children
3 ;
.
; <
OfType
< B
<
B C
Image
C H
>
H I
(
I J
)
J K
.
K L
ToList
L R
(
R S
)
S T
;
T U
foreach
 
(
 
var
 
imageOnGrid
 #
in
$ &
listOfImages
' 3
)
3 4
{
 
if
 
(
 
imageOnGrid
 
.
 
Tag
 "
is
# %
	GamePiece
& /
	gamePiece
0 9
&&
: <
	gamePiece
= F
.
F G
Position
G O
==
P R
piece
S X
.
X Y
Position
Y a
)
a b
{
  
imageOfPieceToSafe
 &
=
' (
imageOnGrid
) 4
;
4 5
}
 
}
 
return
  
imageOfPieceToSafe
 %
;
% &
}
 	
private
 
void
 5
'UpdateOldAndNewPlaceInGameBoardReceived
 <
(
< =
Image
= B

pieceImage
C M
,
M N
Point
O T
oldPosition
U `
)
` a
{
 	
if
 
(
 
_board
 
.
 
ContainsKey
 "
(
" #
oldPosition
# .
)
. /
)
/ 0
{
 
_board
 
.
 
Remove
 
(
 
oldPosition
 )
)
) *
;
* +
}
 
var
 #
imagesOnGameBoardGrid
 %
=
& '!
canva_GameBoardGrid
( ;
.
; <
Children
< D
.
D E
OfType
E K
<
K L
Image
L Q
>
Q R
(
R S
)
S T
.
T U
ToList
U [
(
[ \
)
\ ]
;
] ^
	GamePiece
 
pieceToMove
 !
=
" #

pieceImage
$ .
.
. /
Tag
/ 2
as
3 5
	GamePiece
6 ?
;
? @
Image
 
imageToRemove
 
=
  !
new
" %
Image
& +
(
+ ,
)
, -
;
- .
foreach
 
(
 
var
 
imageOnGrid
 $
in
% '#
imagesOnGameBoardGrid
( =
)
= >
{
 
	GamePiece
 
piece
 
=
  !
imageOnGrid
" -
.
- .
Tag
. 1
as
2 4
	GamePiece
5 >
;
> ?
if
   
(
   
piece
   
.
   
Piece
   
.
    
Position
    (
==
  ) +
oldPosition
  , 7
&&
  8 :
piece
  ; @
.
  @ A
PieceNumber
  A L
==
  M O
pieceToMove
  P [
.
  [ \
PieceNumber
  \ g
&&
  h j
piece
  k p
.
  p q

PlayerName
  q {
==
  | ~
pieceToMove   
.   

PlayerName   
)   
{
¡¡ 
imageToRemove
¢¢ !
=
¢¢" #
imageOnGrid
¢¢$ /
;
¢¢/ 0
break
££ 
;
££ 
}
¤¤ 
}
¥¥ 
List
¦¦ 
<
¦¦ 
	UIElement
¦¦ 
>
¦¦ 
childrenGrids
¦¦ )
=
¦¦* +!
canva_GameBoardGrid
¦¦, ?
.
¦¦? @
Children
¦¦@ H
.
¦¦H I
OfType
¦¦I O
<
¦¦O P
	UIElement
¦¦P Y
>
¦¦Y Z
(
¦¦Z [
)
¦¦[ \
.
¦¦\ ]
ToList
¦¦] c
(
¦¦c d
)
¦¦d e
;
¦¦e f
int
§§ 
indexToRemove
§§ 
=
§§ 
childrenGrids
§§  -
.
§§- .
IndexOf
§§. 5
(
§§5 6
imageToRemove
§§6 C
)
§§C D
;
§§D E
if
¨¨ 
(
¨¨ 
indexToRemove
¨¨ 
!=
¨¨  
-
¨¨! "
$num
¨¨" #
)
¨¨# $
{
©© !
canva_GameBoardGrid
ªª #
.
ªª# $
Children
ªª$ ,
.
ªª, -
RemoveAt
ªª- 5
(
ªª5 6
indexToRemove
ªª6 C
)
ªªC D
;
ªªD E
}
«« !
canva_GameBoardGrid
¬¬ 
.
¬¬  
Children
¬¬  (
.
¬¬( )
Add
¬¬) ,
(
¬¬, -

pieceImage
¬¬- 7
)
¬¬7 8
;
¬¬8 9
	GamePiece
­­ 

pieceToAdd
­­  
=
­­! "

pieceImage
­­# -
.
­­- .
Tag
­­. 1
as
­­2 4
	GamePiece
­­5 >
;
­­> ?
_board
®® 
[
®® 

pieceToAdd
®® 
.
®® 
Position
®® &
]
®®& '
=
®®( )

pieceToAdd
®®* 4
;
®®4 5
}
¯¯ 	
private
±± 
void
±± /
!VerifyIfBeetleIsOnAPieceToPlaceIt
±± 6
(
±±6 7
	GamePiece
±±7 @
piece
±±A F
)
±±F G
{
²² 	
Point
³³ 
oldPosition
³³ 
=
³³ 
piece
³³  %
.
³³% &
Piece
³³& +
.
³³+ ,
Position
³³, 4
;
³³4 5
Polygon
´´ 
cell
´´ 
=
´´ 
_cellDictionary
´´ *
[
´´* +
piece
´´+ 0
.
´´0 1
Position
´´1 9
]
´´9 :
;
´´: ;
Image
µµ 
imageOfPiece
µµ 
=
µµ  !
ObtainImageCreation
µµ! 4
(
µµ4 5
cell
µµ5 9
,
µµ9 :
piece
µµ; @
)
µµ@ A
;
µµA B
if
¶¶ 
(
¶¶ (
_piecesCapturedByTheBeetle
¶¶ )
.
¶¶) *
ContainsKey
¶¶* 5
(
¶¶5 6
(
¶¶6 7
piece
¶¶7 <
.
¶¶< =
PieceNumber
¶¶= H
,
¶¶H I
piece
¶¶J O
.
¶¶O P

PlayerName
¶¶P Z
)
¶¶Z [
)
¶¶[ \
)
¶¶\ ]
{
¶¶] ^
Image
·· '
pieceContainedByTheBeetle
·· /
=
··0 1(
_piecesCapturedByTheBeetle
··2 L
[
··L M
(
··M N
piece
··N S
.
··S T
PieceNumber
··T _
,
··_ `
piece
··` e
.
··e f

PlayerName
··f p
)
··p q
]
··q r
;
··r s5
'UpdateOldAndNewPlaceInGameBoardReceived
¸¸ 7
(
¸¸7 8
imageOfPiece
¸¸8 D
,
¸¸D E
oldPosition
¸¸F Q
)
¸¸Q R
;
¸¸R S>
0ReturnOriginalPositionOfPieceCapturedByTheBeetle
¹¹ @
(
¹¹@ A'
pieceContainedByTheBeetle
¹¹A Z
,
¹¹Z [
piece
¹¹\ a
)
¹¹a b
;
¹¹b c
}
ºº 
else
»» 
{
¼¼ 5
'UpdateOldAndNewPlaceInGameBoardReceived
½½ 7
(
½½7 8
imageOfPiece
½½8 D
,
½½D E
oldPosition
½½E P
)
½½P Q
;
½½Q R
}
¾¾ 
}
¿¿ 	
private
ÁÁ 
void
ÁÁ (
UpdatePiecePositionOnBoard
ÁÁ /
(
ÁÁ/ 0
	GamePiece
ÁÁ0 9
piece
ÁÁ: ?
)
ÁÁ? @
{
ÂÂ 	
_cellDictionary
ÃÃ 
.
ÃÃ 
TryGetValue
ÃÃ '
(
ÃÃ' (
piece
ÃÃ( -
.
ÃÃ- .
Position
ÃÃ. 6
,
ÃÃ6 7
out
ÃÃ8 ;
var
ÃÃ< ?
cell
ÃÃ@ D
)
ÃÃD E
;
ÃÃE F
if
ÄÄ 
(
ÄÄ 
piece
ÄÄ 
.
ÄÄ 
Piece
ÄÄ 
.
ÄÄ 
Name
ÄÄ  
==
ÄÄ! #
BeetlePieceName
ÄÄ$ 3
&&
ÄÄ4 6
_board
ÄÄ7 =
.
ÄÄ= >
ContainsKey
ÄÄ> I
(
ÄÄI J
piece
ÄÄJ O
.
ÄÄO P
Position
ÄÄP X
)
ÄÄX Y
)
ÄÄY Z
{
ÅÅ 
Image
ÆÆ  
imageOfPieceToSafe
ÆÆ (
=
ÆÆ) *&
ObtainImageOfPieceToSafe
ÆÆ+ C
(
ÆÆC D
piece
ÆÆD I
)
ÆÆI J
;
ÆÆJ K*
UpdateBeetleOnAPieceReceived
ÇÇ ,
(
ÇÇ, -
piece
ÇÇ- 2
,
ÇÇ2 3 
imageOfPieceToSafe
ÇÇ4 F
)
ÇÇF G
;
ÇÇG H
}
ÈÈ 
else
ÉÉ 
if
ÉÉ 
(
ÉÉ 
piece
ÉÉ 
.
ÉÉ 
Piece
ÉÉ 
.
ÉÉ  
Name
ÉÉ  $
==
ÉÉ% '
BeetlePieceName
ÉÉ( 7
&&
ÉÉ8 :(
_piecesCapturedByTheBeetle
ÉÉ; U
.
ÉÉU V
ContainsKey
ÉÉV a
(
ÉÉa b
(
ÉÉb c
piece
ÉÉc h
.
ÉÉh i
PieceNumber
ÉÉi t
,
ÉÉt u
piece
ÉÉv {
.
ÉÉ{ |

PlayerNameÉÉ| 
)ÉÉ 
)ÉÉ 
)ÉÉ 
{
ÊÊ /
!VerifyIfBeetleIsOnAPieceToPlaceIt
ËË 1
(
ËË1 2
piece
ËË2 7
)
ËË7 8
;
ËË8 9
}
ÌÌ 
else
ÍÍ 
{
ÎÎ .
 PlacePieceReceivedOnCellToUpdate
ÏÏ 0
(
ÏÏ0 1
cell
ÏÏ1 5
,
ÏÏ5 6
piece
ÏÏ7 <
)
ÏÏ< =
;
ÏÏ= >
}
ÐÐ 
}
ÑÑ 	
private
ÓÓ 
void
ÓÓ .
 PlacePieceReceivedOnCellToUpdate
ÓÓ 5
(
ÓÓ5 6
Polygon
ÓÓ6 =
cell
ÓÓ> B
,
ÓÓB C
	GamePiece
ÓÓD M
piece
ÓÓN S
)
ÓÓS T
{
ÔÔ 	
if
ÕÕ 
(
ÕÕ 
cell
ÕÕ 
!=
ÕÕ 
null
ÕÕ 
&&
ÕÕ 
piece
ÕÕ $
!=
ÕÕ% '
null
ÕÕ( ,
)
ÕÕ, -
{
ÖÖ 
Point
×× 
oldPosition
×× !
=
××" #
piece
××$ )
.
××) *
Piece
××* /
.
××/ 0
Position
××0 8
;
××8 9
Image
ØØ 

pieceImage
ØØ  
=
ØØ! "!
ObtainImageCreation
ØØ# 6
(
ØØ6 7
cell
ØØ7 ;
,
ØØ; <
piece
ØØ< A
)
ØØA B
;
ØØB C
if
ÙÙ 
(
ÙÙ 
_board
ÙÙ 
.
ÙÙ 
ContainsKey
ÙÙ &
(
ÙÙ& '
piece
ÙÙ' ,
.
ÙÙ, -
Piece
ÙÙ- 2
.
ÙÙ2 3
Position
ÙÙ3 ;
)
ÙÙ; <
)
ÙÙ< =
{
ÚÚ !
UpdateReceivedPiece
ÛÛ '
(
ÛÛ' (

pieceImage
ÛÛ( 2
,
ÛÛ2 3
oldPosition
ÛÛ4 ?
)
ÛÛ? @
;
ÛÛ@ A
}
ÜÜ 
else
ÝÝ 
{
ÞÞ !
canva_GameBoardGrid
ßß '
.
ßß' (
Children
ßß( 0
.
ßß0 1
Add
ßß1 4
(
ßß4 5

pieceImage
ßß5 ?
)
ßß? @
;
ßß@ A
_board
àà 
[
àà 
piece
àà  
.
àà  !
Position
àà! )
]
àà) *
=
àà+ ,
piece
àà- 2
;
àà2 3
_lastPlacedCell
áá #
=
áá$ %
cell
áá& *
;
áá* +
}
ââ 
}
ãã 
}
ää 	
private
ææ 
void
ææ !
UpdateReceivedPiece
ææ (
(
ææ( )
Image
ææ) .

pieceImage
ææ/ 9
,
ææ9 :
Point
ææ; @
oldPosition
ææA L
)
ææL M
{
çç 	
if
èè 
(
èè 
_board
èè 
.
èè 
ContainsKey
èè "
(
èè" #
oldPosition
èè# .
)
èè. /
)
èè/ 0
{
éé 
_board
êê 
.
êê 
Remove
êê 
(
êê 
oldPosition
êê )
)
êê) *
;
êê* +
}
ëë 
var
ìì 
listOfElements
ìì 
=
ìì  !
canva_GameBoardGrid
ìì! 4
.
ìì4 5
Children
ìì5 =
.
ìì= >
OfType
ìì> D
<
ììD E
Image
ììE J
>
ììJ K
(
ììK L
)
ììL M
.
ììM N
ToList
ììN T
(
ììT U
)
ììU V
;
ììV W
	GamePiece
íí 
piece
íí 
=
íí 

pieceImage
íí (
.
íí( )
Tag
íí) ,
as
íí- /
	GamePiece
íí0 9
;
íí9 :
Image
îî 
imageToQuite
îî 
=
îî  
new
îî! $
Image
îî% *
(
îî* +
)
îî+ ,
;
îî, -
foreach
ïï 
(
ïï 
var
ïï 
element
ïï  
in
ïï! #
listOfElements
ïï$ 2
)
ïï2 3
{
ðð 
	GamePiece
ññ 
pieceToQuit
ññ %
=
ññ& '
(
ññ( )
	GamePiece
ññ) 2
)
ññ2 3
element
ññ3 :
.
ññ: ;
Tag
ññ; >
;
ññ> ?
if
òò 
(
òò 
pieceToQuit
òò 
.
òò 
Position
òò '
==
òò( *
oldPosition
òò+ 6
&&
òò7 9
pieceToQuit
òò: E
.
òòE F
PieceNumber
òòF Q
==
òòR T
piece
òòU Z
.
òòZ [
PieceNumber
òò[ f
&&
òòg i
pieceToQuit
òòj u
.
òòu v

PlayerNameòòv 
==òò 
pieceòò 
.òò 

PlayerNameòò 
)òò 
{
óó 
imageToQuite
ôô  
=
ôô! "
element
ôô# *
;
ôô* +
break
õõ 
;
õõ 
}
öö 
}
÷÷ 7
)EliminateDuplicatedImagesIfExistsReceived
øø 5
(
øø5 6
oldPosition
øø6 A
)
øøA B
;
øøB C
List
ùù 
<
ùù 
	UIElement
ùù 
>
ùù 
childrenGrids
ùù )
=
ùù* +!
canva_GameBoardGrid
ùù, ?
.
ùù? @
Children
ùù@ H
.
ùùH I
OfType
ùùI O
<
ùùO P
	UIElement
ùùP Y
>
ùùY Z
(
ùùZ [
)
ùù[ \
.
ùù\ ]
ToList
ùù] c
(
ùùc d
)
ùùd e
;
ùùe f
int
úú 
indexToRemove
úú 
=
úú 
childrenGrids
úú  -
.
úú- .
IndexOf
úú. 5
(
úú5 6
imageToQuite
úú6 B
)
úúB C
;
úúC D
if
ûû 
(
ûû 
indexToRemove
ûû 
!=
ûû 
-
ûû  !
$num
ûû! "
)
ûû" #
{
üü !
canva_GameBoardGrid
ýý #
.
ýý# $
Children
ýý$ ,
.
ýý, -
RemoveAt
ýý- 5
(
ýý5 6
indexToRemove
ýý6 C
)
ýýC D
;
ýýD E
}
þþ !
canva_GameBoardGrid
ÿÿ 
.
ÿÿ  
Children
ÿÿ  (
.
ÿÿ( )
Add
ÿÿ) ,
(
ÿÿ, -

pieceImage
ÿÿ- 7
)
ÿÿ7 8
;
ÿÿ8 9
	GamePiece
 

pieceToAdd
  
=
! "

pieceImage
# -
.
- .
Tag
. 1
as
2 4
	GamePiece
5 >
;
> ?
_board
 
[
 

pieceToAdd
 
.
 
Position
 &
]
& '
=
( )

pieceToAdd
* 4
;
4 5
}
 	
private
 
void
 7
)EliminateDuplicatedImagesIfExistsReceived
 >
(
> ?
Point
? D
oldPosition
E P
)
P Q
{
 	
var
 
imagesToRemove
 
=
  !
canva_GameBoardGrid
! 4
.
4 5
Children
5 =
.
 
OfType
 
<
 
Image
 
>
 
(
 
)
  
.
 
Where
 
(
 
image
 
=>
 
image
 
.
 
Tag
 !
is
" $
	GamePiece
% .
piece
/ 4
&&
5 7
piece
8 =
.
= >
Position
> F
==
G I
oldPosition
J U
)
U V
.
 
ToList
 
(
 
)
 
;
 
for
 
(
 
int
 
indexOfImage
 !
=
" #
$num
$ %
;
% &
indexOfImage
' 3
<
4 5
imagesToRemove
6 D
.
D E
Count
E J
;
J K
indexOfImage
L X
++
X Z
)
Z [
{
 
Image
 
imageToQuit
 !
=
" #
imagesToRemove
$ 2
[
2 3
indexOfImage
3 ?
]
? @
;
@ A
List
 
<
 
	UIElement
 
>
 
childrenGrids
  -
=
. /!
canva_GameBoardGrid
0 C
.
C D
Children
D L
.
L M
OfType
M S
<
S T
	UIElement
T ]
>
] ^
(
^ _
)
_ `
.
` a
ToList
a g
(
g h
)
h i
;
i j
int
 
indexToRemove
 !
=
" #
childrenGrids
$ 1
.
1 2
IndexOf
2 9
(
9 :
imageToQuit
: E
)
E F
;
F G
if
 
(
 
indexToRemove
 !
!=
" $
-
% &
$num
& '
)
' (
{
 !
canva_GameBoardGrid
 '
.
' (
Children
( 0
.
0 1
RemoveAt
1 9
(
9 :
indexToRemove
: G
)
G H
;
H I
}
 
}
 
}
 	
public
 
void
 
ReceiveTurns
  
(
  !
bool
! %
isTurn
& ,
)
, -
{
 	
if
 
(
 
isTurn
 
)
 
{
 "
StopTurnTimeoutTimer
 $
(
$ %
)
% &
;
& '!
txtBlock_PlayerName
 #
.
# $
Text
$ (
=
) *"
UserProfileSingleton
+ ?
.
? @
username
@ H
;
H I 
_isOtherPlayerTurn
 "
=
# $
false
% *
;
* +"
_hasOtherPlayerMoved
 $
=
% &
false
' ,
;
, -
if
 
(
 
_numberOfPlayer
 #
==
$ &
$num
' (
)
( )
{
   
stckp_Player1
¡¡ !
.
¡¡! "
	IsEnabled
¡¡" +
=
¡¡, -
true
¡¡. 2
;
¡¡2 3!
EnablePiecesOnBoard
¢¢ '
(
¢¢' (
)
¢¢( )
;
¢¢) *+
UnlockPlacesWhereThereIsPiece
££ 1
(
££1 2
)
££2 3
;
££3 4
}
¤¤ 
else
¥¥ 
{
¦¦ 
stckp_Player2
§§ !
.
§§! "
	IsEnabled
§§" +
=
§§, -
true
§§. 2
;
§§2 3+
UnlockPlacesWhereThereIsPiece
¨¨ 1
(
¨¨1 2
)
¨¨2 3
;
¨¨3 4!
EnablePiecesOnBoard
©© '
(
©©' (
)
©©( )
;
©©) *
}
ªª 
_numberOfTurn
«« 
++
«« 
;
««  
}
¬¬ 
else
­­ 
{
®® #
StartTurnTimeoutTimer
¯¯ %
(
¯¯% &
)
¯¯& '
;
¯¯' (
for
°° 
(
°° 
int
°° 
indexUsersInMatch
°° *
=
°°+ ,
$num
°°- .
;
°°. /
indexUsersInMatch
°°0 A
<
°°B C
_usersInGame
°°D P
.
°°P Q
Count
°°Q V
;
°°V W
indexUsersInMatch
°°X i
++
°°i k
)
°°k l
{
±± 
if
²² 
(
²² 
_usersInGame
²² $
[
²²$ %
indexUsersInMatch
²²% 6
]
²²6 7
.
²²7 8
username
²²8 @
!=
²²A C"
UserProfileSingleton
²²D X
.
²²X Y
username
²²Y a
)
²²a b
{
³³ !
txtBlock_PlayerName
´´ +
.
´´+ ,
Text
´´, 0
=
´´1 2
_usersInGame
´´3 ?
[
´´? @
indexUsersInMatch
´´@ Q
]
´´Q R
.
´´R S
username
´´S [
;
´´[ \
}
µµ 
}
¶¶  
_isOtherPlayerTurn
·· "
=
··# $
true
··% )
;
··) *
if
¸¸ 
(
¸¸ 
_numberOfPlayer
¸¸ #
==
¸¸$ &
$num
¸¸' (
)
¸¸( )
{
¹¹ 
stckp_Player1
ºº !
.
ºº! "
	IsEnabled
ºº" +
=
ºº, -
false
ºº. 3
;
ºº3 4!
EnablePiecesOnBoard
»» '
(
»»' (
)
»»( )
;
»») *
}
¼¼ 
else
½½ 
{
¾¾ 
stckp_Player2
¿¿ !
.
¿¿! "
	IsEnabled
¿¿" +
=
¿¿, -
false
¿¿. 3
;
¿¿3 4!
EnablePiecesOnBoard
ÀÀ '
(
ÀÀ' (
)
ÀÀ( )
;
ÀÀ) *
}
ÁÁ "
DisablePiecesOnBoard
ÂÂ $
(
ÂÂ$ %
)
ÂÂ% &
;
ÂÂ& '
}
ÃÃ 
}
ÄÄ 	
private
ÆÆ 
void
ÆÆ #
StartTurnTimeoutTimer
ÆÆ *
(
ÆÆ* +
)
ÆÆ+ ,
{
ÇÇ 	
_turnTimeoutTimer
ÈÈ 
=
ÈÈ 
new
ÈÈ  #
TimersTimer
ÈÈ$ /
(
ÈÈ/ 0
$num
ÈÈ0 5
)
ÈÈ5 6
;
ÈÈ6 7
_turnTimeoutTimer
ÉÉ 
.
ÉÉ 
Elapsed
ÉÉ %
+=
ÉÉ& (
OnTurnTimeout
ÉÉ) 6
;
ÉÉ6 7
_turnTimeoutTimer
ÊÊ 
.
ÊÊ 
	AutoReset
ÊÊ '
=
ÊÊ( )
false
ÊÊ* /
;
ÊÊ/ 0
_turnTimeoutTimer
ËË 
.
ËË 
Enabled
ËË %
=
ËË& '
true
ËË( ,
;
ËË, -
}
ÌÌ 	
private
ÎÎ 
void
ÎÎ "
StopTurnTimeoutTimer
ÎÎ )
(
ÎÎ) *
)
ÎÎ* +
{
ÏÏ 	
if
ÐÐ 
(
ÐÐ 
_turnTimeoutTimer
ÐÐ !
!=
ÐÐ" $
null
ÐÐ% )
)
ÐÐ) *
{
ÑÑ 
_turnTimeoutTimer
ÒÒ !
.
ÒÒ! "
Stop
ÒÒ" &
(
ÒÒ& '
)
ÒÒ' (
;
ÒÒ( )
_turnTimeoutTimer
ÓÓ !
.
ÓÓ! "
Dispose
ÓÓ" )
(
ÓÓ) *
)
ÓÓ* +
;
ÓÓ+ ,
_turnTimeoutTimer
ÔÔ !
=
ÔÔ" #
null
ÔÔ$ (
;
ÔÔ( )
}
ÕÕ 
}
ÖÖ 	
private
ØØ 
void
ØØ 
OnTurnTimeout
ØØ "
(
ØØ" #
object
ØØ# )
sender
ØØ* 0
,
ØØ0 1
ElapsedEventArgs
ØØ2 B
e
ØØC D
)
ØØD E
{
ÙÙ 	
LoggerManager
ÚÚ 
logger
ÚÚ  
=
ÚÚ! "
new
ÚÚ# &
LoggerManager
ÚÚ' 4
(
ÚÚ4 5
this
ÚÚ5 9
.
ÚÚ9 :
GetType
ÚÚ: A
(
ÚÚA B
)
ÚÚB C
)
ÚÚC D
;
ÚÚD E
if
ÛÛ 
(
ÛÛ  
_isOtherPlayerTurn
ÛÛ "
)
ÛÛ" #
{
ÜÜ 
try
ÝÝ 
{
ÞÞ 
bool
ßß 
isConnected
ßß $
=
ßß% & 
_gameManagerClient
ßß' 9
.
ßß9 :
CheckConnection
ßß: I
(
ßßI J
_usersInGame
ßßJ V
.
ßßV W
First
ßßW \
(
ßß\ ]
u
ßß] ^
=>
ßß_ a
u
ßßb c
.
ßßc d
username
ßßd l
!=
ßßm o#
UserProfileSingletonßßp 
.ßß 
usernameßß 
)ßß 
.ßß 
usernameßß 
)ßß 
;ßß 
if
àà 
(
àà 
!
àà 
isConnected
àà $
)
àà$ %
{
áá !
NotifyDisconnection
ââ +
(
ââ+ ,
)
ââ, -
;
ââ- .
}
ãã 
}
ää 
catch
åå 
(
åå 
TimeoutException
åå '
timeOutException
åå( 8
)
åå8 9
{
ææ 
logger
çç 
.
çç 
LogWarn
çç "
(
çç" #
timeOutException
çç# 3
)
çç3 4
;
çç4 5!
NotifyDisconnection
èè '
(
èè' (
)
èè( )
;
èè) *
}
éé 
}
êê 
}
ëë 	
private
íí 
void
íí !
NotifyDisconnection
íí (
(
íí( )
)
íí) *
{
îî 	

Dispatcher
ïï 
.
ïï 
Invoke
ïï 
(
ïï 
(
ïï 
)
ïï  
=>
ïï! #
{
ðð 
DialogManager
ññ 
.
ññ #
ShowErrorMessageAlert
ññ 3
(
ññ3 4

Properties
ññ4 >
.
ññ> ?
	Resources
ññ? H
.
ññH I#
dialogErrorConnection
ññI ^
)
ññ^ _
;
ññ_ `
ReturnToLoginView
òò !
(
òò! "
)
òò" #
;
òò# $
}
óó 
)
óó 
;
óó 
}
ôô 	
private
öö 
void
öö !
EnablePiecesOnBoard
öö (
(
öö( )
)
öö) *
{
÷÷ 	
foreach
øø 
(
øø 
	UIElement
øø 
element
øø &
in
øø' )!
canva_GameBoardGrid
øø* =
.
øø= >
Children
øø> F
)
øøF G
{
ùù 
if
úú 
(
úú 
element
úú 
is
úú 
Image
úú $
image
úú% *
&&
úú+ -
image
úú. 3
.
úú3 4
Tag
úú4 7
is
úú8 :
Logic
úú; @
.
úú@ A
	GamePiece
úúA J
	gamePiece
úúK T
&&
úúU W
	gamePiece
úúX a
.
úúa b

PlayerName
úúb l
==
úúm o#
UserProfileSingletonúúp 
.úú 
usernameúú 
)úú 
{
ûû 
image
üü 
.
üü 
	IsEnabled
üü #
=
üü$ %
true
üü& *
;
üü* +
image
ýý 
.
ýý 
	MouseDown
ýý #
+=
ýý$ &%
PieceSelected_MouseDown
ýý' >
;
ýý> ?
}
þþ 
}
ÿÿ 
}
 	
private
 
void
 "
DisablePiecesOnBoard
 )
(
) *
)
* +
{
 	
foreach
 
(
 
	UIElement
 
element
 &
in
' )!
canva_GameBoardGrid
* =
.
= >
Children
> F
)
F G
{
 
if
 
(
 
element
 
is
 
Image
 $
image
% *
&&
+ -
image
. 3
.
3 4
Tag
4 7
is
8 :
Logic
; @
.
@ A
	GamePiece
A J
)
J K
{
 
image
 
.
 
	IsEnabled
 #
=
$ %
false
& +
;
+ ,
image
 
.
 
	MouseDown
 #
-=
$ &%
PieceSelected_MouseDown
' >
;
> ?
}
 
}
 
}
 	
public
 
void
 #
ReceivePlayersToMatch
 )
(
) *
UserSession
* 5
[
5 6
]
6 7
userSession
8 C
)
C D
{
 	
_usersInGame
 
=
 
userSession
 &
.
& '
ToList
' -
(
- .
)
. /
;
/ 0
for
 
(
 
int
 
indexUsersInMatch
 %
=
& '
$num
( )
;
) *
indexUsersInMatch
* ;
<
< =
_usersInGame
> J
.
J K
Count
K P
;
P Q
indexUsersInMatch
Q b
++
b d
)
d e
{
 
UserSession
 
user
  
=
! "
_usersInGame
# /
[
/ 0
indexUsersInMatch
0 A
]
A B
;
B C
Profile
 
profileUser
 #
=
$ %
GetUserProfile
& 4
(
4 5
user
5 9
)
9 :
;
: ;!
UpdatePlayerDisplay
 #
(
# $
user
$ (
,
( )
profileUser
* 5
)
5 6
;
6 7
}
 
}
 	
private
 
static
 
Profile
 
GetUserProfile
 -
(
- .
UserSession
. 9
user
: >
)
> ?
{
 	
	HiveProxy
 
.
 
UserManagerClient
 '
userManagerClient
( 9
=
: ;
new
< ?
	HiveProxy
@ I
.
I J
UserManagerClient
J [
(
[ \
)
\ ]
;
] ^
Profile
 
profileUser
 
=
  !
userManagerClient
" 3
.
3 4&
GetUserProfileByUsername
4 L
(
L M
user
M Q
.
Q R
username
R Z
)
Z [
;
[ \
if
 
(
 
profileUser
 
.
 
idAccesAccount
 *
==
+ -
	Constants
. 7
.
7 8
ErrorOperation
8 F
||
G I
user
J N
.
N O
	idAccount
O X
==
Y [
	Constants
\ e
.
e f
DefaultGuestId
f t
)
t u
{
 
profileUser
 
.
 
	imagePath
 %
=
& '
$str
( E
;
E F
}
   
return
¡¡ 
profileUser
¡¡ 
;
¡¡ 
}
¢¢ 	
private
¤¤ 
void
¤¤ !
UpdatePlayerDisplay
¤¤ (
(
¤¤( )
UserSession
¤¤) 4
user
¤¤5 9
,
¤¤9 :
Profile
¤¤; B
profileUser
¤¤C N
)
¤¤N O
{
¥¥ 	
_usernamePlayer1
¦¦ 
=
¦¦ 
_usersInGame
¦¦ +
[
¦¦+ ,
$num
¦¦, -
]
¦¦- .
.
¦¦. /
username
¦¦/ 7
;
¦¦7 8
if
§§ 
(
§§ $
IsPlayer1SlotAvailable
§§ &
(
§§& '
user
§§' +
)
§§+ ,
)
§§, -
{
¨¨ "
txtBlock_PlayerName1
©© $
.
©©$ %
Text
©©% )
=
©©* +
user
©©, 0
.
©©0 1
username
©©1 9
;
©©9 :
img_ProfilePic1
ªª 
.
ªª  
Source
ªª  &
=
ªª' (
new
ªª) ,
BitmapImage
ªª- 8
(
ªª8 9
new
ªª9 <
Uri
ªª= @
(
ªª@ A
profileUser
ªªA L
.
ªªL M
	imagePath
ªªM V
,
ªªV W
UriKind
ªªX _
.
ªª_ `
Relative
ªª` h
)
ªªh i
)
ªªi j
;
ªªj k
}
«« 
if
¬¬ 
(
¬¬ 
_usersInGame
¬¬ 
.
¬¬ 
Count
¬¬ "
==
¬¬# %
$num
¬¬& '
)
¬¬' (
{
­­ 
_usernamePlayer2
®®  
=
®®! "
_usersInGame
®®# /
[
®®/ 0
$num
®®0 1
]
®®1 2
.
®®2 3
username
®®3 ;
;
®®; <
if
¯¯ 
(
¯¯ $
IsPlayer2SlotAvailable
¯¯ *
(
¯¯* +
user
¯¯+ /
)
¯¯/ 0
)
¯¯0 1
{
°° "
txtBlock_PlayerName2
±± (
.
±±( )
Text
±±) -
=
±±. /
user
±±0 4
.
±±4 5
username
±±5 =
;
±±= >
img_ProfilePic2
²² #
.
²²# $
Source
²²$ *
=
²²+ ,
new
²²- 0
BitmapImage
²²1 <
(
²²< =
new
²²= @
Uri
²²A D
(
²²D E
profileUser
²²E P
.
²²P Q
	imagePath
²²Q Z
,
²²Z [
UriKind
²²\ c
.
²²c d
Relative
²²d l
)
²²l m
)
²²m n
;
²²n o
}
³³ 
}
´´ 
LoadPlayerPieces
µµ 
(
µµ !
stckp_Player1Pieces
µµ 0
,
µµ0 1
_player1Pieces
µµ2 @
,
µµ@ A
_usernamePlayer1
µµB R
)
µµR S
;
µµS T
LoadPlayerPieces
¶¶ 
(
¶¶ !
stckp_Player2Pieces
¶¶ 0
,
¶¶0 1
_player2Pieces
¶¶2 @
,
¶¶@ A
_usernamePlayer2
¶¶B R
)
¶¶R S
;
¶¶S T
}
·· 	
private
¹¹ 
bool
¹¹ $
IsPlayer1SlotAvailable
¹¹ +
(
¹¹+ ,
UserSession
¹¹, 7
user
¹¹8 <
)
¹¹< =
{
ºº 	
return
»» "
txtBlock_PlayerName1
»» '
.
»»' (
Text
»»( ,
==
»»- /

Properties
»»0 :
.
»»: ;
	Resources
»»; D
.
»»D E
txtbl_Player1
»»E R
&&
»»S U"
txtBlock_PlayerName2
¼¼ '
.
¼¼' (
Text
¼¼( ,
==
¼¼- /"
UserProfileSingleton
¼¼0 D
.
¼¼D E
username
¼¼E M
&&
¼¼N P
!
½½ 
user
½½ 
.
½½ 
username
½½ !
.
½½! "
Equals
½½" (
(
½½( )"
txtBlock_PlayerName2
½½) =
.
½½= >
Text
½½> B
)
½½B C
;
½½C D
}
¾¾ 	
private
ÀÀ 
bool
ÀÀ $
IsPlayer2SlotAvailable
ÀÀ +
(
ÀÀ+ ,
UserSession
ÀÀ, 7
user
ÀÀ8 <
)
ÀÀ< =
{
ÁÁ 	
return
ÂÂ "
txtBlock_PlayerName2
ÂÂ '
.
ÂÂ' (
Text
ÂÂ( ,
==
ÂÂ- /

Properties
ÂÂ0 :
.
ÂÂ: ;
	Resources
ÂÂ; D
.
ÂÂD E
txtbl_Player2
ÂÂE R
&&
ÂÂS U"
txtBlock_PlayerName1
ÃÃ '
.
ÃÃ' (
Text
ÃÃ( ,
==
ÃÃ- /"
UserProfileSingleton
ÃÃ0 D
.
ÃÃD E
username
ÃÃE M
&&
ÃÃN P
!
ÄÄ 
user
ÄÄ 
.
ÄÄ 
username
ÄÄ !
.
ÄÄ! "
Equals
ÄÄ" (
(
ÄÄ( )"
txtBlock_PlayerName1
ÄÄ) =
.
ÄÄ= >
Text
ÄÄ> B
)
ÄÄB C
;
ÄÄC D
}
ÅÅ 	
public
ÇÇ 
void
ÇÇ .
 ReceivePlayerHasLeftNotification
ÇÇ 4
(
ÇÇ4 5
bool
ÇÇ5 9!
doPlayerLeftTheGame
ÇÇ: M
)
ÇÇM N
{
ÈÈ 	
if
ÉÉ 
(
ÉÉ !
doPlayerLeftTheGame
ÉÉ #
)
ÉÉ# $
{
ÊÊ 
LoggerManager
ËË 
logger
ËË $
=
ËË% &
new
ËË' *
LoggerManager
ËË+ 8
(
ËË8 9
this
ËË9 =
.
ËË= >
GetType
ËË> E
(
ËËE F
)
ËËF G
)
ËËG H
;
ËËH I
bool
ÌÌ 
exceptionOccurred
ÌÌ &
=
ÌÌ' (
false
ÌÌ) .
;
ÌÌ. /
DialogManager
ÍÍ 
.
ÍÍ %
ShowWarningMessageAlert
ÍÍ 5
(
ÍÍ5 6

Properties
ÍÍ6 @
.
ÍÍ@ A
	Resources
ÍÍA J
.
ÍÍJ K'
dialogUserHasLeftTheMatch
ÍÍK d
)
ÍÍd e
;
ÍÍe f
try
ÎÎ 
{
ÏÏ 
UserSession
ÐÐ 
userSession
ÐÐ  +
=
ÐÐ, -
CreateUserSession
ÐÐ. ?
(
ÐÐ? @
)
ÐÐ@ A
;
ÐÐA B
if
ÑÑ 
(
ÑÑ "
UserProfileSingleton
ÑÑ ,
.
ÑÑ, -
	idAccount
ÑÑ- 6
!=
ÑÑ7 9
	Constants
ÑÑ: C
.
ÑÑC D
DefaultGuestId
ÑÑD R
)
ÑÑR S
{
ÒÒ "
UpdateUserReputation
ÓÓ ,
(
ÓÓ, -
userSession
ÓÓ- 8
)
ÓÓ8 9
;
ÓÓ9 :
}
ÔÔ  
_gameManagerClient
ÕÕ &
.
ÕÕ& '
LeaveTheGame
ÕÕ' 3
(
ÕÕ3 4
userSession
ÕÕ4 ?
,
ÕÕ? @
userSession
ÕÕA L
.
ÕÕL M
	codeMatch
ÕÕM V
)
ÕÕV W
;
ÕÕW X
}
ÖÖ 
catch
×× 
(
×× '
EndpointNotFoundException
×× 0'
endpointNotFoundException
××1 J
)
××J K
{
ØØ 
HandleException
ÙÙ #
(
ÙÙ# $'
endpointNotFoundException
ÙÙ$ =
,
ÙÙ= >
logger
ÙÙ? E
)
ÙÙE F
;
ÙÙF G
exceptionOccurred
ÚÚ %
=
ÚÚ& '
true
ÚÚ( ,
;
ÚÚ, -
}
ÛÛ 
catch
ÜÜ 
(
ÜÜ 
TimeoutException
ÜÜ &
timeoutException
ÜÜ' 7
)
ÜÜ7 8
{
ÝÝ 
HandleException
ÞÞ #
(
ÞÞ# $
timeoutException
ÞÞ$ 4
,
ÞÞ4 5
logger
ÞÞ6 <
)
ÞÞ< =
;
ÞÞ= >
exceptionOccurred
ßß %
=
ßß& '
true
ßß( ,
;
ßß, -
}
àà 
catch
áá 
(
áá $
CommunicationException
áá ,$
communicationException
áá- C
)
ááC D
{
ââ 
HandleException
ãã #
(
ãã# $$
communicationException
ãã$ :
,
ãã: ;
logger
ãã< B
)
ããB C
;
ããC D
exceptionOccurred
ää %
=
ää& '
true
ää( ,
;
ää, -
}
åå $
HandlePostLeaveActions
ææ &
(
ææ& '
exceptionOccurred
ææ' 8
)
ææ8 9
;
ææ9 :
}
çç 
}
èè 	
private
êê 
UserSession
êê 
CreateUserSession
êê -
(
êê- .
)
êê. /
{
ëë 	
return
ìì 
new
ìì 
UserSession
ìì "
{
íí 
username
îî 
=
îî "
UserProfileSingleton
îî /
.
îî/ 0
username
îî0 8
,
îî8 9
	idAccount
ïï 
=
ïï "
UserProfileSingleton
ïï 0
.
ïï0 1
	idAccount
ïï1 :
,
ïï: ;
	codeMatch
ðð 
=
ðð 
MatchSingleton
ðð *
.
ðð* +
	codeMatch
ðð+ 4
}
ññ 
;
ññ 
}
òò 	
private
ôô 
static
ôô 
void
ôô "
UpdateUserReputation
ôô 0
(
ôô0 1
UserSession
ôô1 <
userSession
ôô= H
)
ôôH I
{
õõ 	
	HiveProxy
öö 
.
öö 
UserManagerClient
öö '
userManagerClient
öö( 9
=
öö: ;
new
öö< ?
UserManagerClient
öö@ Q
(
ööQ R
)
ööR S
;
ööS T
userManagerClient
÷÷ 
.
÷÷ &
UpdatePlusUserReputation
÷÷ 6
(
÷÷6 7
userSession
÷÷7 B
.
÷÷B C
username
÷÷C K
,
÷÷K L
$num
÷÷M O
)
÷÷O P
;
÷÷P Q
}
øø 	
private
úú 
static
úú 
void
úú 
HandleException
úú +
(
úú+ ,
	Exception
úú, 5
	exception
úú6 ?
,
úú? @
LoggerManager
úúA N
logger
úúO U
)
úúU V
{
ûû 	
if
üü 
(
üü 
	exception
üü 
is
üü '
EndpointNotFoundException
üü 6
)
üü6 7
{
ýý 
logger
þþ 
.
þþ 
LogFatal
þþ 
(
þþ  
	exception
þþ  )
)
þþ) *
;
þþ* +
DialogManager
ÿÿ 
.
ÿÿ #
ShowErrorMessageAlert
ÿÿ 3
(
ÿÿ3 4

Properties
ÿÿ4 >
.
ÿÿ> ?
	Resources
ÿÿ? H
.
ÿÿH I%
dialogEndPointException
ÿÿI `
)
ÿÿ` a
;
ÿÿa b
}
 
else
 
if
 
(
 
	exception
 
is
 !
TimeoutException
" 2
)
2 3
{
 
logger
 
.
 
LogWarn
 
(
 
	exception
 (
)
( )
;
) *
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
else
 
if
 
(
 
	exception
 
is
 !$
CommunicationException
" 8
)
8 9
{
 
logger
 
.
 
LogFatal
 
(
  
	exception
  )
)
) *
;
* +
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 $
HandlePostLeaveActions
 +
(
+ ,
bool
, 0
exceptionOccurred
1 B
)
B C
{
 	
if
 
(
 
exceptionOccurred
 !
||
" $"
UserProfileSingleton
% 9
.
9 :
	idAccount
: C
==
D F
	Constants
G P
.
P Q
DefaultGuestId
Q _
)
_ `
{
 
ReturnToLoginView
 !
(
! "
)
" #
;
# $
}
 
else
 
{
 
GoToMainView
 
(
 
)
 
;
 
}
 
}
 	
public
 
void
 
ReturnToLoginView
 %
(
% &
)
& '
{
 	
MatchSingleton
 
.
 
Instance
 #
.
# $
ResetSingleton
$ 2
(
2 3
)
3 4
;
4 5"
UserProfileSingleton
  
.
  !
Instance
! )
.
) *
ResetSingleton
* 8
(
8 9
)
9 :
;
: ;
	LoginView
 
	loginView
 
=
  !
new
" %
	LoginView
& /
(
/ 0
)
0 1
;
1 2
this
 
.
 
NavigationService
 "
.
" #
Navigate
# +
(
+ ,
	loginView
, 5
)
5 6
;
6 7
}
 	
public
¡¡ 
void
¡¡ %
ReceiveFinalMatchResult
¡¡ +
(
¡¡+ ,
string
¡¡, 2
winner
¡¡3 9
)
¡¡9 :
{
¢¢ 	)
LockGameBoardAndStackPanels
££ '
(
££' (
)
££( )
;
££) *
if
¤¤ 
(
¤¤ 
winner
¤¤ 
==
¤¤ 
$str
¤¤  
)
¤¤  !
{
¥¥  
ShowVictoryMessage
¦¦ "
(
¦¦" #
$str
¦¦# )
)
¦¦) *
;
¦¦* +
_IsMatchFinished
§§  
=
§§! "
true
§§# '
;
§§' (
if
¨¨ 
(
¨¨ "
UserProfileSingleton
¨¨ '
.
¨¨' (
	idAccount
¨¨( 1
!=
¨¨2 4
	Constants
¨¨5 >
.
¨¨> ?
DefaultGuestId
¨¨? M
)
¨¨M N
{
©© %
RegisterMatchDrawResult
ªª +
(
ªª+ ,
)
ªª, -
;
ªª- .
}
«« 
}
¬¬ 
else
­­ 
{
®®  
ShowVictoryMessage
¯¯ "
(
¯¯" #
winner
¯¯# )
)
¯¯) *
;
¯¯* +
_IsMatchFinished
°°  
=
°°! "
true
°°# '
;
°°' (
if
±± 
(
±± "
UserProfileSingleton
±± (
.
±±( )
	idAccount
±±) 2
!=
±±3 5
	Constants
±±6 ?
.
±±? @
DefaultGuestId
±±@ N
)
±±N O
{
²² !
RegisterMatchResult
³³ '
(
³³' (
winner
³³( .
)
³³. /
;
³³/ 0
}
´´ 
}
µµ 
	Constants
¶¶ 
.
¶¶ 
	IsInMatch
¶¶ 
=
¶¶  !
false
¶¶" '
;
¶¶' (
}
·· 	
private
¹¹ 
void
¹¹ !
RegisterMatchResult
¹¹ (
(
¹¹( )
string
¹¹) /
winner
¹¹0 6
)
¹¹6 7
{
ºº 	
LoggerManager
»» 
logger
»»  
=
»»! "
new
»»# &
LoggerManager
»»' 4
(
»»4 5
this
»»5 9
.
»»9 :
GetType
»»: A
(
»»A B
)
»»B C
)
»»C D
;
»»D E
try
¼¼ 
{
½½ 
	HiveProxy
¾¾ 
.
¾¾ &
LeaderBoardManagerClient
¾¾ 2&
leaderBoardManagerClient
¾¾3 K
=
¾¾L M
new
¾¾N Q
	HiveProxy
¾¾R [
.
¾¾[ \&
LeaderBoardManagerClient
¾¾\ t
(
¾¾t u
)
¾¾u v
;
¾¾v w
	HiveProxy
¿¿ 
.
¿¿ '
MatchCreatorManagerClient
¿¿ 3'
matchCreatorManagerClient
¿¿4 M
=
¿¿N O
new
¿¿P S
	HiveProxy
¿¿T ]
.
¿¿] ^'
MatchCreatorManagerClient
¿¿^ w
(
¿¿w x
)
¿¿x y
;
¿¿y z
int
ÀÀ 
updateResult
ÀÀ  
=
ÀÀ! "
$num
ÀÀ# $
;
ÀÀ$ %
if
ÁÁ 
(
ÁÁ 
winner
ÁÁ 
==
ÁÁ "
UserProfileSingleton
ÁÁ 2
.
ÁÁ2 3
username
ÁÁ3 ;
)
ÁÁ; <
{
ÂÂ 
updateResult
ÃÃ  
=
ÃÃ! "&
leaderBoardManagerClient
ÃÃ# ;
.
ÃÃ; <3
%UpdateWinnerResultToPlayerLeaderBoard
ÃÃ< a
(
ÃÃa b"
UserProfileSingleton
ÃÃb v
.
ÃÃv w
	idAccountÃÃw 
)ÃÃ 
;ÃÃ 
}
ÄÄ 
else
ÅÅ 
{
ÆÆ 
updateResult
ÇÇ  
=
ÇÇ! "&
leaderBoardManagerClient
ÇÇ# ;
.
ÇÇ; <2
$UpdateLoserResultToPlayerLeaderBoard
ÇÇ< `
(
ÇÇ` a"
UserProfileSingleton
ÇÇa u
.
ÇÇu v
	idAccount
ÇÇv 
)ÇÇ 
;ÇÇ 
}
ÈÈ 
if
ÉÉ 
(
ÉÉ 
updateResult
ÉÉ  
==
ÉÉ! #
$num
ÉÉ$ %
)
ÉÉ% &
{
ÊÊ 
MatchCreator
ËË  
matchCreation
ËË! .
=
ËË/ 0
new
ËË1 4
MatchCreator
ËË5 A
(
ËËA B
)
ËËB C
{
ÌÌ 
idCreatorAccount
ÍÍ (
=
ÍÍ) *"
UserProfileSingleton
ÍÍ+ ?
.
ÍÍ? @
	idAccount
ÍÍ@ I
,
ÍÍI J
	codeMatch
ÎÎ !
=
ÎÎ" #
MatchSingleton
ÎÎ$ 2
.
ÎÎ2 3
	codeMatch
ÎÎ3 <
,
ÎÎ< =

stateMatch
ÏÏ "
=
ÏÏ# $
$str
ÏÏ% /
}
ÐÐ 
;
ÐÐ '
matchCreatorManagerClient
ÑÑ -
.
ÑÑ- .
UpdateMatchState
ÑÑ. >
(
ÑÑ> ?
matchCreation
ÑÑ? L
)
ÑÑL M
;
ÑÑM N
}
ÒÒ 
else
ÓÓ 
{
ÔÔ 
DialogManager
ÕÕ !
.
ÕÕ! "#
ShowErrorMessageAlert
ÕÕ" 7
(
ÕÕ7 8

Properties
ÕÕ8 B
.
ÕÕB C
	Resources
ÕÕC L
.
ÕÕL M(
dialogCouldntSaveMatchInfo
ÕÕM g
)
ÕÕg h
;
ÕÕh i
}
ÖÖ 
}
×× 
catch
ØØ 
(
ØØ '
EndpointNotFoundException
ØØ ,
endPointException
ØØ- >
)
ØØ> ?
{
ÙÙ 
logger
ÚÚ 
.
ÚÚ 
LogFatal
ÚÚ 
(
ÚÚ  
endPointException
ÚÚ  1
)
ÚÚ1 2
;
ÚÚ2 3
DialogManager
ÛÛ 
.
ÛÛ #
ShowErrorMessageAlert
ÛÛ 3
(
ÛÛ3 4

Properties
ÛÛ4 >
.
ÛÛ> ?
	Resources
ÛÛ? H
.
ÛÛH I%
dialogEndPointException
ÛÛI `
)
ÛÛ` a
;
ÛÛa b
ReturnToLoginView
ÜÜ !
(
ÜÜ! "
)
ÜÜ" #
;
ÜÜ# $
}
ÝÝ 
catch
ÞÞ 
(
ÞÞ 
TimeoutException
ÞÞ #
timeOutException
ÞÞ$ 4
)
ÞÞ4 5
{
ßß 
logger
àà 
.
àà 
LogWarn
àà 
(
àà 
timeOutException
àà /
)
àà/ 0
;
àà0 1
DialogManager
áá 
.
áá #
ShowErrorMessageAlert
áá 3
(
áá3 4

Properties
áá4 >
.
áá> ?
	Resources
áá? H
.
ááH I$
dialogTimeOutException
ááI _
)
áá_ `
;
áá` a
}
ââ 
catch
ãã 
(
ãã $
CommunicationException
ãã )$
communicationException
ãã* @
)
ãã@ A
{
ää 
logger
åå 
.
åå 
LogFatal
åå 
(
åå  $
communicationException
åå  6
)
åå6 7
;
åå7 8
DialogManager
ææ 
.
ææ #
ShowErrorMessageAlert
ææ 3
(
ææ3 4

Properties
ææ4 >
.
ææ> ?
	Resources
ææ? H
.
ææH I)
dialogComunicationException
ææI d
)
ææd e
;
ææe f
ReturnToLoginView
çç !
(
çç! "
)
çç" #
;
çç# $
}
èè 
}
éé 	
private
ëë 
void
ëë %
RegisterMatchDrawResult
ëë ,
(
ëë, -
)
ëë- .
{
ìì 	
LoggerManager
íí 
logger
íí  
=
íí! "
new
íí# &
LoggerManager
íí' 4
(
íí4 5
this
íí5 9
.
íí9 :
GetType
íí: A
(
ííA B
)
ííB C
)
ííC D
;
ííD E
try
îî 
{
ïï 
	HiveProxy
ðð 
.
ðð &
LeaderBoardManagerClient
ðð 2&
leaderBoardManagerClient
ðð3 K
=
ððL M
new
ððN Q
	HiveProxy
ððR [
.
ðð[ \&
LeaderBoardManagerClient
ðð\ t
(
ððt u
)
ððu v
;
ððv w
	HiveProxy
ññ 
.
ññ '
MatchCreatorManagerClient
ññ 3'
matchCreatorManagerClient
ññ4 M
=
ññN O
new
ññP S
	HiveProxy
ññT ]
.
ññ] ^'
MatchCreatorManagerClient
ññ^ w
(
ññw x
)
ññx y
;
ññy z
int
òò 
updateResult
òò  
=
òò! "&
leaderBoardManagerClient
òò# ;
.
òò; <1
#UpdateDrawResultToPlayerLeaderBoard
òò< _
(
òò_ `"
UserProfileSingleton
òò` t
.
òòt u
	idAccount
òòu ~
)
òò~ 
;òò 
if
óó 
(
óó 
updateResult
óó 
==
óó  "
$num
óó# $
)
óó$ %
{
ôô 
MatchCreator
õõ  
matchCreation
õõ! .
=
õõ/ 0
new
õõ1 4
MatchCreator
õõ5 A
(
õõA B
)
õõB C
{
öö 
idCreatorAccount
÷÷ (
=
÷÷) *"
UserProfileSingleton
÷÷+ ?
.
÷÷? @
	idAccount
÷÷@ I
,
÷÷I J
	codeMatch
øø !
=
øø" #
MatchSingleton
øø$ 2
.
øø2 3
	codeMatch
øø3 <
,
øø< =

stateMatch
ùù "
=
ùù# $
$str
ùù% /
}
úú 
;
úú '
matchCreatorManagerClient
ûû -
.
ûû- .
UpdateMatchState
ûû. >
(
ûû> ?
matchCreation
ûû? L
)
ûûL M
;
ûûM N
}
üü 
else
ýý 
{
þþ 
DialogManager
ÿÿ !
.
ÿÿ! "#
ShowErrorMessageAlert
ÿÿ" 7
(
ÿÿ7 8

Properties
ÿÿ8 B
.
ÿÿB C
	Resources
ÿÿC L
.
ÿÿL M(
dialogCouldntSaveMatchInfo
ÿÿM g
)
ÿÿg h
;
ÿÿh i
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
ReturnToLoginView
 !
(
! "
)
" #
;
# $
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
ReturnToLoginView
 !
(
! "
)
" #
;
# $
}
 
}
 	
private
 
void
  
ShowVictoryMessage
 '
(
' (
string
( .
result
/ 5
)
5 6
{
 	
if
 
(
 
result
 
==
 
$str
  
)
  !
{
 %
txtBlock_VictoryMessage
 '
.
' (
Text
( ,
=
- .

Properties
/ 9
.
9 :
	Resources
: C
.
C D
lbl_Draw
D L
;
L M
}
 
else
 
if
 
(
 
result
 
==
 "
UserProfileSingleton
 3
.
3 4
username
4 <
)
< =
{
 %
txtBlock_VictoryMessage
 '
.
' (
Text
( ,
=
- .

Properties
/ 9
.
9 :
	Resources
: C
.
C D

lbl_Winner
D N
;
N O
}
 
else
 
{
   %
txtBlock_VictoryMessage
¡¡ '
.
¡¡' (
Text
¡¡( ,
=
¡¡- .

Properties
¡¡/ 9
.
¡¡9 :
	Resources
¡¡: C
.
¡¡C D

lbl_Defeat
¡¡D N
;
¡¡N O
}
¢¢  
grd_VictoryOverlay
££ 
.
££ 

Visibility
££ )
=
££* +

Visibility
££, 6
.
££6 7
Visible
££7 >
;
££> ?

Storyboard
¤¤ 
victoryStoryboard
¤¤ (
=
¤¤) *
(
¤¤+ ,

Storyboard
¤¤, 6
)
¤¤6 7
FindResource
¤¤7 C
(
¤¤C D
$str
¤¤D ]
)
¤¤] ^
;
¤¤^ _
victoryStoryboard
¥¥ 
.
¥¥ 
Begin
¥¥ #
(
¥¥# $
)
¥¥$ %
;
¥¥% &
}
¦¦ 	
private
¨¨ 
void
¨¨ )
LockGameBoardAndStackPanels
¨¨ 0
(
¨¨0 1
)
¨¨1 2
{
©© 	
stckp_Player1
ªª 
.
ªª 
	IsEnabled
ªª #
=
ªª$ %
false
ªª& +
;
ªª+ ,
stckp_Player2
«« 
.
«« 
	IsEnabled
«« #
=
««$ %
false
««& +
;
««+ ,!
stckp_Player1Pieces
¬¬ 
.
¬¬  
	IsEnabled
¬¬  )
=
¬¬* +
false
¬¬, 1
;
¬¬1 2!
stckp_Player2Pieces
­­ 
.
­­  
	IsEnabled
­­  )
=
­­* +
false
­­, 1
;
­­1 2
foreach
®® 
(
®® 
	UIElement
®® 
element
®® %
in
®®& (!
canva_GameBoardGrid
®®) <
.
®®< =
Children
®®= E
)
®®E F
{
¯¯ 
if
°° 
(
°° 
element
°° 
is
°° 
Image
°° $
image
°°% *
)
°°* +
{
±± 
image
²² 
.
²² 
	IsEnabled
²² #
=
²²$ %
false
²²& +
;
²²+ ,
}
³³ 
}
´´ 
}
µµ 	
public
·· 
void
··  
PlayerDisconnected
·· &
(
··& '
string
··' -"
disconnectedUsername
··. B
)
··B C
{
¸¸ 	

Dispatcher
¹¹ 
.
¹¹ 
Invoke
¹¹ 
(
¹¹ 
(
¹¹ 
)
¹¹  
=>
¹¹! #
{
ºº 
string
»» 
message
»» 
=
»»  "
disconnectedUsername
»»! 5
+
»»6 7

Properties
»»8 B
.
»»B C
	Resources
»»C L
.
»»L M"
dialogLostConnection
»»M a
;
»»a b
DialogManager
¼¼ 
.
¼¼ #
ShowErrorMessageAlert
¼¼ 3
(
¼¼3 4
message
¼¼4 ;
)
¼¼; <
;
¼¼< =
if
¾¾ 
(
¾¾ "
UserProfileSingleton
¾¾ (
.
¾¾( )
	idAccount
¾¾) 2
==
¾¾3 5
	Constants
¾¾6 ?
.
¾¾? @
DefaultGuestId
¾¾@ N
)
¾¾N O
{
¿¿ 
ReturnToLoginView
ÀÀ %
(
ÀÀ% &
)
ÀÀ& '
;
ÀÀ' (
}
ÁÁ 
else
ÂÂ 
{
ÃÃ 
GoToMainView
ÄÄ  
(
ÄÄ  !
)
ÄÄ! "
;
ÄÄ" #
}
ÅÅ 
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ÇÇ 	
}
ÉÉ 
}ÊÊ Î¹
xC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\LobbyView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
[ 
CallbackBehavior 
( 
ConcurrencyMode %
=& '
ConcurrencyMode( 7
.7 8
	Reentrant8 A
)A B
]B C
public 

partial 
class 
	LobbyView "
:# $
Page% )
,) * 
IChatManagerCallback* >
,> ?#
IFriendsManagerCallback? V
,V W!
ILobbyManagerCallbackW l
{ 
private 
ChatManagerClient !
chatManager" -
;- .
private  
FriendsManagerClient $ 
friendsManagerClient% 9
;9 :
private 
LobbyManagerClient "
lobbyManagerClient# 5
;5 6
private $
UserSessionManagerClient ($
UserSessionManagerClient) A
;A B
private 
string 
matchLobbyCode %
;% &
private 
Profile 
userProfile #
=$ %
new& )
Profile* 1
(1 2
)2 3
{4 5
}6 7
;7 8
private 
List 
< 
UserSession  
>  !
usersInLobby" .
=/ 0
new1 4
List5 9
<9 :
UserSession: E
>E F
(F G
)G H
;H I
public 
	LobbyView 
( 
) 
{ 	 
friendsManagerClient  
=! "
new# & 
FriendsManagerClient' ;
(; <
new< ?
InstanceContext@ O
(O P
thisP T
)T U
)U V
;V W
chatManager 
= 
new 
ChatManagerClient /
(/ 0
new0 3
InstanceContext4 C
(C D
thisD H
)H I
)I J
;J K
lobbyManagerClient 
=  
new! $
LobbyManagerClient% 7
(7 8
new8 ;
InstanceContext< K
(K L
thisL P
)P Q
)Q R
;R S$
UserSessionManagerClient   $
=  % &
new  ' *$
UserSessionManagerClient  + C
(  C D
)  D E
;  E F
matchLobbyCode!! 
=!! 
MatchSingleton!! +
.!!+ ,
	codeMatch!!, 5
;!!5 6
InitializeComponent"" 
(""  
)""  !
;""! "
ConnectToChat## 
(## 
)## 
;## !
ConnectAsFriendJoined$$ !
($$! "
)$$" #
;$$# $
ConnectToTheLobby%% 
(%% 
)%% 
;%%  
lbl_GameCode&& 
.&& 
Content&&  
=&&! "
matchLobbyCode&&# 1
;&&1 2
if'' 
('' 
App'' 
.'' 
IsMusicPlaying'' "
)''" #
{(( 
App)) 
.)) 
	PlayMusic)) 
()) 
$str)) /
)))/ 0
;))0 1
}** 
}++ 	
private-- 
void--  
HideFullLobbyActions-- )
(--) *
)--* +
{.. 	
btn_SendOffPlayer// 
.// 

Visibility// (
=//) *

Visibility//+ 5
.//5 6
	Collapsed//6 ?
;//? @
	btn_Start00 
.00 

Visibility00  
=00! "

Visibility00# -
.00- .
	Collapsed00. 7
;007 8
stckp_Friends11 
.11 

Visibility11 $
=11% &

Visibility11' 1
.111 2
	Collapsed112 ;
;11; <
stckp_SearchFriends22 
.22  

Visibility22  *
=22+ ,

Visibility22- 7
.227 8
	Collapsed228 A
;22A B!
lvw_ActiveFriendsList33 !
.33! "

Visibility33" ,
=33- .

Visibility33/ 9
.339 :
	Collapsed33: C
;33C D
}44 	
private66 
void66 
ShowCreatorActions66 '
(66' (
)66( )
{77 	
stckp_Friends88 
.88 

Visibility88 $
=88% &

Visibility88' 1
.881 2
Visible882 9
;889 :
stckp_SearchFriends99 
.99  

Visibility99  *
=99+ ,

Visibility99- 7
.997 8
Visible998 ?
;99? @!
lvw_ActiveFriendsList:: !
.::! "

Visibility::" ,
=::- .

Visibility::/ 9
.::9 :
Visible::: A
;::A B
btn_SendOffPlayer;; 
.;; 

Visibility;; (
=;;) *

Visibility;;+ 5
.;;5 6
	Collapsed;;6 ?
;;;? @
	btn_Start<< 
.<< 

Visibility<<  
=<<! "

Visibility<<# -
.<<- .
	Collapsed<<. 7
;<<7 8
}== 	
private?? 
void?? 
ConnectToChat?? "
(??" #
)??# $
{@@ 	
LoggerManagerAA 
loggerAA  
=AA! "
newAA# &
LoggerManagerAA' 4
(AA4 5
thisAA5 9
.AA9 :
GetTypeAA: A
(AAA B
)AAB C
)AAC D
;AAD E
userProfileBB 
.BB 
usernameBB  
=BB! " 
UserProfileSingletonBB# 7
.BB7 8
usernameBB8 @
;BB@ A
userProfileCC 
.CC 
idAccesAccountCC &
=CC' ( 
UserProfileSingletonCC) =
.CC= >
	idAccountCC> G
;CCG H
tryDD 
{EE 
chatManagerFF 
.FF 
ConnectToChatLobbyFF .
(FF. /
userProfileFF/ :
,FF: ;
matchLobbyCodeFF< J
)FFJ K
;FFK L
}GG 
catchHH 
(HH %
EndpointNotFoundExceptionHH ,
endPointExceptionHH- >
)HH> ?
{II 
loggerJJ 
.JJ 
LogFatalJJ 
(JJ  
endPointExceptionJJ  1
)JJ1 2
;JJ2 3
DialogManagerKK 
.KK !
ShowErrorMessageAlertKK 3
(KK3 4

PropertiesKK4 >
.KK> ?
	ResourcesKK? H
.KKH I#
dialogEndPointExceptionKKI `
)KK` a
;KKa b
}LL 
catchMM 
(MM 
TimeoutExceptionMM #
timeOutExceptionMM$ 4
)MM4 5
{NN 
loggerOO 
.OO 
LogWarnOO 
(OO 
timeOutExceptionOO /
)OO/ 0
;OO0 1
DialogManagerPP 
.PP !
ShowErrorMessageAlertPP 3
(PP3 4

PropertiesPP4 >
.PP> ?
	ResourcesPP? H
.PPH I"
dialogTimeOutExceptionPPI _
)PP_ `
;PP` a
}QQ 
catchRR 
(RR "
CommunicationExceptionRR )"
communicationExceptionRR* @
)RR@ A
{SS 
loggerTT 
.TT 
LogFatalTT 
(TT  "
communicationExceptionTT  6
)TT6 7
;TT7 8
DialogManagerUU 
.UU !
ShowErrorMessageAlertUU 3
(UU3 4

PropertiesUU4 >
.UU> ?
	ResourcesUU? H
.UUH I'
dialogComunicationExceptionUUI d
)UUd e
;UUe f
}VV 
}WW 	
privateYY 
voidYY 
ConnectToTheLobbyYY &
(YY& '
)YY' (
{ZZ 	
LoggerManager[[ 
logger[[  
=[[! "
new[[# &
LoggerManager[[' 4
([[4 5
this[[5 9
.[[9 :
GetType[[: A
([[A B
)[[B C
)[[C D
;[[D E
try\\ 
{]] 
UserSession^^ 
userSession^^ '
=^^( )
new^^* -
UserSession^^. 9
(^^9 :
)^^: ;
{__ 
username`` 
=``  
UserProfileSingleton`` 3
.``3 4
username``4 <
,``< =
	idAccountaa 
=aa  
UserProfileSingletonaa  4
.aa4 5
	idAccountaa5 >
,aa> ?
	codeMatchbb 
=bb 
matchLobbyCodebb  .
}cc 
;cc 
lobbyManagerClientdd "
.dd" #
ConnectToLobbydd# 1
(dd1 2
userSessiondd2 =
,dd= >
matchLobbyCodedd> L
)ddL M
;ddM N
}ee 
catchff 
(ff %
EndpointNotFoundExceptionff ,
endPointExceptionff- >
)ff> ?
{gg 
loggerhh 
.hh 
LogFatalhh 
(hh  
endPointExceptionhh  1
)hh1 2
;hh2 3
DialogManagerii 
.ii !
ShowErrorMessageAlertii 3
(ii3 4

Propertiesii4 >
.ii> ?
	Resourcesii? H
.iiH I#
dialogEndPointExceptioniiI `
)ii` a
;iia b
}jj 
catchkk 
(kk 
TimeoutExceptionkk #
timeOutExceptionkk$ 4
)kk4 5
{ll 
loggermm 
.mm 
LogWarnmm 
(mm 
timeOutExceptionmm /
)mm/ 0
;mm0 1
DialogManagernn 
.nn !
ShowErrorMessageAlertnn 3
(nn3 4

Propertiesnn4 >
.nn> ?
	Resourcesnn? H
.nnH I"
dialogTimeOutExceptionnnI _
)nn_ `
;nn` a
}oo 
catchpp 
(pp "
CommunicationExceptionpp )"
communicationExceptionpp* @
)pp@ A
{qq 
loggerrr 
.rr 
LogFatalrr 
(rr  "
communicationExceptionrr  6
)rr6 7
;rr7 8
DialogManagerss 
.ss !
ShowErrorMessageAlertss 3
(ss3 4

Propertiesss4 >
.ss> ?
	Resourcesss? H
.ssH I'
dialogComunicationExceptionssI d
)ssd e
;sse f
}tt 
}uu 	
privateww 
voidww !
ConnectAsFriendJoinedww *
(ww* +
)ww+ ,
{xx 	
LoggerManageryy 
loggeryy  
=yy! "
newyy# &
LoggerManageryy' 4
(yy4 5
thisyy5 9
.yy9 :
GetTypeyy: A
(yyA B
)yyB C
)yyC D
;yyD E
tryzz 
{{{ 
UserSession|| 
session|| #
=||$ %
new||& )
UserSession||* 5
(||5 6
)||6 7
{}} 
	idAccount~~ 
=~~ 
userProfile~~  +
.~~+ ,
idAccesAccount~~, :
,~~: ;
username 
= 
userProfile *
.* +
username+ 3
,3 4
}
 
;
 "
friendsManagerClient
 $
.
$ %#
JoinAsConnectedFriend
% :
(
: ;
session
; B
)
B C
;
C D"
friendsManagerClient
 $
.
$ %
GetFriendsList
% 3
(
3 4
session
4 ;
)
; <
;
< =
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 
Image_MouseDown
 $
(
$ %
object
% +
sender
, 2
,
2 3"
MouseButtonEventArgs
4 H
e
I J
)
J K
{
 	
if
 
(
 
DialogManager
 
.
 *
ShowConfirmationMessageAlert
 :
(
: ;

Properties
; E
.
E F
	Resources
F O
.
O P%
dialogConfirmLeaveLobby
P g
)
g h
)
h i
{
 
LoggerManager
 
logger
 $
=
% &
new
' *
LoggerManager
+ 8
(
8 9
this
9 =
.
= >
GetType
> E
(
E F
)
F G
)
G H
;
H I
UserSession
 
userSession
 '
=
( )
new
* -
UserSession
. 9
(
9 :
)
: ;
{
 
username
 
=
 "
UserProfileSingleton
 3
.
3 4
username
4 <
,
< =
	idAccount
 
=
 "
UserProfileSingleton
  4
.
4 5
	idAccount
5 >
,
> ?
	codeMatch
 
=
 
MatchSingleton
  .
.
. /
	codeMatch
/ 8
}
 
;
 
try
   
{
¡¡ 
bool
¢¢ 
isKicked
¢¢ !
=
¢¢" #
false
¢¢$ )
;
¢¢) *
MatchSingleton
££ "
.
££" #
Instance
££# +
.
££+ ,
ResetSingleton
££, :
(
££: ;
)
££; <
;
££< =!
KickPlayerFromLobby
¤¤ '
(
¤¤' (
userSession
¤¤( 3
,
¤¤3 4
isKicked
¤¤5 =
)
¤¤= >
;
¤¤> ?'
RedirectRespectivePlayers
¥¥ -
(
¥¥- .
isKicked
¥¥. 6
)
¥¥6 7
;
¥¥7 8
matchLobbyCode
§§ "
=
§§# $
$str
§§% (
;
§§( )
}
¨¨ 
catch
©© 
(
©© '
EndpointNotFoundException
©© 0
endPointException
©©1 B
)
©©B C
{
ªª 
logger
«« 
.
«« 
LogFatal
«« #
(
««# $
endPointException
««$ 5
)
««5 6
;
««6 7
DialogManager
¬¬ !
.
¬¬! "#
ShowErrorMessageAlert
¬¬" 7
(
¬¬7 8

Properties
¬¬8 B
.
¬¬B C
	Resources
¬¬C L
.
¬¬L M%
dialogEndPointException
¬¬M d
)
¬¬d e
;
¬¬e f
}
­­ 
catch
®® 
(
®® 
TimeoutException
®® '
timeOutException
®®( 8
)
®®8 9
{
¯¯ 
logger
°° 
.
°° 
LogWarn
°° "
(
°°" #
timeOutException
°°# 3
)
°°3 4
;
°°4 5
DialogManager
±± !
.
±±! "#
ShowErrorMessageAlert
±±" 7
(
±±7 8

Properties
±±8 B
.
±±B C
	Resources
±±C L
.
±±L M$
dialogTimeOutException
±±M c
)
±±c d
;
±±d e
}
²² 
catch
³³ 
(
³³ $
CommunicationException
³³ -$
communicationException
³³. D
)
³³D E
{
´´ 
logger
µµ 
.
µµ 
LogFatal
µµ #
(
µµ# $$
communicationException
µµ$ :
)
µµ: ;
;
µµ; <
DialogManager
¶¶ !
.
¶¶! "#
ShowErrorMessageAlert
¶¶" 7
(
¶¶7 8

Properties
¶¶8 B
.
¶¶B C
	Resources
¶¶C L
.
¶¶L M)
dialogComunicationException
¶¶M h
)
¶¶h i
;
¶¶i j
}
·· 
}
¸¸ 
}
¹¹ 	
private
»» 
void
»» !
KickPlayerFromLobby
»» (
(
»»( )
UserSession
»») 4
session
»»5 <
,
»»< =
bool
»»> B
isKicked
»»C K
)
»»K L
{
¼¼ 	
LoggerManager
½½ 
logger
½½  
=
½½! "
new
½½# &
LoggerManager
½½' 4
(
½½4 5
this
½½5 9
.
½½9 :
GetType
½½: A
(
½½A B
)
½½B C
)
½½C D
;
½½D E
try
¾¾ 
{
¿¿  
lobbyManagerClient
ÀÀ "
.
ÀÀ" #"
LeavePlayerFromLobby
ÀÀ# 7
(
ÀÀ7 8
session
ÀÀ8 ?
,
ÀÀ? @
matchLobbyCode
ÀÀA O
,
ÀÀO P
isKicked
ÀÀQ Y
)
ÀÀY Z
;
ÀÀZ [
}
ÁÁ 
catch
ÂÂ 
(
ÂÂ '
EndpointNotFoundException
ÂÂ ,
endPointException
ÂÂ- >
)
ÂÂ> ?
{
ÃÃ 
logger
ÄÄ 
.
ÄÄ 
LogFatal
ÄÄ 
(
ÄÄ  
endPointException
ÄÄ  1
)
ÄÄ1 2
;
ÄÄ2 3
DialogManager
ÅÅ 
.
ÅÅ #
ShowErrorMessageAlert
ÅÅ 3
(
ÅÅ3 4

Properties
ÅÅ4 >
.
ÅÅ> ?
	Resources
ÅÅ? H
.
ÅÅH I%
dialogEndPointException
ÅÅI `
)
ÅÅ` a
;
ÅÅa b
}
ÆÆ 
catch
ÇÇ 
(
ÇÇ 
TimeoutException
ÇÇ #
timeOutException
ÇÇ$ 4
)
ÇÇ4 5
{
ÈÈ 
logger
ÉÉ 
.
ÉÉ 
LogWarn
ÉÉ 
(
ÉÉ 
timeOutException
ÉÉ /
)
ÉÉ/ 0
;
ÉÉ0 1
DialogManager
ÊÊ 
.
ÊÊ #
ShowErrorMessageAlert
ÊÊ 3
(
ÊÊ3 4

Properties
ÊÊ4 >
.
ÊÊ> ?
	Resources
ÊÊ? H
.
ÊÊH I$
dialogTimeOutException
ÊÊI _
)
ÊÊ_ `
;
ÊÊ` a
}
ËË 
catch
ÌÌ 
(
ÌÌ $
CommunicationException
ÌÌ )$
communicationException
ÌÌ* @
)
ÌÌ@ A
{
ÍÍ 
logger
ÎÎ 
.
ÎÎ 
LogFatal
ÎÎ 
(
ÎÎ  $
communicationException
ÎÎ  6
)
ÎÎ6 7
;
ÎÎ7 8
DialogManager
ÏÏ 
.
ÏÏ #
ShowErrorMessageAlert
ÏÏ 3
(
ÏÏ3 4

Properties
ÏÏ4 >
.
ÏÏ> ?
	Resources
ÏÏ? H
.
ÏÏH I)
dialogComunicationException
ÏÏI d
)
ÏÏd e
;
ÏÏe f
}
ÐÐ 
}
ÑÑ 	
private
ÓÓ 
void
ÓÓ  
LeaveUserGameLobby
ÓÓ '
(
ÓÓ' (
)
ÓÓ( )
{
ÔÔ 	
LoggerManager
ÕÕ 
logger
ÕÕ  
=
ÕÕ! "
new
ÕÕ# &
LoggerManager
ÕÕ' 4
(
ÕÕ4 5
this
ÕÕ5 9
.
ÕÕ9 :
GetType
ÕÕ: A
(
ÕÕA B
)
ÕÕB C
)
ÕÕC D
;
ÕÕD E
try
ÖÖ 
{
×× 
Profile
ØØ 
guestToDisconnect
ØØ )
=
ØØ* +
new
ØØ, /
Profile
ØØ0 7
(
ØØ7 8
)
ØØ8 9
{
ÙÙ 
username
ÚÚ 
=
ÚÚ "
UserProfileSingleton
ÚÚ 3
.
ÚÚ3 4
username
ÚÚ4 <
,
ÚÚ< =
idAccesAccount
ÛÛ "
=
ÛÛ# $"
UserProfileSingleton
ÛÛ% 9
.
ÛÛ9 :
	idAccount
ÛÛ: C
}
ÜÜ 
;
ÜÜ 
int
ÝÝ *
profileDisconnectionFromChat
ÝÝ 0
=
ÝÝ1 2
chatManager
ÝÝ3 >
.
ÝÝ> ?%
DisconectPlayerFromChat
ÝÝ? V
(
ÝÝV W
guestToDisconnect
ÝÝW h
,
ÝÝh i
matchLobbyCode
ÝÝj x
)
ÝÝx y
;
ÝÝy z
if
ÞÞ 
(
ÞÞ *
profileDisconnectionFromChat
ÞÞ 0
==
ÞÞ1 3
	Constants
ÞÞ4 =
.
ÞÞ= >
SuccesOperation
ÞÞ> M
)
ÞÞM N
{
ßß 
MainMenu
àà 
mainMenu
àà %
=
àà& '
new
àà( +
MainMenu
àà, 4
(
àà4 5
)
àà5 6
;
àà6 7
this
áá 
.
áá 
NavigationService
áá *
.
áá* +
Navigate
áá+ 3
(
áá3 4
mainMenu
áá4 <
)
áá< =
;
áá= >
}
ââ 
else
ãã 
{
ää 
DialogManager
åå !
.
åå! "%
ShowWarningMessageAlert
åå" 9
(
åå9 :

Properties
åå: D
.
ååD E
	Resources
ååE N
.
ååN O-
dialogCouldntLobbyDisconnection
ååO n
)
åån o
;
ååo p
}
ææ 
}
çç 
catch
èè 
(
èè '
EndpointNotFoundException
èè ,
endPointException
èè- >
)
èè> ?
{
éé 
logger
êê 
.
êê 
LogFatal
êê 
(
êê  
endPointException
êê  1
)
êê1 2
;
êê2 3
DialogManager
ëë 
.
ëë #
ShowErrorMessageAlert
ëë 3
(
ëë3 4

Properties
ëë4 >
.
ëë> ?
	Resources
ëë? H
.
ëëH I%
dialogEndPointException
ëëI `
)
ëë` a
;
ëëa b
}
ìì 
catch
íí 
(
íí 
TimeoutException
íí #
timeOutException
íí$ 4
)
íí4 5
{
îî 
logger
ïï 
.
ïï 
LogWarn
ïï 
(
ïï 
timeOutException
ïï /
)
ïï/ 0
;
ïï0 1
DialogManager
ðð 
.
ðð #
ShowErrorMessageAlert
ðð 3
(
ðð3 4

Properties
ðð4 >
.
ðð> ?
	Resources
ðð? H
.
ððH I$
dialogTimeOutException
ððI _
)
ðð_ `
;
ðð` a
}
ññ 
catch
òò 
(
òò $
CommunicationException
òò )$
communicationException
òò* @
)
òò@ A
{
óó 
logger
ôô 
.
ôô 
LogFatal
ôô 
(
ôô  $
communicationException
ôô  6
)
ôô6 7
;
ôô7 8
DialogManager
õõ 
.
õõ #
ShowErrorMessageAlert
õõ 3
(
õõ3 4

Properties
õõ4 >
.
õõ> ?
	Resources
õõ? H
.
õõH I)
dialogComunicationException
õõI d
)
õõd e
;
õõe f
}
öö 
}
÷÷ 	
private
ùù 
void
ùù !
LeaveGuestGameLobby
ùù (
(
ùù( )
)
ùù) *
{
úú 	
LoggerManager
ûû 
logger
ûû  
=
ûû! "
new
ûû# &
LoggerManager
ûû' 4
(
ûû4 5
this
ûû5 9
.
ûû9 :
GetType
ûû: A
(
ûûA B
)
ûûB C
)
ûûC D
;
ûûD E
try
üü 
{
ýý 
	HiveProxy
þþ 
.
þþ &
UserSessionManagerClient
þþ 2&
userSessionManagerClient
þþ3 K
=
þþL M
new
þþN Q
	HiveProxy
þþR [
.
þþ[ \&
UserSessionManagerClient
þþ\ t
(
þþt u
)
þþu v
;
þþv w
Profile
ÿÿ 
guestToDisconnect
ÿÿ )
=
ÿÿ* +
new
ÿÿ, /
Profile
ÿÿ0 7
(
ÿÿ7 8
)
ÿÿ8 9
{
 
username
 
=
 "
UserProfileSingleton
 3
.
3 4
username
4 <
,
< =
idAccesAccount
 "
=
# $"
UserProfileSingleton
% 9
.
9 :
	idAccount
: C
}
 
;
 
UserSession
 
userSession
 '
=
( )
new
* -
UserSession
. 9
(
9 :
)
: ;
{
 
username
 
=
 "
UserProfileSingleton
 3
.
3 4
username
4 <
,
< =
	idAccount
 
=
 "
UserProfileSingleton
  4
.
4 5
	idAccount
5 >
,
> ?
}
 
;
 
int
 *
profileDisconnectionFromChat
 0
=
1 2
chatManager
3 >
.
> ?%
DisconectPlayerFromChat
? V
(
V W
guestToDisconnect
W h
,
h i
matchLobbyCode
j x
)
x y
;
y z
int
 *
profileDisconnectionFromGame
 0
=
1 2&
userSessionManagerClient
3 K
.
K L

Disconnect
L V
(
V W
userSession
W b
,
b c
false
d i
)
i j
;
j k
if
 
(
 *
profileDisconnectionFromChat
 /
==
0 2
	Constants
3 <
.
< =
SuccesOperation
= L
&&
M O*
profileDisconnectionFromGame
P l
==
m o
	Constants
p y
.
y z
SuccesOperationz 
) 
{
 "
UserProfileSingleton
 (
.
( )
Instance
) 1
.
1 2
ResetSingleton
2 @
(
@ A
)
A B
;
B C
	LoginView
 
	loginView
 '
=
( )
new
* -
	LoginView
. 7
(
7 8
)
8 9
;
9 :
this
 
.
 
NavigationService
 *
.
* +
Navigate
+ 3
(
3 4
	loginView
4 =
)
= >
;
> ?
}
 
else
 
{
 
DialogManager
 !
.
! "%
ShowWarningMessageAlert
" 9
(
9 :

Properties
: D
.
D E
	Resources
E N
.
N O/
!globalDialog_PartialDisconnection
O p
)
p q
;
q r
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
   
(
   $
CommunicationException
   )$
communicationException
  * @
)
  @ A
{
¡¡ 
logger
¢¢ 
.
¢¢ 
LogFatal
¢¢ 
(
¢¢  $
communicationException
¢¢  6
)
¢¢6 7
;
¢¢7 8
DialogManager
££ 
.
££ #
ShowErrorMessageAlert
££ 3
(
££3 4

Properties
££4 >
.
££> ?
	Resources
££? H
.
££H I)
dialogComunicationException
££I d
)
££d e
;
££e f
}
¤¤ 
}
¥¥ 	
public
§§ 
void
§§ 
ReceiveMessage
§§ "
(
§§" #
Message
§§# *
[
§§* +
]
§§+ ,
messages
§§- 5
)
§§5 6
{
¨¨ 	
ChatMessagesPanel
©© 
.
©© 
Children
©© &
.
©©& '
Clear
©©' ,
(
©©, -
)
©©- .
;
©©. /
for
ªª 
(
ªª 
int
ªª 
indexListMessage
ªª %
=
ªª& '
$num
ªª( )
;
ªª) *
indexListMessage
ªª+ ;
<
ªª< =
messages
ªª> F
.
ªªF G
Length
ªªG M
;
ªªM N
indexListMessage
ªªO _
++
ªª_ a
)
ªªa b
{
«« 
if
¬¬ 
(
¬¬ 
messages
¬¬ 
[
¬¬ 
indexListMessage
¬¬ -
]
¬¬- .
.
¬¬. /
username
¬¬/ 7
.
¬¬7 8
Equals
¬¬8 >
(
¬¬> ?
userProfile
¬¬? J
.
¬¬J K
username
¬¬K S
)
¬¬S T
)
¬¬T U
{
­­ 
string
®® 
messageReceived
®® *
=
®®+ ,
$"
®®- /
{
®®/ 0
messages
®®0 8
[
®®8 9
indexListMessage
®®9 I
]
®®I J
.
®®J K
username
®®K S
}
®®S T
$str
®®T V
{
®®V W
messages
®®W _
[
®®_ `
indexListMessage
®®` p
]
®®p q
.
®®q r
text
®®r v
}
®®v w
$str
®®w x
{
®®x y
DateTime®®y 
.®® 
Now®® 
.®® 
ToString®® 
(®® 
$str®® 
)®® 
}®® 
"®® 
;®® 
Border
¯¯ 
messageContainer
¯¯ +
=
¯¯, -
new
¯¯. 1
Border
¯¯2 8
{
°° 

Background
±± "
=
±±# $
new
±±% (
SolidColorBrush
±±) 8
(
±±8 9
Colors
±±9 ?
.
±±? @
White
±±@ E
)
±±E F
,
±±F G
BorderThickness
²² '
=
²²( )
new
²²* -
	Thickness
²². 7
(
²²7 8
$num
²²8 9
)
²²9 :
,
²²: ;
Padding
³³ 
=
³³  !
new
³³" %
	Thickness
³³& /
(
³³/ 0
$num
³³0 2
)
³³2 3
,
³³3 4
Margin
´´ 
=
´´  
new
´´! $
	Thickness
´´% .
(
´´. /
$num
´´/ 1
,
´´1 2
$num
´´3 4
,
´´4 5
$num
´´6 8
,
´´8 9
$num
´´: ;
)
´´; <
,
´´< =!
HorizontalAlignment
µµ +
=
µµ, -!
HorizontalAlignment
µµ. A
.
µµA B
Right
µµB G
}
¶¶ 
;
¶¶ 
	TextBlock
·· 
messageBlock
·· *
=
··+ ,
new
··- 0
	TextBlock
··1 :
{
¸¸ 
Text
¹¹ 
=
¹¹ 
messageReceived
¹¹ .
,
¹¹. /

Foreground
ºº "
=
ºº# $
new
ºº% (
SolidColorBrush
ºº) 8
(
ºº8 9
Colors
ºº9 ?
.
ºº? @
Black
ºº@ E
)
ººE F
,
ººF G
FontSize
»»  
=
»»! "
$num
»»# %
,
»»% &

FontWeight
¼¼ "
=
¼¼# $
FontWeights
¼¼% 0
.
¼¼0 1
Bold
¼¼1 5
,
¼¼5 6
TextWrapping
½½ $
=
½½% &
TextWrapping
½½' 3
.
½½3 4
Wrap
½½4 8
,
½½8 9
MaxWidth
¾¾  
=
¾¾! "
$num
¾¾# &
}
¿¿ 
;
¿¿ 
messageContainer
ÀÀ $
.
ÀÀ$ %
Child
ÀÀ% *
=
ÀÀ+ ,
messageBlock
ÀÀ- 9
;
ÀÀ9 :
ChatMessagesPanel
ÁÁ %
.
ÁÁ% &
Children
ÁÁ& .
.
ÁÁ. /
Add
ÁÁ/ 2
(
ÁÁ2 3
messageContainer
ÁÁ3 C
)
ÁÁC D
;
ÁÁD E
}
ÂÂ 
else
ÃÃ 
{
ÄÄ 
string
ÅÅ 
messageReceived
ÅÅ *
=
ÅÅ+ ,
$"
ÅÅ- /
{
ÅÅ/ 0
messages
ÅÅ0 8
[
ÅÅ8 9
indexListMessage
ÅÅ9 I
]
ÅÅI J
.
ÅÅJ K
username
ÅÅK S
}
ÅÅS T
$str
ÅÅT V
{
ÅÅV W
messages
ÅÅW _
[
ÅÅ_ `
indexListMessage
ÅÅ` p
]
ÅÅp q
.
ÅÅq r
text
ÅÅr v
}
ÅÅv w
$str
ÅÅw x
{
ÅÅx y
DateTimeÅÅy 
.ÅÅ 
NowÅÅ 
.ÅÅ 
ToStringÅÅ 
(ÅÅ 
$strÅÅ 
)ÅÅ 
}ÅÅ 
"ÅÅ 
;ÅÅ 
Border
ÆÆ 
messageContainer
ÆÆ +
=
ÆÆ, -
new
ÆÆ. 1
Border
ÆÆ2 8
{
ÇÇ 

Background
ÈÈ "
=
ÈÈ# $
new
ÈÈ% (
SolidColorBrush
ÈÈ) 8
(
ÈÈ8 9
Colors
ÈÈ9 ?
.
ÈÈ? @
White
ÈÈ@ E
)
ÈÈE F
,
ÈÈF G
BorderThickness
ÉÉ '
=
ÉÉ( )
new
ÉÉ* -
	Thickness
ÉÉ. 7
(
ÉÉ7 8
$num
ÉÉ8 9
)
ÉÉ9 :
,
ÉÉ: ;
Padding
ÊÊ 
=
ÊÊ  !
new
ÊÊ" %
	Thickness
ÊÊ& /
(
ÊÊ/ 0
$num
ÊÊ0 2
)
ÊÊ2 3
,
ÊÊ3 4
Margin
ËË 
=
ËË  
new
ËË! $
	Thickness
ËË% .
(
ËË. /
$num
ËË/ 1
,
ËË1 2
$num
ËË3 4
,
ËË4 5
$num
ËË6 8
,
ËË8 9
$num
ËË: ;
)
ËË; <
,
ËË< =!
HorizontalAlignment
ÌÌ +
=
ÌÌ, -!
HorizontalAlignment
ÌÌ. A
.
ÌÌA B
Left
ÌÌB F
}
ÍÍ 
;
ÍÍ 
	TextBlock
ÎÎ 
messageBlock
ÎÎ *
=
ÎÎ+ ,
new
ÎÎ- 0
	TextBlock
ÎÎ1 :
{
ÏÏ 
Text
ÐÐ 
=
ÐÐ 
messageReceived
ÐÐ .
,
ÐÐ. /

Foreground
ÑÑ "
=
ÑÑ# $
new
ÑÑ% (
SolidColorBrush
ÑÑ) 8
(
ÑÑ8 9
Colors
ÑÑ9 ?
.
ÑÑ? @
Black
ÑÑ@ E
)
ÑÑE F
,
ÑÑF G
FontSize
ÒÒ  
=
ÒÒ! "
$num
ÒÒ# %
,
ÒÒ% &

FontWeight
ÓÓ "
=
ÓÓ# $
FontWeights
ÓÓ% 0
.
ÓÓ0 1
Bold
ÓÓ1 5
,
ÓÓ5 6
TextWrapping
ÔÔ $
=
ÔÔ% &
TextWrapping
ÔÔ' 3
.
ÔÔ3 4
Wrap
ÔÔ4 8
,
ÔÔ8 9
MaxWidth
ÕÕ  
=
ÕÕ! "
$num
ÕÕ# &
}
ÖÖ 
;
ÖÖ 
messageContainer
×× $
.
××$ %
Child
××% *
=
××+ ,
messageBlock
××- 9
;
××9 :
ChatMessagesPanel
ØØ %
.
ØØ% &
Children
ØØ& .
.
ØØ. /
Add
ØØ/ 2
(
ØØ2 3
messageContainer
ØØ3 C
)
ØØC D
;
ØØD E
}
ÙÙ 
}
ÚÚ 
}
ÜÜ 	
private
ÞÞ 
void
ÞÞ "
BtnSendMessage_Click
ÞÞ )
(
ÞÞ) *
object
ÞÞ* 0
sender
ÞÞ1 7
,
ÞÞ7 8
RoutedEventArgs
ÞÞ9 H
e
ÞÞI J
)
ÞÞJ K
{
ßß 	
LoggerManager
àà 
logger
àà  
=
àà! "
new
àà# &
LoggerManager
àà' 4
(
àà4 5
this
àà5 9
.
àà9 :
GetType
àà: A
(
ààA B
)
ààB C
)
ààC D
;
ààD E
string
áá 
message
áá 
=
áá 
txtb_MessageInput
áá .
.
áá. /
Text
áá/ 3
;
áá3 4
if
ãã 
(
ãã 
!
ãã 
string
ãã 
.
ãã 
IsNullOrEmpty
ãã %
(
ãã% &
message
ãã& -
)
ãã- .
)
ãã. /
{
ää 
Message
åå 
messageToSend
åå %
=
åå& '
new
åå( +
Message
åå, 3
(
åå3 4
)
åå4 5
{
ææ 
username
çç 
=
çç 
userProfile
çç *
.
çç* +
username
çç+ 3
,
çç3 4
text
èè 
=
èè 
message
èè "
}
éé 
;
éé 
try
êê 
{
ëë 
chatManager
ìì 
.
ìì  
SendMessages
ìì  ,
(
ìì, -
messageToSend
ìì- :
,
ìì: ;
matchLobbyCode
ìì; I
)
ììI J
;
ììJ K
txtb_MessageInput
íí %
.
íí% &
Clear
íí& +
(
íí+ ,
)
íí, -
;
íí- .
}
îî 
catch
ïï 
(
ïï '
EndpointNotFoundException
ïï 0
endPointException
ïï1 B
)
ïïB C
{
ðð 
logger
ññ 
.
ññ 
LogFatal
ññ #
(
ññ# $
endPointException
ññ$ 5
)
ññ5 6
;
ññ6 7
DialogManager
òò !
.
òò! "#
ShowErrorMessageAlert
òò" 7
(
òò7 8

Properties
òò8 B
.
òòB C
	Resources
òòC L
.
òòL M%
dialogEndPointException
òòM d
)
òòd e
;
òòe f
}
óó 
catch
ôô 
(
ôô 
TimeoutException
ôô '
timeOutException
ôô( 8
)
ôô8 9
{
õõ 
logger
öö 
.
öö 
LogWarn
öö "
(
öö" #
timeOutException
öö# 3
)
öö3 4
;
öö4 5
DialogManager
÷÷ !
.
÷÷! "#
ShowErrorMessageAlert
÷÷" 7
(
÷÷7 8

Properties
÷÷8 B
.
÷÷B C
	Resources
÷÷C L
.
÷÷L M$
dialogTimeOutException
÷÷M c
)
÷÷c d
;
÷÷d e
}
øø 
catch
ùù 
(
ùù $
CommunicationException
ùù -$
communicationException
ùù. D
)
ùùD E
{
úú 
logger
ûû 
.
ûû 
LogFatal
ûû #
(
ûû# $$
communicationException
ûû$ :
)
ûû: ;
;
ûû; <
DialogManager
üü !
.
üü! "#
ShowErrorMessageAlert
üü" 7
(
üü7 8

Properties
üü8 B
.
üüB C
	Resources
üüC L
.
üüL M)
dialogComunicationException
üüM h
)
üüh i
;
üüi j
}
ýý 
txtb_MessageInput
þþ !
.
þþ! "
Clear
þþ" '
(
þþ' (
)
þþ( )
;
þþ) * 
txtBlock_CharCount
ÿÿ "
.
ÿÿ" #
Text
ÿÿ# '
=
ÿÿ( )
$str
ÿÿ* 1
;
ÿÿ1 2
}
 
}
 	
private
 
void
 #
BtnInviteFriend_Click
 *
(
* +
object
+ 1
sender
2 8
,
8 9
RoutedEventArgs
: I
e
J K
)
K L
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 *
EmailInvitationManagerClient
 2*
emailInvitationManagerClient
3 O
=
P Q
new
R U
	HiveProxy
V _
.
_ `*
EmailInvitationManagerClient
` |
(
| }
)
} ~
;
~ 
try
 
{
 
Button
 
clickedButton
 $
=
% &
sender
' -
as
. 0
Button
1 7
;
7 8
Friend
 
friendToInvite
 %
=
& '
clickedButton
( 5
.
5 6
DataContext
6 A
as
B D
Friend
E K
;
K L
UserVerificator
 
userToInvite
  ,
=
- .
new
/ 2
UserVerificator
3 B
(
B C
)
C D
{
 
code
 
=
 
matchLobbyCode
 )
,
) *
email
 
=
 
friendToInvite
 *
.
* +
email
+ 0
,
0 1
}
 
;
 
int
 
resultInvitation
 $
=
% &*
emailInvitationManagerClient
' C
.
C D!
SendEmailInvitation
D W
(
W X
userToInvite
X d
)
d e
;
e f
if
 
(
 
resultInvitation
 #
==
$ &
	Constants
' 0
.
0 1
SuccesOperation
1 @
)
@ A
{
 
DialogManager
 !
.
! "%
ShowSuccessMessageAlert
" 9
(
9 :

Properties
: D
.
D E
	Resources
E N
.
N O'
dialogEmailInvitationSend
O h
)
h i
;
i j
}
 
else
 
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M$
dialogCouldntSendEmail
M c
)
c d
;
d e
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
   
logger
¡¡ 
.
¡¡ 
LogWarn
¡¡ 
(
¡¡ 
timeOutException
¡¡ /
)
¡¡/ 0
;
¡¡0 1
DialogManager
¢¢ 
.
¢¢ #
ShowErrorMessageAlert
¢¢ 3
(
¢¢3 4

Properties
¢¢4 >
.
¢¢> ?
	Resources
¢¢? H
.
¢¢H I$
dialogTimeOutException
¢¢I _
)
¢¢_ `
;
¢¢` a
}
££ 
catch
¤¤ 
(
¤¤ $
CommunicationException
¤¤ )$
communicationException
¤¤* @
)
¤¤@ A
{
¥¥ 
logger
¦¦ 
.
¦¦ 
LogFatal
¦¦ 
(
¦¦  $
communicationException
¦¦  6
)
¦¦6 7
;
¦¦7 8
DialogManager
§§ 
.
§§ #
ShowErrorMessageAlert
§§ 3
(
§§3 4

Properties
§§4 >
.
§§> ?
	Resources
§§? H
.
§§H I)
dialogComunicationException
§§I d
)
§§d e
;
§§e f
}
¨¨ 
}
©© 	
private
¬¬ 
void
¬¬ )
TxtMessageInput_TextChanged
¬¬ 0
(
¬¬0 1
object
¬¬1 7
sender
¬¬8 >
,
¬¬> ?"
TextChangedEventArgs
¬¬@ T
e
¬¬U V
)
¬¬V W
{
­­ 	
int
®® 
currentLength
®® 
=
®® 
txtb_MessageInput
®®  1
.
®®1 2
Text
®®2 6
.
®®6 7
Length
®®7 =
;
®®= > 
txtBlock_CharCount
¯¯ 
.
¯¯ 
Text
¯¯ #
=
¯¯$ %
$"
¯¯& (
{
¯¯( )
currentLength
¯¯) 6
}
¯¯6 7
$str
¯¯7 ;
"
¯¯; <
;
¯¯< =
if
°° 
(
°° 
currentLength
°° 
==
°°  
$num
°°! $
)
°°$ %
{
±± 
txtb_MessageInput
²² !
.
²²! "

IsReadOnly
²²" ,
=
²²- .
true
²²/ 3
;
²²3 4
}
³³ 
else
´´ 
{
µµ 
txtb_MessageInput
¶¶ !
.
¶¶! "

IsReadOnly
¶¶" ,
=
¶¶- .
false
¶¶/ 4
;
¶¶4 5
}
·· 
}
¸¸ 	
private
ºº 
void
ºº 
BtnSendOff_Click
ºº %
(
ºº% &
object
ºº& ,
sender
ºº- 3
,
ºº3 4
RoutedEventArgs
ºº5 D
e
ººE F
)
ººF G
{
»» 	
UserSession
¼¼ 

userToKick
¼¼ "
=
¼¼# $
usersInLobby
¼¼% 1
[
¼¼1 2
$num
¼¼2 3
]
¼¼3 4
;
¼¼4 5
if
½½ 
(
½½ 
DialogManager
½½ 
.
½½ *
ShowConfirmationMessageAlert
½½ :
(
½½: ;

Properties
½½; E
.
½½E F
	Resources
½½F O
.
½½O P*
dialogConfirmationKickPlayer
½½P l
)
½½l m
)
½½m n
{
¾¾ 
LoggerManager
¿¿ 
logger
¿¿ $
=
¿¿% &
new
¿¿' *
LoggerManager
¿¿+ 8
(
¿¿8 9
this
¿¿9 =
.
¿¿= >
GetType
¿¿> E
(
¿¿E F
)
¿¿F G
)
¿¿G H
;
¿¿H I
Profile
ÀÀ  
userToKickFromChat
ÀÀ *
=
ÀÀ+ ,
new
ÀÀ- 0
Profile
ÀÀ1 8
(
ÀÀ8 9
)
ÀÀ9 :
{
ÁÁ 
	idAccount
ÂÂ 
=
ÂÂ 

userToKick
ÂÂ  *
.
ÂÂ* +
	idAccount
ÂÂ+ 4
,
ÂÂ4 5
username
ÃÃ 
=
ÃÃ 

userToKick
ÃÃ )
.
ÃÃ) *
username
ÃÃ* 2
,
ÃÃ2 3
}
ÄÄ 
;
ÄÄ 
try
ÅÅ 
{
ÆÆ 
bool
ÇÇ 
isKicked
ÇÇ !
=
ÇÇ" #
true
ÇÇ$ (
;
ÇÇ( )
if
ÈÈ 
(
ÈÈ 

userToKick
ÈÈ "
.
ÈÈ" #
	idAccount
ÈÈ# ,
!=
ÈÈ- /
	Constants
ÈÈ0 9
.
ÈÈ9 :
DefaultGuestId
ÈÈ: H
)
ÈÈH I
{
ÉÉ 
MatchSingleton
ÊÊ &
.
ÊÊ& '
Instance
ÊÊ' /
.
ÊÊ/ 0
ResetSingleton
ÊÊ0 >
(
ÊÊ> ?
)
ÊÊ? @
;
ÊÊ@ A!
KickPlayerFromLobby
ËË +
(
ËË+ ,

userToKick
ËË, 6
,
ËË6 7
isKicked
ËË8 @
)
ËË@ A
;
ËËA B
chatManager
ÌÌ #
.
ÌÌ# $%
DisconectPlayerFromChat
ÌÌ$ ;
(
ÌÌ; < 
userToKickFromChat
ÌÌ< N
,
ÌÌN O
matchLobbyCode
ÌÌP ^
)
ÌÌ^ _
;
ÌÌ_ `
}
ÍÍ 
else
ÎÎ 
{
ÏÏ 
MatchSingleton
ÐÐ &
.
ÐÐ& '
Instance
ÐÐ' /
.
ÐÐ/ 0
ResetSingleton
ÐÐ0 >
(
ÐÐ> ?
)
ÐÐ? @
;
ÐÐ@ A!
KickPlayerFromLobby
ÑÑ +
(
ÑÑ+ ,

userToKick
ÑÑ, 6
,
ÑÑ6 7
isKicked
ÑÑ8 @
)
ÑÑ@ A
;
ÑÑA B&
UserSessionManagerClient
ÒÒ 0
.
ÒÒ0 1

Disconnect
ÒÒ1 ;
(
ÒÒ; <

userToKick
ÒÒ< F
,
ÒÒF G
false
ÒÒH M
)
ÒÒM N
;
ÒÒN O
}
ÓÓ 
}
ÔÔ 
catch
ÕÕ 
(
ÕÕ '
EndpointNotFoundException
ÕÕ 0
endPointException
ÕÕ1 B
)
ÕÕB C
{
ÖÖ 
logger
×× 
.
×× 
LogFatal
×× #
(
××# $
endPointException
××$ 5
)
××5 6
;
××6 7
DialogManager
ØØ !
.
ØØ! "#
ShowErrorMessageAlert
ØØ" 7
(
ØØ7 8

Properties
ØØ8 B
.
ØØB C
	Resources
ØØC L
.
ØØL M%
dialogEndPointException
ØØM d
)
ØØd e
;
ØØe f
}
ÙÙ 
catch
ÚÚ 
(
ÚÚ 
TimeoutException
ÚÚ '
timeOutException
ÚÚ( 8
)
ÚÚ8 9
{
ÛÛ 
logger
ÜÜ 
.
ÜÜ 
LogWarn
ÜÜ "
(
ÜÜ" #
timeOutException
ÜÜ# 3
)
ÜÜ3 4
;
ÜÜ4 5
DialogManager
ÝÝ !
.
ÝÝ! "#
ShowErrorMessageAlert
ÝÝ" 7
(
ÝÝ7 8

Properties
ÝÝ8 B
.
ÝÝB C
	Resources
ÝÝC L
.
ÝÝL M$
dialogTimeOutException
ÝÝM c
)
ÝÝc d
;
ÝÝd e
}
ÞÞ 
catch
ßß 
(
ßß $
CommunicationException
ßß -$
communicationException
ßß. D
)
ßßD E
{
àà 
logger
áá 
.
áá 
LogFatal
áá #
(
áá# $$
communicationException
áá$ :
)
áá: ;
;
áá; <
DialogManager
ââ !
.
ââ! "#
ShowErrorMessageAlert
ââ" 7
(
ââ7 8

Properties
ââ8 B
.
ââB C
	Resources
ââC L
.
ââL M)
dialogComunicationException
ââM h
)
ââh i
;
ââi j
}
ãã 
}
ää 
}
åå 	
private
çç 
void
çç ,
RefreshActiveFriendsList_Click
çç 3
(
çç3 4
object
çç4 :
sender
çç; A
,
ççA B
RoutedEventArgs
ççC R
e
ççS T
)
ççT U
{
èè 	
LoggerManager
éé 
logger
éé  
=
éé! "
new
éé# &
LoggerManager
éé' 4
(
éé4 5
this
éé5 9
.
éé9 :
GetType
éé: A
(
ééA B
)
ééB C
)
ééC D
;
ééD E
try
êê 
{
ëë 
UserSession
ìì 
userSession
ìì '
=
ìì( )
new
ìì* -
UserSession
ìì. 9
(
ìì9 :
)
ìì: ;
{
íí 
	idAccount
îî 
=
îî "
UserProfileSingleton
îî  4
.
îî4 5
	idAccount
îî5 >
,
îî> ?
username
ïï 
=
ïï "
UserProfileSingleton
ïï 3
.
ïï3 4
username
ïï4 <
}
ðð 
;
ðð "
friendsManagerClient
ññ $
.
ññ$ %
GetFriendsList
ññ% 3
(
ññ3 4
userSession
ññ4 ?
)
ññ? @
;
ññ@ A
}
òò 
catch
óó 
(
óó '
EndpointNotFoundException
óó ,
endPointException
óó- >
)
óó> ?
{
ôô 
logger
õõ 
.
õõ 
LogFatal
õõ 
(
õõ  
endPointException
õõ  1
)
õõ1 2
;
õõ2 3
DialogManager
öö 
.
öö #
ShowErrorMessageAlert
öö 3
(
öö3 4

Properties
öö4 >
.
öö> ?
	Resources
öö? H
.
ööH I%
dialogEndPointException
ööI `
)
öö` a
;
ööa b
}
÷÷ 
catch
øø 
(
øø 
TimeoutException
øø #
timeOutException
øø$ 4
)
øø4 5
{
ùù 
logger
úú 
.
úú 
LogWarn
úú 
(
úú 
timeOutException
úú /
)
úú/ 0
;
úú0 1
DialogManager
ûû 
.
ûû #
ShowErrorMessageAlert
ûû 3
(
ûû3 4

Properties
ûû4 >
.
ûû> ?
	Resources
ûû? H
.
ûûH I$
dialogTimeOutException
ûûI _
)
ûû_ `
;
ûû` a
}
üü 
catch
ýý 
(
ýý $
CommunicationException
ýý )$
communicationException
ýý* @
)
ýý@ A
{
þþ 
logger
ÿÿ 
.
ÿÿ 
LogFatal
ÿÿ 
(
ÿÿ  $
communicationException
ÿÿ  6
)
ÿÿ6 7
;
ÿÿ7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
public
 
void
 $
ObtainConnectedFriends
 *
(
* +
UserSession
+ 6
[
6 7
]
7 8
connectedFriends
9 I
)
I J
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E#
lvw_ActiveFriendsList
 !
.
! "
Items
" '
.
' (
Clear
( -
(
- .
)
. /
;
/ 0
try
 
{
 
	HiveProxy
 
.
 %
FriendshipManagerClient
 1%
friendshipManagerClient
2 I
=
J K
new
L O
	HiveProxy
P Y
.
Y Z%
FriendshipManagerClient
Z q
(
q r
)
r s
;
s t
Profile
  
userProfileRequest
 *
=
+ ,
new
- 0
Profile
1 8
(
8 9
)
9 :
{
 
idAccesAccount
 "
=
# $"
UserProfileSingleton
% 9
.
9 :
	idAccount
: C
}
 
;
 
Profile
 
[
 
]
 
friendsObtained
 )
=
* +%
friendshipManagerClient
, C
.
C D
GetAllFriends
D Q
(
Q R 
userProfileRequest
R d
)
d e
;
e f
List
 
<
 
Friend
 
>
 
friends
 $
=
% &
new
' *
List
+ /
<
/ 0
Friend
0 6
>
6 7
(
7 8
)
8 9
;
9 :!
UserSessionComparer
 #
comparer
$ ,
=
- .
new
/ 2!
UserSessionComparer
3 F
(
F G
)
G H
;
H I
for
 
(
 
int
 
friendsIndex
 %
=
& '
$num
( )
;
) *
friendsObtained
+ :
.
: ;
Length
; A
>
B C
friendsIndex
D P
;
P Q
friendsIndex
R ^
++
^ `
)
` a
{
 
UserSession
 
friendSession
  -
=
. /
new
0 3
UserSession
4 ?
(
? @
)
@ A
{
 
username
  
=
! "
friendsObtained
# 2
[
2 3
friendsIndex
3 ?
]
? @
.
@ A
username
A I
,
I J
	idAccount
 !
=
" #
friendsObtained
$ 3
[
3 4
friendsIndex
4 @
]
@ A
.
A B
	idAccount
B K
}
 
;
 
if
 
(
 
connectedFriends
 (
.
( )
Contains
) 1
(
1 2
friendSession
2 ?
,
? @
comparer
@ H
)
H I
)
I J
{
 
Friend
 
ActiveFriend
 +
=
, -
new
. 1
Friend
2 8
(
8 9
)
9 :
{
 
	idAccount
 %
=
& '
friendsObtained
( 7
[
7 8
friendsIndex
8 D
]
D E
.
E F
	idAccount
F O
,
O P
username
 $
=
% &
friendsObtained
' 6
[
6 7
friendsIndex
7 C
]
C D
.
D E
username
E M
,
M N
nickname
 $
=
% &
friendsObtained
' 6
[
6 7
friendsIndex
7 C
]
C D
.
D E
nickname
E M
,
M N
email
   !
=
  " #
friendsObtained
  $ 3
[
  3 4
friendsIndex
  4 @
]
  @ A
.
  A B
email
  B G
,
  G H
	imagePath
¡¡ %
=
¡¡& '
friendsObtained
¡¡( 7
[
¡¡7 8
friendsIndex
¡¡8 D
]
¡¡D E
.
¡¡E F
	imagePath
¡¡F O
}
¢¢ 
;
¢¢ 
friends
££ 
.
££  
Add
££  #
(
££# $
ActiveFriend
££$ 0
)
££0 1
;
££1 2
}
¤¤ 
}
¥¥ 
Application
¦¦ 
.
¦¦ 
Current
¦¦ #
.
¦¦# $

Dispatcher
¦¦$ .
.
¦¦. /
Invoke
¦¦/ 5
(
¦¦5 6
(
¦¦6 7
)
¦¦7 8
=>
¦¦9 ;
{
§§ #
lvw_ActiveFriendsList
¨¨ )
.
¨¨) *
Items
¨¨* /
.
¨¨/ 0
Clear
¨¨0 5
(
¨¨5 6
)
¨¨6 7
;
¨¨7 8
for
©© 
(
©© 
int
©© 
indexFriends
©© (
=
©©) *
$num
©©+ ,
;
©©, -
friends
©©. 5
.
©©5 6
Count
©©6 ;
>
©©< =
indexFriends
©©> J
;
©©J K
indexFriends
©©L X
++
©©X Z
)
©©Z [
{
ªª #
lvw_ActiveFriendsList
«« -
.
««- .
Items
««. 3
.
««3 4
Add
««4 7
(
««7 8
friends
««8 ?
[
««? @
indexFriends
««@ L
]
««L M
)
««M N
;
««N O
}
¬¬ 
}
­­ 
)
­­ 
;
­­ 
}
®® 
catch
¯¯ 
(
¯¯ '
EndpointNotFoundException
¯¯ ,
endPointException
¯¯- >
)
¯¯> ?
{
°° 
logger
±± 
.
±± 
LogFatal
±± 
(
±±  
endPointException
±±  1
)
±±1 2
;
±±2 3
DialogManager
²² 
.
²² #
ShowErrorMessageAlert
²² 3
(
²²3 4

Properties
²²4 >
.
²²> ?
	Resources
²²? H
.
²²H I%
dialogEndPointException
²²I `
)
²²` a
;
²²a b
}
³³ 
catch
´´ 
(
´´ 
TimeoutException
´´ #
timeOutException
´´$ 4
)
´´4 5
{
µµ 
logger
¶¶ 
.
¶¶ 
LogWarn
¶¶ 
(
¶¶ 
timeOutException
¶¶ /
)
¶¶/ 0
;
¶¶0 1
DialogManager
·· 
.
·· #
ShowErrorMessageAlert
·· 3
(
··3 4

Properties
··4 >
.
··> ?
	Resources
··? H
.
··H I$
dialogTimeOutException
··I _
)
··_ `
;
··` a
}
¸¸ 
catch
¹¹ 
(
¹¹ $
CommunicationException
¹¹ )$
communicationException
¹¹* @
)
¹¹@ A
{
ºº 
logger
»» 
.
»» 
LogFatal
»» 
(
»»  $
communicationException
»»  6
)
»»6 7
;
»»7 8
DialogManager
¼¼ 
.
¼¼ #
ShowErrorMessageAlert
¼¼ 3
(
¼¼3 4

Properties
¼¼4 >
.
¼¼> ?
	Resources
¼¼? H
.
¼¼H I)
dialogComunicationException
¼¼I d
)
¼¼d e
;
¼¼e f
}
½½ 
}
¾¾ 	
public
ÀÀ 
void
ÀÀ #
ReceivePlayersToLobby
ÀÀ )
(
ÀÀ) *
UserSession
ÀÀ* 5
[
ÀÀ5 6
]
ÀÀ6 7
user
ÀÀ8 <
)
ÀÀ< =
{
ÁÁ 	
usersInLobby
ÂÂ 
=
ÂÂ 
user
ÂÂ 
.
ÂÂ  
ToList
ÂÂ  &
(
ÂÂ& '
)
ÂÂ' (
;
ÂÂ( )
if
ÃÃ 
(
ÃÃ 
user
ÃÃ 
[
ÃÃ 
$num
ÃÃ 
]
ÃÃ 
.
ÃÃ 
	idAccount
ÃÃ !
==
ÃÃ" $
-
ÃÃ% &
$num
ÃÃ& '
)
ÃÃ' (
{
ÄÄ 
bool
ÅÅ 
isKicked
ÅÅ 
=
ÅÅ 
false
ÅÅ  %
;
ÅÅ% &
DialogManager
ÆÆ 
.
ÆÆ %
ShowWarningMessageAlert
ÆÆ 5
(
ÆÆ5 6

Properties
ÆÆ6 @
.
ÆÆ@ A
	Resources
ÆÆA J
.
ÆÆJ K
dialogHostHasLeft
ÆÆK \
)
ÆÆ\ ]
;
ÆÆ] ^'
RedirectRespectivePlayers
ÇÇ )
(
ÇÇ) *
isKicked
ÇÇ* 2
)
ÇÇ2 3
;
ÇÇ3 4
}
ÈÈ 
else
ÉÉ 
if
ÉÉ 
(
ÉÉ 
user
ÉÉ 
.
ÉÉ 
Length
ÉÉ  
==
ÉÉ! #
$num
ÉÉ$ %
)
ÉÉ% &
{
ÊÊ $
ChargeOnePlayerProfile
ËË &
(
ËË& '
user
ËË' +
[
ËË+ ,
$num
ËË, -
]
ËË- .
)
ËË. /
;
ËË/ 0
}
ÌÌ 
else
ÍÍ 
if
ÍÍ 
(
ÍÍ 
user
ÍÍ 
.
ÍÍ 
Length
ÍÍ  
==
ÍÍ! #
$num
ÍÍ$ %
)
ÍÍ% &
{
ÎÎ %
ChargeTwoPlayersProfile
ÏÏ '
(
ÏÏ' (
user
ÏÏ( ,
)
ÏÏ, -
;
ÏÏ- .
}
ÐÐ 
}
ÑÑ 	
private
ÓÓ 
void
ÓÓ '
RedirectRespectivePlayers
ÓÓ .
(
ÓÓ. /
bool
ÓÓ/ 3
isKicked
ÓÓ4 <
)
ÓÓ< =
{
ÔÔ 	
LoggerManager
ÕÕ 
logger
ÕÕ  
=
ÕÕ! "
new
ÕÕ# &
LoggerManager
ÕÕ' 4
(
ÕÕ4 5
this
ÕÕ5 9
.
ÕÕ9 :
GetType
ÕÕ: A
(
ÕÕA B
)
ÕÕB C
)
ÕÕC D
;
ÕÕD E
UserSession
ÖÖ 
userSession
ÖÖ #
=
ÖÖ$ %
new
ÖÖ& )
UserSession
ÖÖ* 5
(
ÖÖ5 6
)
ÖÖ6 7
{
×× 
username
ØØ 
=
ØØ "
UserProfileSingleton
ØØ /
.
ØØ/ 0
username
ØØ0 8
,
ØØ8 9
	idAccount
ÙÙ 
=
ÙÙ "
UserProfileSingleton
ÙÙ 0
.
ÙÙ0 1
	idAccount
ÙÙ1 :
}
ÚÚ 
;
ÚÚ 
try
ÛÛ 
{
ÜÜ 
if
ÝÝ 
(
ÝÝ "
UserProfileSingleton
ÝÝ (
.
ÝÝ( )
	idAccount
ÝÝ) 2
!=
ÝÝ3 5
	Constants
ÝÝ6 ?
.
ÝÝ? @
DefaultGuestId
ÝÝ@ N
)
ÝÝN O
{
ÞÞ 
MatchSingleton
ßß "
.
ßß" #
Instance
ßß# +
.
ßß+ ,
ResetSingleton
ßß, :
(
ßß: ;
)
ßß; <
;
ßß< =!
KickPlayerFromLobby
àà '
(
àà' (
userSession
àà( 3
,
àà3 4
isKicked
àà5 =
)
àà= >
;
àà> ? 
LeaveUserGameLobby
áá &
(
áá& '
)
áá' (
;
áá( )
}
ââ 
else
ãã 
{
ää 
MatchSingleton
åå "
.
åå" #
Instance
åå# +
.
åå+ ,
ResetSingleton
åå, :
(
åå: ;
)
åå; <
;
åå< =!
KickPlayerFromLobby
ææ '
(
ææ' (
userSession
ææ( 3
,
ææ3 4
isKicked
ææ5 =
)
ææ= >
;
ææ> ?!
LeaveGuestGameLobby
çç '
(
çç' (
)
çç( )
;
çç) *
}
èè 
matchLobbyCode
éé 
=
éé  
$str
éé! $
;
éé$ %
}
êê 
catch
ëë 
(
ëë '
EndpointNotFoundException
ëë ,
endPointException
ëë- >
)
ëë> ?
{
ìì 
logger
íí 
.
íí 
LogFatal
íí 
(
íí  
endPointException
íí  1
)
íí1 2
;
íí2 3
DialogManager
îî 
.
îî #
ShowErrorMessageAlert
îî 3
(
îî3 4

Properties
îî4 >
.
îî> ?
	Resources
îî? H
.
îîH I%
dialogEndPointException
îîI `
)
îî` a
;
îîa b
}
ïï 
catch
ðð 
(
ðð 
TimeoutException
ðð #
timeOutException
ðð$ 4
)
ðð4 5
{
ññ 
logger
òò 
.
òò 
LogWarn
òò 
(
òò 
timeOutException
òò /
)
òò/ 0
;
òò0 1
DialogManager
óó 
.
óó #
ShowErrorMessageAlert
óó 3
(
óó3 4

Properties
óó4 >
.
óó> ?
	Resources
óó? H
.
óóH I$
dialogTimeOutException
óóI _
)
óó_ `
;
óó` a
}
ôô 
catch
õõ 
(
õõ $
CommunicationException
õõ )$
communicationException
õõ* @
)
õõ@ A
{
öö 
logger
÷÷ 
.
÷÷ 
LogFatal
÷÷ 
(
÷÷  $
communicationException
÷÷  6
)
÷÷6 7
;
÷÷7 8
DialogManager
øø 
.
øø #
ShowErrorMessageAlert
øø 3
(
øø3 4

Properties
øø4 >
.
øø> ?
	Resources
øø? H
.
øøH I)
dialogComunicationException
øøI d
)
øød e
;
øøe f
}
ùù 
}
úú 	
private
üü 
void
üü $
ChargeOnePlayerProfile
üü +
(
üü+ ,
UserSession
üü, 7
user
üü8 <
)
üü< =
{
ýý 	
LoggerManager
þþ 
logger
þþ  
=
þþ! "
new
þþ# &
LoggerManager
þþ' 4
(
þþ4 5
this
þþ5 9
.
þþ9 :
GetType
þþ: A
(
þþA B
)
þþB C
)
þþC D
;
þþD E
	HiveProxy
ÿÿ 
.
ÿÿ 
UserManagerClient
ÿÿ '
userManagerClient
ÿÿ( 9
=
ÿÿ: ;
new
ÿÿ< ?
	HiveProxy
ÿÿ@ I
.
ÿÿI J
UserManagerClient
ÿÿJ [
(
ÿÿ[ \
)
ÿÿ\ ]
;
ÿÿ] ^
try
 
{
 
Profile
 
profileUser
 #
=
$ %
userManagerClient
& 7
.
7 8&
GetUserProfileByUsername
8 P
(
P Q
user
Q U
.
U V
username
V ^
)
^ _
;
_ `
txtb_HostName
 
.
 
Text
 "
=
# $
profileUser
% 0
.
0 1
nickname
1 9
;
9 :
img_AvatarHost
 
.
 
Source
 %
=
& '
new
( +
BitmapImage
, 7
(
7 8
new
8 ;
Uri
< ?
(
? @
profileUser
@ K
.
K L
	imagePath
L U
,
U V
UriKind
W ^
.
^ _
Relative
_ g
)
g h
)
h i
;
i j
	brd_Guest
 
.
 

Visibility
 $
=
% &

Visibility
' 1
.
1 2
	Collapsed
2 ;
;
; < 
ShowCreatorActions
 "
(
" #
)
# $
;
$ %
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 %
ChargeTwoPlayersProfile
 ,
(
, -
UserSession
- 8
[
8 9
]
9 :
users
; @
)
@ A
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 
UserManagerClient
 '
userManagerClient
( 9
=
: ;
new
< ?
	HiveProxy
@ I
.
I J
UserManagerClient
J [
(
[ \
)
\ ]
;
] ^
try
 
{
 
Profile
 
profileUserHost
 '
=
( )
userManagerClient
* ;
.
; <&
GetUserProfileByUsername
< T
(
T U
users
U Z
[
Z [
$num
[ \
]
\ ]
.
] ^
username
^ f
)
f g
;
g h
txtb_HostName
   
.
   
Text
   "
=
  # $
profileUserHost
  % 4
.
  4 5
nickname
  5 =
;
  = >
img_AvatarHost
¡¡ 
.
¡¡ 
Source
¡¡ %
=
¡¡& '
new
¡¡( +
BitmapImage
¡¡, 7
(
¡¡7 8
new
¡¡8 ;
Uri
¡¡< ?
(
¡¡? @
profileUserHost
¡¡@ O
.
¡¡O P
	imagePath
¡¡P Y
,
¡¡Y Z
UriKind
¡¡[ b
.
¡¡b c
Relative
¡¡c k
)
¡¡k l
)
¡¡l m
;
¡¡m n
if
¢¢ 
(
¢¢ 
users
¢¢ 
[
¢¢ 
$num
¢¢ 
]
¢¢ 
.
¢¢ 
	idAccount
¢¢ &
==
¢¢' )
	Constants
¢¢* 3
.
¢¢3 4
DefaultGuestId
¢¢4 B
)
¢¢B C
{
££ 
txtb_GuestName
¤¤ "
.
¤¤" #
Text
¤¤# '
=
¤¤( )
users
¤¤* /
[
¤¤/ 0
$num
¤¤0 1
]
¤¤1 2
.
¤¤2 3
username
¤¤3 ;
;
¤¤; <
img_AvatarGuest
¥¥ #
.
¥¥# $
Source
¥¥$ *
=
¥¥+ ,
new
¥¥- 0
BitmapImage
¥¥1 <
(
¥¥< =
new
¥¥= @
Uri
¥¥A D
(
¥¥D E
$str
¥¥E b
,
¥¥b c
UriKind
¥¥d k
.
¥¥k l
Relative
¥¥l t
)
¥¥t u
)
¥¥u v
;
¥¥v w
}
¦¦ 
else
§§ 
{
¨¨ 
Profile
©© 
profileUserGuest
©© ,
=
©©- .
userManagerClient
©©/ @
.
©©@ A&
GetUserProfileByUsername
©©A Y
(
©©Y Z
users
©©Z _
[
©©_ `
$num
©©` a
]
©©a b
.
©©b c
username
©©c k
)
©©k l
;
©©l m
txtb_GuestName
ªª "
.
ªª" #
Text
ªª# '
=
ªª( )
profileUserGuest
ªª* :
.
ªª: ;
nickname
ªª; C
;
ªªC D
img_AvatarGuest
«« #
.
««# $
Source
««$ *
=
««+ ,
new
««- 0
BitmapImage
««1 <
(
««< =
new
««= @
Uri
««A D
(
««D E
profileUserGuest
««E U
.
««U V
	imagePath
««V _
,
««_ `
UriKind
««a h
.
««h i
Relative
««i q
)
««q r
)
««r s
;
««s t
}
¬¬ 
	brd_Guest
­­ 
.
­­ 

Visibility
­­ $
=
­­% &

Visibility
­­' 1
.
­­1 2
Visible
­­2 9
;
­­9 :
	GameMatch
®® 
gamer
®® 
=
®®  !
new
®®" %
	GameMatch
®®& /
(
®®/ 0
)
®®0 1
{
¯¯ 
	idAccount
°° 
=
°° "
UserProfileSingleton
°°  4
.
°°4 5
	idAccount
°°5 >
,
°°> ?
code
±± 
=
±± 
matchLobbyCode
±± )
}
²² 
;
²² 
int
³³ !
verificationCreator
³³ '
=
³³( ) 
lobbyManagerClient
³³* <
.
³³< =%
VerifyCreatorOfTheMatch
³³= T
(
³³T U
gamer
³³U Z
)
³³Z [
;
³³[ \ 
ShowCorrectActions
´´ "
(
´´" #!
verificationCreator
´´# 6
)
´´6 7
;
´´7 8
}
µµ 
catch
¶¶ 
(
¶¶ '
EndpointNotFoundException
¶¶ ,
endPointException
¶¶- >
)
¶¶> ?
{
·· 
logger
¸¸ 
.
¸¸ 
LogFatal
¸¸ 
(
¸¸  
endPointException
¸¸  1
)
¸¸1 2
;
¸¸2 3
DialogManager
¹¹ 
.
¹¹ #
ShowErrorMessageAlert
¹¹ 3
(
¹¹3 4

Properties
¹¹4 >
.
¹¹> ?
	Resources
¹¹? H
.
¹¹H I%
dialogEndPointException
¹¹I `
)
¹¹` a
;
¹¹a b
}
ºº 
catch
»» 
(
»» 
TimeoutException
»» #
timeOutException
»»$ 4
)
»»4 5
{
¼¼ 
logger
½½ 
.
½½ 
LogWarn
½½ 
(
½½ 
timeOutException
½½ /
)
½½/ 0
;
½½0 1
DialogManager
¾¾ 
.
¾¾ #
ShowErrorMessageAlert
¾¾ 3
(
¾¾3 4

Properties
¾¾4 >
.
¾¾> ?
	Resources
¾¾? H
.
¾¾H I$
dialogTimeOutException
¾¾I _
)
¾¾_ `
;
¾¾` a
}
¿¿ 
catch
ÀÀ 
(
ÀÀ $
CommunicationException
ÀÀ )$
communicationException
ÀÀ* @
)
ÀÀ@ A
{
ÁÁ 
logger
ÂÂ 
.
ÂÂ 
LogFatal
ÂÂ 
(
ÂÂ  $
communicationException
ÂÂ  6
)
ÂÂ6 7
;
ÂÂ7 8
DialogManager
ÃÃ 
.
ÃÃ #
ShowErrorMessageAlert
ÃÃ 3
(
ÃÃ3 4

Properties
ÃÃ4 >
.
ÃÃ> ?
	Resources
ÃÃ? H
.
ÃÃH I)
dialogComunicationException
ÃÃI d
)
ÃÃd e
;
ÃÃe f
}
ÄÄ 
}
ÅÅ 	
private
ÇÇ 
void
ÇÇ  
ShowCorrectActions
ÇÇ '
(
ÇÇ' (
int
ÇÇ( + 
verificationResult
ÇÇ, >
)
ÇÇ> ?
{
ÈÈ 	
if
ÉÉ 
(
ÉÉ  
verificationResult
ÉÉ !
==
ÉÉ" $
$num
ÉÉ% &
)
ÉÉ& '
{
ÊÊ "
HideFullLobbyActions
ËË $
(
ËË$ %
)
ËË% &
;
ËË& '
btn_SendOffPlayer
ÌÌ !
.
ÌÌ! "

Visibility
ÌÌ" ,
=
ÌÌ- .

Visibility
ÌÌ/ 9
.
ÌÌ9 :
	Collapsed
ÌÌ: C
;
ÌÌC D
}
ÍÍ 
else
ÍÍ 
if
ÍÍ 
(
ÍÍ  
verificationResult
ÍÍ '
==
ÍÍ( *
$num
ÍÍ+ ,
)
ÍÍ, -
{
ÎÎ "
HideFullLobbyActions
ÏÏ $
(
ÏÏ$ %
)
ÏÏ% &
;
ÏÏ& '
btn_SendOffPlayer
ÐÐ !
.
ÐÐ! "

Visibility
ÐÐ" ,
=
ÐÐ, -

Visibility
ÐÐ. 8
.
ÐÐ8 9
Visible
ÐÐ9 @
;
ÐÐ@ A
	btn_Start
ÑÑ 
.
ÑÑ 

Visibility
ÑÑ $
=
ÑÑ% &

Visibility
ÑÑ' 1
.
ÑÑ1 2
Visible
ÑÑ2 9
;
ÑÑ9 :
}
ÒÒ 
}
ÓÓ 	
private
ÕÕ 
void
ÕÕ  
SearchFriend_Click
ÕÕ '
(
ÕÕ' (
object
ÕÕ( .
sender
ÕÕ/ 5
,
ÕÕ5 6
	EventArgs
ÕÕ7 @
e
ÕÕA B
)
ÕÕB C
{
ÖÖ 	
txt_SearchFriend
×× 
.
×× 
BorderBrush
×× (
=
××) *
Brushes
××+ 2
.
××2 3
Yellow
××3 9
;
××9 :
if
ØØ 
(
ØØ 
ValidateField
ØØ 
(
ØØ 
)
ØØ 
)
ØØ  
{
ÙÙ 
List
ÚÚ 
<
ÚÚ 
Friend
ÚÚ 
>
ÚÚ 
friends
ÚÚ $
=
ÚÚ% &#
lvw_ActiveFriendsList
ÚÚ' <
.
ÚÚ< =
Items
ÚÚ= B
.
ÚÚB C
Cast
ÚÚC G
<
ÚÚG H
Friend
ÚÚH N
>
ÚÚN O
(
ÚÚO P
)
ÚÚP Q
.
ÚÚQ R
ToList
ÚÚR X
(
ÚÚX Y
)
ÚÚY Z
;
ÚÚZ [
Friend
ÛÛ 
foundedFriend
ÛÛ $
=
ÛÛ% &
new
ÛÛ' *
Friend
ÛÛ+ 1
(
ÛÛ1 2
)
ÛÛ2 3
;
ÛÛ3 4
foundedFriend
ÜÜ 
.
ÜÜ 
username
ÜÜ &
=
ÜÜ' (
$str
ÜÜ) 5
;
ÜÜ5 6
for
ÝÝ 
(
ÝÝ 
int
ÝÝ 
friendsIndex
ÝÝ $
=
ÝÝ$ %
$num
ÝÝ% &
;
ÝÝ& '
friendsIndex
ÝÝ( 4
<
ÝÝ4 5
friends
ÝÝ5 <
.
ÝÝ< =
Count
ÝÝ= B
;
ÝÝB C
friendsIndex
ÝÝD P
++
ÝÝP R
)
ÝÝR S
{
ÞÞ 
if
ßß 
(
ßß 
friends
ßß 
[
ßß 
friendsIndex
ßß +
]
ßß+ ,
.
ßß, -
username
ßß- 5
==
ßß6 8
txt_SearchFriend
ßß9 I
.
ßßI J
Text
ßßJ N
)
ßßN O
{
àà 
foundedFriend
áá $
=
áá% &
friends
áá' .
[
áá. /
friendsIndex
áá/ ;
]
áá; <
;
áá< =
}
ââ 
}
ãã 
if
ää 
(
ää 
foundedFriend
ää !
.
ää! "
username
ää" *
!=
ää+ -
$str
ää. :
)
ää: ;
{
åå #
lvw_ActiveFriendsList
ææ )
.
ææ) *
Items
ææ* /
.
ææ/ 0
Clear
ææ0 5
(
ææ5 6
)
ææ6 7
;
ææ7 8#
lvw_ActiveFriendsList
çç )
.
çç) *
Items
çç* /
.
çç/ 0
Add
çç0 3
(
çç3 4
foundedFriend
çç4 A
)
ççA B
;
ççB C
}
èè 
else
éé 
{
êê 
DialogManager
ëë !
.
ëë! "%
ShowWarningMessageAlert
ëë" 9
(
ëë9 :

Properties
ëë: D
.
ëëD E
	Resources
ëëE N
.
ëëN O+
dialogMangerCouldntFindFriend
ëëO l
)
ëël m
;
ëëm n
}
ìì 
}
íí 
else
îî 
{
ïï 
DialogManager
ðð 
.
ðð #
ShowErrorMessageAlert
ðð 3
(
ðð3 4

Properties
ðð4 >
.
ðð> ?
	Resources
ðð? H
.
ððH I
dialogWrongData
ððI X
)
ððX Y
;
ððY Z
}
ññ 
}
òò 	
private
ôô 
void
ôô 
BtnStarGame_Click
ôô &
(
ôô& '
object
ôô' -
sender
ôô. 4
,
ôô4 5
RoutedEventArgs
ôô6 E
e
ôôF G
)
ôôG H
{
õõ 	
LoggerManager
öö 
logger
öö  
=
öö! "
new
öö# &
LoggerManager
öö' 4
(
öö4 5
this
öö5 9
.
öö9 :
GetType
öö: A
(
ööA B
)
ööB C
)
ööC D
;
ööD E
try
÷÷ 
{
øø  
lobbyManagerClient
ùù "
.
ùù" #

StartMatch
ùù# -
(
ùù- .
matchLobbyCode
ùù. <
)
ùù< =
;
ùù= >
MatchCreator
úú 
matchCreator
úú )
=
úú* +
new
úú, /
MatchCreator
úú0 <
(
úú< =
)
úú= >
{
ûû 
idCreatorAccount
üü $
=
üü% &"
UserProfileSingleton
üü' ;
.
üü; <
	idAccount
üü< E
,
üüE F
	codeMatch
ýý 
=
ýý 
matchLobbyCode
ýý  .
,
ýý. /

stateMatch
þþ 
=
þþ  
$str
þþ! *
}
ÿÿ 
;
ÿÿ '
MatchCreatorManagerClient
 )'
matchCreatorManagerClient
* C
=
D E
new
F I'
MatchCreatorManagerClient
J c
(
c d
)
d e
;
e f'
matchCreatorManagerClient
 )
.
) *
UpdateMatchState
* :
(
: ;
matchCreator
; G
)
G H
;
H I
GameBoardView
 
gameBoardView
 +
=
, -
new
. 1
GameBoardView
2 ?
(
? @
)
@ A
;
A B
this
 
.
 
NavigationService
 &
.
& '
Navigate
' /
(
/ 0
gameBoardView
0 =
)
= >
;
> ?
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
bool
 
ValidateField
 "
(
" #
)
# $
{
 	
bool
  
validationUserName
 #
=
$ %
	Validator
& /
.
/ 0
ValidateUsername
0 @
(
@ A
txt_SearchFriend
A Q
.
Q R
Text
R V
)
V W
;
W X
if
 
(
 
!
  
validationUserName
 #
)
# $
{
 
txt_SearchFriend
  
.
  !
BorderBrush
! ,
=
- .
Brushes
/ 6
.
6 7
Red
7 :
;
: ;
}
 
return
  
validationUserName
 %
;
% &
}
 	
public
   
void
   '
ReceiveKickedNotification
   -
(
  - .
)
  . /
{
¡¡ 	
DialogManager
¢¢ 
.
¢¢ %
ShowWarningMessageAlert
¢¢ 1
(
¢¢1 2

Properties
¢¢2 <
.
¢¢< =
	Resources
¢¢= F
.
¢¢F G!
dialogYouveBeenKick
¢¢G Z
)
¢¢Z [
;
¢¢[ \
if
££ 
(
££ "
UserProfileSingleton
££ #
.
££# $
	idAccount
££$ -
==
££. 0
	Constants
££1 :
.
££: ;
DefaultGuestId
££; I
)
££I J
{
¤¤ 
	LoginView
¥¥ 
	loginView
¥¥ #
=
¥¥$ %
new
¥¥& )
	LoginView
¥¥* 3
(
¥¥3 4
)
¥¥4 5
;
¥¥5 6
this
¦¦ 
.
¦¦ 
NavigationService
¦¦ &
.
¦¦& '
Navigate
¦¦' /
(
¦¦/ 0
	loginView
¦¦0 9
)
¦¦9 :
;
¦¦: ;
}
§§ 
else
¨¨ 
{
©© 
MainMenu
ªª 
mainMenu
ªª !
=
ªª" #
new
ªª$ '
MainMenu
ªª( 0
(
ªª0 1
)
ªª1 2
;
ªª2 3
this
«« 
.
«« 
NavigationService
«« &
.
««& '
Navigate
««' /
(
««/ 0
mainMenu
««0 8
)
««8 9
;
««9 :
}
¬¬ 
}
­­ 	
public
¯¯ 
void
¯¯ +
ReceiveStartMatchNotification
¯¯ 1
(
¯¯1 2
)
¯¯2 3
{
°° 	
GameBoardView
±± 
gameBoardView
±± '
=
±±( )
new
±±* -
GameBoardView
±±. ;
(
±±; <
)
±±< =
;
±±= >
this
²² 
.
²² 
NavigationService
²² "
.
²²" #
Navigate
²²# +
(
²²+ ,
gameBoardView
²², 9
)
²²9 :
;
²²: ;
}
³³ 	
private
µµ 
sealed
µµ 
class
µµ 
Friend
µµ #
{
¶¶ 	
public
·· 
int
·· 
	idAccount
··  
{
··! "
get
··$ '
;
··' (
set
··) ,
;
··, -
}
··. /
public
¸¸ 
string
¸¸ 
username
¸¸ "
{
¸¸# $
get
¸¸& )
;
¸¸) *
set
¸¸+ .
;
¸¸. /
}
¸¸0 1
public
ºº 
string
ºº 
nickname
ºº "
{
ºº# $
get
ºº% (
;
ºº( )
set
ºº* -
;
ºº- .
}
ºº/ 0
public
»» 
string
»» 
email
»» 
{
»»  !
get
»»" %
;
»»% &
set
»»' *
;
»»* +
}
»», -
public
½½ 
string
½½ 
	imagePath
½½ #
{
½½$ %
get
½½& )
;
½½) *
set
½½+ .
;
½½. /
}
½½0 1
}
¿¿ 	
}
ÀÀ 
public
ÃÃ 

class
ÃÃ !
UserSessionComparer
ÃÃ $
:
ÃÃ% &
IEqualityComparer
ÃÃ' 8
<
ÃÃ8 9
UserSession
ÃÃ9 D
>
ÃÃD E
{
ÄÄ 
public
ÅÅ 
bool
ÅÅ 
Equals
ÅÅ 
(
ÅÅ 
UserSession
ÅÅ &
userSessionOne
ÅÅ' 5
,
ÅÅ5 6
UserSession
ÅÅ7 B
userSessionTwo
ÅÅC Q
)
ÅÅQ R
{
ÆÆ 	
return
ÇÇ 
string
ÇÇ 
.
ÇÇ 
Equals
ÇÇ  
(
ÇÇ  !
userSessionOne
ÇÇ! /
.
ÇÇ/ 0
username
ÇÇ0 8
,
ÇÇ8 9
userSessionTwo
ÇÇ: H
.
ÇÇH I
username
ÇÇI Q
,
ÇÇQ R
StringComparison
ÇÇS c
.
ÇÇc d
Ordinal
ÇÇd k
)
ÇÇk l
&&
ÇÇm o
userSessionOne
ÈÈ !
.
ÈÈ! "
	idAccount
ÈÈ" +
==
ÈÈ, .
userSessionTwo
ÈÈ/ =
.
ÈÈ= >
	idAccount
ÈÈ> G
&&
ÈÈH J
userSessionOne
ÈÈK Y
.
ÈÈY Z
	codeMatch
ÈÈZ c
==
ÈÈd f
userSessionTwo
ÈÈg u
.
ÈÈu v
	codeMatch
ÈÈv 
;ÈÈ 
}
ÉÉ 	
public
ËË 
int
ËË 
GetHashCode
ËË 
(
ËË 
UserSession
ËË *
userSession
ËË+ 6
)
ËË6 7
{
ÌÌ 	
int
ÍÍ 
hashUsername
ÍÍ 
=
ÍÍ 
userSession
ÍÍ *
.
ÍÍ* +
username
ÍÍ+ 3
?
ÍÍ3 4
.
ÍÍ4 5
GetHashCode
ÍÍ5 @
(
ÍÍ@ A
)
ÍÍA B
??
ÍÍC E
$num
ÍÍF G
;
ÍÍG H
int
ÎÎ 
hashIdAccount
ÎÎ 
=
ÎÎ 
userSession
ÎÎ  +
.
ÎÎ+ ,
	idAccount
ÎÎ, 5
.
ÎÎ5 6
GetHashCode
ÎÎ6 A
(
ÎÎA B
)
ÎÎB C
;
ÎÎC D
int
ÏÏ 
hashCodeMatch
ÏÏ 
=
ÏÏ 
userSession
ÏÏ  +
.
ÏÏ+ ,
	codeMatch
ÏÏ, 5
?
ÏÏ5 6
.
ÏÏ6 7
GetHashCode
ÏÏ7 B
(
ÏÏB C
)
ÏÏC D
??
ÏÏE G
$num
ÏÏH I
;
ÏÏI J
return
ÐÐ 
hashUsername
ÐÐ 
^
ÐÐ  !
hashIdAccount
ÐÐ" /
^
ÐÐ0 1
hashCodeMatch
ÐÐ2 ?
;
ÐÐ? @
}
ÑÑ 	
}
ÒÒ 
}ÕÕ Ý
{C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\GameCodeView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
GameCodeView %
:& '
Page( ,
{ 
private 
string 

_codeLobby !
;! "
public 
GameCodeView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private!! 
void!! 
Image_MouseDown!! $
(!!$ %
object!!% +
sender!!, 2
,!!2 3 
MouseButtonEventArgs!!4 H
e!!I J
)!!J K
{"" 	
if## 
(##  
UserProfileSingleton## #
.### $
	idAccount##$ -
==##. 0
	Constants##1 :
.##: ;
DefaultGuestId##; I
)##I J
{$$ #
LeaveGuestGameLobbyJoin%% '
(%%' (
)%%( )
;%%) *
}&& 
else'' 
{(( 
MainMenu)) 
mainMenu)) !
=))" #
new))$ '
MainMenu))( 0
())0 1
)))1 2
;))2 3
this** 
.** 
NavigationService** &
.**& '
Navigate**' /
(**/ 0
mainMenu**0 8
)**8 9
;**9 :
}++ 
},, 	
private.. 
void.. #
LeaveGuestGameLobbyJoin.. ,
(.., -
)..- .
{// 	
LoggerManager00 
logger00  
=00! "
new00# &
LoggerManager00' 4
(004 5
this005 9
.009 :
GetType00: A
(00A B
)00B C
)00C D
;00D E
try11 
{22 
	HiveProxy33 
.33 $
UserSessionManagerClient33 2$
userSessionManagerClient333 K
=33L M
new33N Q
	HiveProxy33R [
.33[ \$
UserSessionManagerClient33\ t
(33t u
)33u v
;33v w
UserSession44 
userSession44 '
=44( )
new44* -
UserSession44. 9
(449 :
)44: ;
{55 
	idAccount66 
=66 
	Constants66  )
.66) *
DefaultGuestId66* 8
,668 9
username77 
=77  
UserProfileSingleton77 3
.773 4
username774 <
}88 
;88 
int99 (
profileDisconnectionFromGame99 0
=991 2$
userSessionManagerClient993 K
.99K L

Disconnect99L V
(99V W
userSession99W b
,99b c
false99d i
)99i j
;99j k
if:: 
(:: (
profileDisconnectionFromGame:: 0
==::1 3
	Constants::4 =
.::= >
SuccesOperation::> M
)::M N
{;;  
UserProfileSingleton<< (
.<<( )
Instance<<) 1
.<<1 2
ResetSingleton<<2 @
(<<@ A
)<<A B
;<<B C
	LoginView== 
	loginView== '
===( )
new==* -
	LoginView==. 7
(==7 8
)==8 9
;==9 :
this>> 
.>> 
NavigationService>> *
.>>* +
Navigate>>+ 3
(>>3 4
	loginView>>4 =
)>>= >
;>>> ?
}?? 
else@@ 
{AA 
DialogManagerBB !
.BB! "#
ShowWarningMessageAlertBB" 9
(BB9 :

PropertiesBB: D
.BBD E
	ResourcesBBE N
.BBN O+
dialogCouldntLobbyDisconnectionBBO n
)BBn o
;BBo p
}CC 
}DD 
catchEE 
(EE %
EndpointNotFoundExceptionEE ,
endPointExceptionEE- >
)EE> ?
{FF 
loggerGG 
.GG 
LogFatalGG 
(GG  
endPointExceptionGG  1
)GG1 2
;GG2 3
DialogManagerHH 
.HH !
ShowErrorMessageAlertHH 3
(HH3 4

PropertiesHH4 >
.HH> ?
	ResourcesHH? H
.HHH I#
dialogEndPointExceptionHHI `
)HH` a
;HHa b
}II 
catchJJ 
(JJ 
TimeoutExceptionJJ #
timeOutExceptionJJ$ 4
)JJ4 5
{KK 
loggerLL 
.LL 
LogWarnLL 
(LL 
timeOutExceptionLL /
)LL/ 0
;LL0 1
DialogManagerMM 
.MM !
ShowErrorMessageAlertMM 3
(MM3 4

PropertiesMM4 >
.MM> ?
	ResourcesMM? H
.MMH I"
dialogTimeOutExceptionMMI _
)MM_ `
;MM` a
}NN 
catchOO 
(OO "
CommunicationExceptionOO )"
communicationExceptionOO* @
)OO@ A
{PP 
loggerQQ 
.QQ 
LogFatalQQ 
(QQ  "
communicationExceptionQQ  6
)QQ6 7
;QQ7 8
DialogManagerRR 
.RR !
ShowErrorMessageAlertRR 3
(RR3 4

PropertiesRR4 >
.RR> ?
	ResourcesRR? H
.RRH I'
dialogComunicationExceptionRRI d
)RRd e
;RRe f
}SS 
}TT 	
privateWW 
voidWW 
BtnJoin_ClickWW "
(WW" #
objectWW# )
senderWW* 0
,WW0 1
RoutedEventArgsWW2 A
eWWB C
)WWC D
{XX 	
	txtb_CodeYY 
.YY 
BorderBrushYY !
=YY" #
BrushesYY$ +
.YY+ ,
YellowYY, 2
;YY2 3
ifZZ 
(ZZ 
ValidateFieldZZ 
(ZZ 
)ZZ 
)ZZ  
{[[ 

_codeLobby\\ 
=\\ 
Regex\\ "
.\\" #
Replace\\# *
(\\* +
	txtb_Code\\+ 4
.\\4 5
Text\\5 9
.\\9 :
Trim\\: >
(\\> ?
)\\? @
,\\@ A
$str\\B H
,\\H I
$str\\J L
,\\L M
RegexOptions\\N Z
.\\Z [
None\\[ _
,\\_ `
TimeSpan\\a i
.\\i j
FromMilliseconds\\j z
(\\z {
$num\\{ ~
)\\~ 
)	\\ 
;
\\ 
int]] !
validationResultLobby]] )
=]]* +!
ValidateExistingLobby]], A
(]]A B

_codeLobby]]B L
)]]L M
;]]M N
if^^ 
(^^ !
validationResultLobby^^ )
==^^* ,
	Constants^^- 6
.^^6 7
DataMatches^^7 B
)^^B C
{__ #
ValidateCapacityOfLobby`` +
(``+ ,

_codeLobby``, 6
)``6 7
;``7 8
}aa 
elsebb 
ifbb 
(bb !
validationResultLobbybb -
==bb. 0
	Constantsbb1 :
.bb: ;
NoDataMatchesbb; H
)bbH I
{cc 
DialogManagerdd !
.dd! "#
ShowWarningMessageAlertdd" 9
(dd9 :

Propertiesdd: D
.ddD E
	ResourcesddE N
.ddN O!
dialogNotExistingCodeddO d
)ddd e
;dde f
}ee 
}ff 
elsegg 
{hh 
DialogManagerii 
.ii !
ShowErrorMessageAlertii 3
(ii3 4

Propertiesii4 >
.ii> ?
	Resourcesii? H
.iiH I
dialogWrongDataiiI X
)iiX Y
;iiY Z
}jj 
}kk 	
privatemm 
voidmm #
ValidateCapacityOfLobbymm ,
(mm, -
stringmm- 3
	codeLobbymm4 =
)mm= >
{nn 	
LoggerManageroo 
loggeroo  
=oo! "
newoo# &
LoggerManageroo' 4
(oo4 5
thisoo5 9
.oo9 :
GetTypeoo: A
(ooA B
)ooB C
)ooC D
;ooD E
trypp 
{qq 
	HiveProxyrr 
.rr %
MatchCreatorManagerClientrr 3%
matchCreatorManagerClientrr4 M
=rrN O
newrrP S%
MatchCreatorManagerClientrrT m
(rrm n
)rrn o
;rro p
boolss 
verificationResultss '
=ss( )%
matchCreatorManagerClientss* C
.ssC D
VerifyIfLobbyIsFullssD W
(ssW X
	codeLobbyssX a
)ssa b
;ssb c
iftt 
(tt 
verificationResulttt &
)tt& '
{uu 
DialogManagervv !
.vv! "!
ShowErrorMessageAlertvv" 7
(vv7 8

Propertiesvv8 B
.vvB C
	ResourcesvvC L
.vvL M
dialogFullLobbyvvM \
)vv\ ]
;vv] ^
}ww 
elsexx 
{yy 
MatchSingletonzz "
.zz" #
Instancezz# +
.zz+ ,
CreateInstancezz, :
(zz: ;
	codeLobbyzz; D
)zzD E
;zzE F
	LobbyView{{ 
	lobbyView{{ '
={{( )
new{{* -
	LobbyView{{. 7
({{7 8
){{8 9
;{{9 :
this|| 
.|| 
NavigationService|| *
.||* +
Navigate||+ 3
(||3 4
	lobbyView||4 =
)||= >
;||> ?
}}} 
}~~ 
catch 
( %
EndpointNotFoundException ,
endPointException- >
)> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
int
 #
ValidateExistingLobby
 )
(
) *
string
* 0
	codeLobby
1 :
)
: ;
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
int
 
validationResult
  
=
! "
	Constants
# ,
.
, -
ErrorOperation
- ;
;
; <
try
 
{
 
	HiveProxy
 
.
 '
MatchCreatorManagerClient
 3'
matchCreatorManagerClient
4 M
=
N O
new
P S'
MatchCreatorManagerClient
T m
(
m n
)
n o
;
o p
bool
 &
validationExistingResult
 -
=
. /'
matchCreatorManagerClient
0 I
.
I J 
VerifyExistingCode
J \
(
\ ]
	codeLobby
] f
)
f g
;
g h
if
 
(
 &
validationExistingResult
 ,
)
, -
{
 
validationResult
 $
=
% &
	Constants
' 0
.
0 1
DataMatches
1 <
;
< =
}
 
else
 
{
 
validationResult
 $
=
% &
	Constants
' 0
.
0 1
NoDataMatches
1 >
;
> ?
}
 
}
   
catch
¡¡ 
(
¡¡ '
EndpointNotFoundException
¡¡ ,
endPointException
¡¡- >
)
¡¡> ?
{
¢¢ 
logger
££ 
.
££ 
LogFatal
££ 
(
££  
endPointException
££  1
)
££1 2
;
££2 3
DialogManager
¤¤ 
.
¤¤ #
ShowErrorMessageAlert
¤¤ 3
(
¤¤3 4

Properties
¤¤4 >
.
¤¤> ?
	Resources
¤¤? H
.
¤¤H I%
dialogEndPointException
¤¤I `
)
¤¤` a
;
¤¤a b
}
¥¥ 
catch
¦¦ 
(
¦¦ 
TimeoutException
¦¦ #
timeOutException
¦¦$ 4
)
¦¦4 5
{
§§ 
logger
¨¨ 
.
¨¨ 
LogWarn
¨¨ 
(
¨¨ 
timeOutException
¨¨ /
)
¨¨/ 0
;
¨¨0 1
DialogManager
©© 
.
©© #
ShowErrorMessageAlert
©© 3
(
©©3 4

Properties
©©4 >
.
©©> ?
	Resources
©©? H
.
©©H I$
dialogTimeOutException
©©I _
)
©©_ `
;
©©` a
}
ªª 
catch
«« 
(
«« $
CommunicationException
«« )$
communicationException
««* @
)
««@ A
{
¬¬ 
logger
­­ 
.
­­ 
LogFatal
­­ 
(
­­  $
communicationException
­­  6
)
­­6 7
;
­­7 8
DialogManager
®® 
.
®® #
ShowErrorMessageAlert
®® 3
(
®®3 4

Properties
®®4 >
.
®®> ?
	Resources
®®? H
.
®®H I)
dialogComunicationException
®®I d
)
®®d e
;
®®e f
}
¯¯ 
return
°° 
validationResult
°° #
;
°°# $
}
±± 	
private
³³ 
bool
³³ 
ValidateField
³³ "
(
³³" #
)
³³# $
{
´´ 	
bool
µµ 
validationResult
µµ !
=
µµ" #
	Validator
µµ$ -
.
µµ- .
ValidateCode
µµ. :
(
µµ: ;
	txtb_Code
µµ; D
.
µµD E
Text
µµE I
)
µµI J
;
µµJ K
if
¶¶ 
(
¶¶ 
!
¶¶ 
validationResult
¶¶ !
)
¶¶! "
{
·· 
	txtb_Code
¸¸ 
.
¸¸ 
BorderBrush
¸¸ %
=
¸¸& '
Brushes
¸¸( /
.
¸¸/ 0
Red
¸¸0 3
;
¸¸3 4
}
¹¹ 
return
ºº 
validationResult
ºº #
;
ºº# $
}
»» 	
private
½½ 
void
½½ ,
Txtb_Username_PreviewTextInput
½½ 3
(
½½3 4
object
½½4 :
sender
½½; A
,
½½A B&
TextCompositionEventArgs
½½C [
e
½½\ ]
)
½½] ^
{
¾¾ 	
e
ÀÀ 
.
ÀÀ 
Handled
ÀÀ 
=
ÀÀ 
!
ÀÀ 
Regex
ÀÀ 
.
ÀÀ 
IsMatch
ÀÀ &
(
ÀÀ& '
e
ÀÀ' (
.
ÀÀ( )
Text
ÀÀ) -
,
ÀÀ- .
$str
ÀÀ/ 8
,
ÀÀ8 9
RegexOptions
ÀÀ: F
.
ÀÀF G
None
ÀÀG K
,
ÀÀK L
TimeSpan
ÀÀM U
.
ÀÀU V
FromMilliseconds
ÀÀV f
(
ÀÀf g
$num
ÀÀg j
)
ÀÀj k
)
ÀÀk l
;
ÀÀl m
}
ÁÁ 	
private
ÃÃ 
void
ÃÃ '
Txtb_Username_TextChanged
ÃÃ .
(
ÃÃ. /
object
ÃÃ/ 5
sender
ÃÃ6 <
,
ÃÃ< ="
TextChangedEventArgs
ÃÃ> R
e
ÃÃS T
)
ÃÃT U
{
ÄÄ 	
var
ÅÅ 
textBox
ÅÅ 
=
ÅÅ 
sender
ÅÅ  
as
ÅÅ! #
TextBox
ÅÅ$ +
;
ÅÅ+ ,
if
ÆÆ 
(
ÆÆ 
textBox
ÆÆ 
==
ÆÆ 
null
ÆÆ 
)
ÆÆ  
return
ÆÆ! '
;
ÆÆ' (
string
ÈÈ 
	cleanText
ÈÈ 
=
ÈÈ 
textBox
ÈÈ &
.
ÈÈ& '
Text
ÈÈ' +
.
ÈÈ+ ,
Replace
ÈÈ, 3
(
ÈÈ3 4
$str
ÈÈ4 7
,
ÈÈ7 8
$str
ÈÈ9 ;
)
ÈÈ; <
;
ÈÈ< =
if
ÊÊ 
(
ÊÊ 
	cleanText
ÊÊ 
.
ÊÊ 
Length
ÊÊ  
>
ÊÊ! "
$num
ÊÊ# $
)
ÊÊ$ %
{
ËË 
	cleanText
ÌÌ 
=
ÌÌ 
	cleanText
ÌÌ %
.
ÌÌ% &
	Substring
ÌÌ& /
(
ÌÌ/ 0
$num
ÌÌ0 1
,
ÌÌ1 2
$num
ÌÌ3 4
)
ÌÌ4 5
;
ÌÌ5 6
}
ÍÍ 
string
ÏÏ 
formattedText
ÏÏ  
=
ÏÏ! "
string
ÏÏ# )
.
ÏÏ) *
Join
ÏÏ* .
(
ÏÏ. /
$str
ÏÏ/ 5
,
ÏÏ5 6
	cleanText
ÏÏ7 @
.
ÏÏ@ A
ToCharArray
ÏÏA L
(
ÏÏL M
)
ÏÏM N
)
ÏÏN O
;
ÏÏO P
if
ÑÑ 
(
ÑÑ 
textBox
ÑÑ 
.
ÑÑ 
Text
ÑÑ 
!=
ÑÑ 
formattedText
ÑÑ  -
)
ÑÑ- .
{
ÒÒ 
textBox
ÓÓ 
.
ÓÓ 
Text
ÓÓ 
=
ÓÓ 
formattedText
ÓÓ ,
;
ÓÓ, -
textBox
ÔÔ 
.
ÔÔ 

CaretIndex
ÔÔ "
=
ÔÔ# $
textBox
ÔÔ% ,
.
ÔÔ, -
Text
ÔÔ- 1
.
ÔÔ1 2
Length
ÔÔ2 8
;
ÔÔ8 9
}
ÕÕ 
}
ÖÖ 	
}
×× 
}ØØ ¥Ä
~C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\FriendsListView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
FriendsListView (
:) *
Page+ /
{ 
private 
Profile 
[ 
] 
friendsObtained )
;) *
public 
FriendsListView 
( 
)  
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private   
void   
LoadFriendships   $
(  $ %
)  % &
{!! 	
lvw_FriendsList"" 
."" 
Items"" !
.""! "
Clear""" '
(""' (
)""( )
;"") *
	HiveProxy## 
.## #
FriendshipManagerClient## -#
friendshipManagerClient##. E
=##F G
new##H K
	HiveProxy##L U
.##U V#
FriendshipManagerClient##V m
(##m n
)##n o
;##o p
LoggerManager$$ 
logger$$  
=$$! "
new$$# &
LoggerManager$$' 4
($$4 5
this$$5 9
.$$9 :
GetType$$: A
($$A B
)$$B C
)$$C D
;$$D E
try%% 
{&& 
Profile'' 
userProfile'' #
=''$ %
new''& )
Profile''* 1
(''1 2
)''2 3
{(( 
idAccesAccount)) "
=))# $ 
UserProfileSingleton))% 9
.))9 :
	idAccount)): C
}** 
;** 
friendsObtained++ 
=++  !#
friendshipManagerClient++" 9
.++9 :
GetAllFriends++: G
(++G H
userProfile++H S
)++S T
;++T U
if,, 
(,, 
friendsObtained,, #
.,,# $
Length,,$ *
==,,+ -
$num,,. /
),,/ 0
{-- 
DialogManager.. !
...! "#
ShowWarningMessageAlert.." 9
(..9 :

Properties..: D
...D E
	Resources..E N
...N O 
dialogNoFriendsAdded..O c
)..c d
;..d e
}// 
else00 
if00 
(00 
friendsObtained00 (
[00( )
$num00) *
]00* +
.00+ ,
	idProfile00, 5
==006 8
	Constants009 B
.00B C
ErrorOperation00C Q
)00Q R
{11 
DialogManager22 !
.22! "!
ShowErrorMessageAlert22" 7
(227 8

Properties228 B
.22B C
	Resources22C L
.22L M
dialogDataBaseError22M `
)22` a
;22a b
}33 
else44 
{55 "
LoadFriendsInformation66 *
(66* +
)66+ ,
;66, -
}77 
}88 
catch99 
(99 %
EndpointNotFoundException99 ,
endPointException99- >
)99> ?
{:: 
logger;; 
.;; 
LogFatal;; 
(;;  
endPointException;;  1
);;1 2
;;;2 3
DialogManager<< 
.<< !
ShowErrorMessageAlert<< 3
(<<3 4

Properties<<4 >
.<<> ?
	Resources<<? H
.<<H I#
dialogEndPointException<<I `
)<<` a
;<<a b
}== 
catch>> 
(>> 
TimeoutException>> #
timeOutException>>$ 4
)>>4 5
{?? 
logger@@ 
.@@ 
LogWarn@@ 
(@@ 
timeOutException@@ /
)@@/ 0
;@@0 1
DialogManagerAA 
.AA !
ShowErrorMessageAlertAA 3
(AA3 4

PropertiesAA4 >
.AA> ?
	ResourcesAA? H
.AAH I"
dialogTimeOutExceptionAAI _
)AA_ `
;AA` a
}BB 
catchCC 
(CC "
CommunicationExceptionCC )"
communicationExceptionCC* @
)CC@ A
{DD 
loggerEE 
.EE 
LogFatalEE 
(EE  "
communicationExceptionEE  6
)EE6 7
;EE7 8
DialogManagerFF 
.FF !
ShowErrorMessageAlertFF 3
(FF3 4

PropertiesFF4 >
.FF> ?
	ResourcesFF? H
.FFH I'
dialogComunicationExceptionFFI d
)FFd e
;FFe f
}GG 
}HH 	
privateJJ 
voidJJ "
LoadFriendsInformationJJ +
(JJ+ ,
)JJ, -
{KK 	
LoggerManagerLL 
loggerLL  
=LL! "
newLL# &
LoggerManagerLL' 4
(LL4 5
thisLL5 9
.LL9 :
GetTypeLL: A
(LLA B
)LLB C
)LLC D
;LLD E
	HiveProxyMM 
.MM $
UserSessionManagerClientMM .$
userSessionManagerClientMM/ G
=MMH I
newMMJ M
	HiveProxyMMN W
.MMW X$
UserSessionManagerClientMMX p
(MMp q
)MMq r
;MMr s
tryNN 
{OO 
forPP 
(PP 
intPP 
indexUsersProfilePP *
=PP+ ,
$numPP- .
;PP. /
indexUsersProfilePP0 A
<PPB C
friendsObtainedPPD S
.PPS T
LengthPPT Z
;PPZ [
indexUsersProfilePP\ m
++PPm o
)PPo p
{QQ 
UserSessionRR 
userSessionRR  +
=RR, -
newRR. 1
UserSessionRR2 =
(RR= >
)RR> ?
{SS 
usernameTT  
=TT! "
friendsObtainedTT# 2
[TT2 3
indexUsersProfileTT3 D
]TTD E
.TTE F
usernameTTF N
,TTN O
	idAccountUU !
=UU" #
friendsObtainedUU$ 3
[UU3 4
indexUsersProfileUU4 E
]UUE F
.UUF G
	idAccountUUG P
}VV 
;VV 
boolWW 
stateFriendWW $
=WW% &$
userSessionManagerClientWW' ?
.WW? @
VerifyConnectivityWW@ R
(WWR S
userSessionWWS ^
)WW^ _
;WW_ `
ProfileUserXX 
profileUserXX  +
=XX, -
newXX. 1
ProfileUserXX2 =
(XX= >
)XX> ?
{YY 
	idProfileZZ !
=ZZ" #
friendsObtainedZZ$ 3
[ZZ3 4
indexUsersProfileZZ4 E
]ZZE F
.ZZF G
	idProfileZZG P
,ZZP Q
	idAccount[[ !
=[[" #
friendsObtained[[$ 3
[[[3 4
indexUsersProfile[[4 E
][[E F
.[[F G
	idAccount[[G P
,[[P Q
username\\  
=\\! "
friendsObtained\\# 2
[\\2 3
indexUsersProfile\\3 D
]\\D E
.\\E F
username\\F N
,\\N O
imageProfile]] $
=]]% &
friendsObtained]]' 6
[]]6 7
indexUsersProfile]]7 H
]]]H I
.]]I J
	imagePath]]J S
,]]S T
state^^ 
=^^ 
stateFriend^^  +
}__ 
;__ 
lvw_FriendsList`` #
.``# $
Items``$ )
.``) *
Add``* -
(``- .
profileUser``. 9
)``9 :
;``: ;
}aa 
}bb 
catchcc 
(cc %
EndpointNotFoundExceptioncc ,
endPointExceptioncc- >
)cc> ?
{dd 
loggeree 
.ee 
LogFatalee 
(ee  
endPointExceptionee  1
)ee1 2
;ee2 3
DialogManagerff 
.ff !
ShowErrorMessageAlertff 3
(ff3 4

Propertiesff4 >
.ff> ?
	Resourcesff? H
.ffH I#
dialogEndPointExceptionffI `
)ff` a
;ffa b
}gg 
catchhh 
(hh 
TimeoutExceptionhh #
timeOutExceptionhh$ 4
)hh4 5
{ii 
loggerjj 
.jj 
LogWarnjj 
(jj 
timeOutExceptionjj /
)jj/ 0
;jj0 1
DialogManagerkk 
.kk !
ShowErrorMessageAlertkk 3
(kk3 4

Propertieskk4 >
.kk> ?
	Resourceskk? H
.kkH I"
dialogTimeOutExceptionkkI _
)kk_ `
;kk` a
}ll 
catchmm 
(mm "
CommunicationExceptionmm )"
communicationExceptionmm* @
)mm@ A
{nn 
loggeroo 
.oo 
LogFataloo 
(oo  "
communicationExceptionoo  6
)oo6 7
;oo7 8
DialogManagerpp 
.pp !
ShowErrorMessageAlertpp 3
(pp3 4

Propertiespp4 >
.pp> ?
	Resourcespp? H
.ppH I'
dialogComunicationExceptionppI d
)ppd e
;ppe f
}qq 
}ss 	
privateuu 
voiduu 
LoadFriendRequestsuu '
(uu' (
)uu( )
{vv 	
	HiveProxyww 
.ww &
FriendRequestManagerClientww 0&
friendRequestManagerClientww1 K
=wwL M
newwwN Q
	HiveProxywwR [
.ww[ \&
FriendRequestManagerClientww\ v
(wwv w
)www x
;wwx y
LoggerManagerxx 
loggerxx  
=xx! "
newxx# &
LoggerManagerxx' 4
(xx4 5
thisxx5 9
.xx9 :
GetTypexx: A
(xxA B
)xxB C
)xxC D
;xxD E
lvw_FriendRequestsyy 
.yy 
Itemsyy $
.yy$ %
Clearyy% *
(yy* +
)yy+ ,
;yy, -
try{{ 
{|| 
Profile}} 
userProfile}} #
=}}$ %
new}}& )
Profile}}* 1
(}}1 2
)}}2 3
{~~ 
idAccesAccount "
=# $ 
UserProfileSingleton% 9
.9 :
	idAccount: C
}
 
;
 
Profile
 
[
 
]
 $
friendRequestsObtained
 0
=
1 2(
friendRequestManagerClient
3 M
.
M N
GetFriendRequests
N _
(
_ `
userProfile
` k
)
k l
;
l m
if
 
(
 $
friendRequestsObtained
 *
.
* +
Length
+ 1
==
2 4
	Constants
5 >
.
> ?
NoDataMatches
? L
)
L M
{
 
DialogManager
 !
.
! "%
ShowWarningMessageAlert
" 9
(
9 :

Properties
: D
.
D E
	Resources
E N
.
N O#
dialogNoFriendRequest
O d
)
d e
;
e f
}
 
else
 
if
 
(
 $
friendRequestsObtained
 /
[
/ 0
$num
0 1
]
1 2
.
2 3
	idProfile
3 <
==
= ?
	Constants
@ I
.
I J
ErrorOperation
J X
)
X Y
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M!
dialogDataBaseError
M `
)
` a
;
a b
}
 
else
 
{
 "
LoadUsersInformation
 (
(
( )$
friendRequestsObtained
) ?
)
? @
;
@ A
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
   
void
   "
LoadUsersInformation
   )
(
  ) *
Profile
  * 1
[
  1 2
]
  2 3
usersProfile
  4 @
)
  @ A
{
¡¡ 	
for
¢¢ 
(
¢¢ 
int
¢¢ 
indexUsersProfile
¢¢ %
=
¢¢& '
$num
¢¢( )
;
¢¢) *
indexUsersProfile
¢¢, =
<
¢¢> ?
usersProfile
¢¢@ L
.
¢¢L M
Length
¢¢M S
;
¢¢S T
indexUsersProfile
¢¢U f
++
¢¢f h
)
¢¢h i
{
££ 
ProfileUser
¤¤ 
profileUser
¤¤ '
=
¤¤( )
new
¤¤* -
ProfileUser
¤¤. 9
(
¤¤9 :
)
¤¤: ;
{
¥¥ 
	idProfile
¦¦ 
=
¦¦ 
usersProfile
¦¦  ,
[
¦¦, -
indexUsersProfile
¦¦- >
]
¦¦> ?
.
¦¦? @
	idProfile
¦¦@ I
,
¦¦I J
	idAccount
§§ 
=
§§ 
usersProfile
§§  ,
[
§§, -
indexUsersProfile
§§- >
]
§§> ?
.
§§? @
idAccesAccount
§§@ N
,
§§N O
username
¨¨ 
=
¨¨ 
usersProfile
¨¨ +
[
¨¨+ ,
indexUsersProfile
¨¨, =
]
¨¨= >
.
¨¨> ?
nickname
¨¨? G
,
¨¨G H
imageProfile
©©  
=
©©! "
usersProfile
©©# /
[
©©/ 0
indexUsersProfile
©©0 A
]
©©A B
.
©©B C
	imagePath
©©C L
,
©©L M
}
ªª 
;
ªª  
lvw_FriendRequests
«« "
.
««" #
Items
««# (
.
««( )
Add
««) ,
(
««, -
profileUser
««- 8
)
««8 9
;
««9 :
}
¬¬ 
}
­­ 	
private
¯¯ 
void
¯¯ 

SearchUser
¯¯ 
(
¯¯  
object
¯¯  &
sender
¯¯' -
,
¯¯- .
RoutedEventArgs
¯¯/ >
e
¯¯? @
)
¯¯@ A
{
°° 	
if
±± 
(
±± 
VerifyField
±± 
(
±± 
)
±± 
)
±± 
{
²² 
if
´´ 
(
´´ 
txtb_SearchFriend
´´ %
.
´´% &
Text
´´& *
==
´´+ -"
UserProfileSingleton
´´. B
.
´´B C
username
´´C K
)
´´K L
{
µµ 
DialogManager
¶¶ !
.
¶¶! "%
ShowWarningMessageAlert
¶¶" 9
(
¶¶9 :

Properties
¶¶: D
.
¶¶D E
	Resources
¶¶E N
.
¶¶N O%
dialogCanNotAddYourself
¶¶O f
)
¶¶f g
;
¶¶g h
}
·· 
else
¸¸ 
{
¹¹ #
LoadFriendToAddSearch
ºº )
(
ºº) *
)
ºº* +
;
ºº+ ,
}
»» 
}
¼¼ 
else
½½ 
{
¾¾ 
DialogManager
¿¿ 
.
¿¿ #
ShowErrorMessageAlert
¿¿ 3
(
¿¿3 4

Properties
¿¿4 >
.
¿¿> ?
	Resources
¿¿? H
.
¿¿H I
dialogWrongData
¿¿I X
)
¿¿X Y
;
¿¿Y Z
}
ÀÀ 
}
ÁÁ 	
public
ÃÃ 
bool
ÃÃ 
VerifyField
ÃÃ 
(
ÃÃ  
)
ÃÃ  !
{
ÄÄ 	
lvw_FriendToAdd
ÅÅ 
.
ÅÅ 
Items
ÅÅ !
.
ÅÅ! "
Clear
ÅÅ" '
(
ÅÅ' (
)
ÅÅ( )
;
ÅÅ) *
bool
ÆÆ 
usernameField
ÆÆ 
=
ÆÆ  
	Validator
ÆÆ! *
.
ÆÆ* +
ValidateUsername
ÆÆ+ ;
(
ÆÆ; <
txtb_SearchFriend
ÆÆ< M
.
ÆÆM N
Text
ÆÆN R
)
ÆÆR S
;
ÆÆS T
if
ÈÈ 
(
ÈÈ 
!
ÈÈ 
usernameField
ÈÈ 
)
ÈÈ 
{
ÉÉ 
txtb_SearchFriend
ÊÊ !
.
ÊÊ! "
BorderBrush
ÊÊ" -
=
ÊÊ. /
Brushes
ÊÊ0 7
.
ÊÊ7 8
Red
ÊÊ8 ;
;
ÊÊ; <
}
ËË 
return
ÍÍ 
usernameField
ÍÍ  
;
ÍÍ  !
}
ÎÎ 	
private
ÐÐ 
void
ÐÐ #
LoadFriendToAddSearch
ÐÐ *
(
ÐÐ* +
)
ÐÐ+ ,
{
ÑÑ 	
	HiveProxy
ÒÒ 
.
ÒÒ 
UserManagerClient
ÒÒ '
userManagerClient
ÒÒ( 9
=
ÒÒ: ;
new
ÒÒ< ?
	HiveProxy
ÒÒ@ I
.
ÒÒI J
UserManagerClient
ÒÒJ [
(
ÒÒ[ \
)
ÒÒ\ ]
;
ÒÒ] ^
LoggerManager
ÓÓ 
logger
ÓÓ  
=
ÓÓ! "
new
ÓÓ# &
LoggerManager
ÓÓ' 4
(
ÓÓ4 5
this
ÓÓ5 9
.
ÓÓ9 :
GetType
ÓÓ: A
(
ÓÓA B
)
ÓÓB C
)
ÓÓC D
;
ÓÓD E
try
ÕÕ 
{
ÖÖ 
Profile
×× !
userProfileObtained
×× +
=
××, -
userManagerClient
××. ?
.
××? @&
GetUserProfileByUsername
××@ X
(
××X Y
txtb_SearchFriend
××Y j
.
××j k
Text
××k o
)
××o p
;
××p q
if
ÙÙ 
(
ÙÙ !
userProfileObtained
ÙÙ '
.
ÙÙ' (
	idProfile
ÙÙ( 1
>=
ÙÙ2 4
$num
ÙÙ5 6
)
ÙÙ6 7
{
ÚÚ 
Profile
ÛÛ 
profileObtained
ÛÛ +
=
ÛÛ, -
new
ÛÛ. 1
Profile
ÛÛ2 9
(
ÛÛ9 :
)
ÛÛ: ;
{
ÜÜ 
idAccesAccount
ÝÝ &
=
ÝÝ' (!
userProfileObtained
ÝÝ) <
.
ÝÝ< =
idAccesAccount
ÝÝ= K
}
ÞÞ 
;
ÞÞ 
int
ßß .
 verificationFriendRequestExisted
ßß 8
=
ßß9 :)
VerifyExistingFriendRequest
ßß; V
(
ßßV W
profileObtained
ßßW f
)
ßßf g
;
ßßg h
bool
àà 

areFriends
àà #
=
àà$ %
false
àà& +
;
àà+ ,
if
ââ 
(
ââ .
 verificationFriendRequestExisted
ââ 8
==
ââ9 ;
$num
ââ< =
)
ââ= >
{
ãã 

areFriends
ää "
=
ää# $
false
ää% *
;
ää* +!
LoadUserInformation
åå +
(
åå+ ,!
userProfileObtained
åå, ?
,
åå? @

areFriends
åå@ J
)
ååJ K
;
ååK L
}
ææ 
else
çç 
if
çç 
(
çç .
 verificationFriendRequestExisted
çç =
>=
çç> @
$num
ççA B
)
ççB C
{
èè 

areFriends
éé "
=
éé# $
true
éé% )
;
éé) *!
LoadUserInformation
êê +
(
êê+ ,!
userProfileObtained
êê, ?
,
êê? @

areFriends
êêA K
)
êêK L
;
êêL M
}
ëë 
else
ìì 
{
íí 
DialogManager
îî %
.
îî% &#
ShowErrorMessageAlert
îî& ;
(
îî; <

Properties
îî< F
.
îîF G
	Resources
îîG P
.
îîP Q!
dialogDataBaseError
îîQ d
)
îîd e
;
îîe f
}
ïï 
}
ðð 
else
ðð 
if
ðð 
(
ðð !
userProfileObtained
ðð ,
.
ðð, -
	idProfile
ðð- 6
==
ðð7 9
	Constants
ðð: C
.
ððC D
NoDataMatches
ððD Q
)
ððQ R
{
ññ 
DialogManager
òò !
.
òò! "%
ShowWarningMessageAlert
òò" 9
(
òò9 :

Properties
òò: D
.
òòD E
	Resources
òòE N
.
òòN O#
dialogNoUsernameFound
òòO d
)
òòd e
;
òòe f
}
óó 
else
óó 
if
óó 
(
óó !
userProfileObtained
óó ,
.
óó, -
	idProfile
óó- 6
==
óó7 9
	Constants
óó: C
.
óóC D
ErrorOperation
óóD R
)
óóR S
{
ôô 
DialogManager
õõ !
.
õõ! "#
ShowErrorMessageAlert
õõ" 7
(
õõ7 8

Properties
õõ8 B
.
õõB C
	Resources
õõC L
.
õõL M!
dialogDataBaseError
õõM `
)
õõ` a
;
õõa b
}
öö 
}
÷÷ 
catch
øø 
(
øø '
EndpointNotFoundException
øø ,
endPointException
øø- >
)
øø> ?
{
ùù 
logger
úú 
.
úú 
LogFatal
úú 
(
úú  
endPointException
úú  1
)
úú1 2
;
úú2 3
DialogManager
ûû 
.
ûû #
ShowErrorMessageAlert
ûû 3
(
ûû3 4

Properties
ûû4 >
.
ûû> ?
	Resources
ûû? H
.
ûûH I%
dialogEndPointException
ûûI `
)
ûû` a
;
ûûa b
}
üü 
catch
ýý 
(
ýý 
TimeoutException
ýý #
timeOutException
ýý$ 4
)
ýý4 5
{
þþ 
logger
ÿÿ 
.
ÿÿ 
LogWarn
ÿÿ 
(
ÿÿ 
timeOutException
ÿÿ /
)
ÿÿ/ 0
;
ÿÿ0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
int
 )
VerifyExistingFriendRequest
 /
(
/ 0
Profile
0 7
profileObtained
8 G
)
G H
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 (
FriendRequestManagerClient
 0(
friendRequestManagerClient
1 K
=
L M
new
N Q
	HiveProxy
R [
.
[ \(
FriendRequestManagerClient
\ v
(
v w
)
w x
;
x y
int
  
verificationResult
 "
=
# $
	Constants
% .
.
. /
ErrorOperation
/ =
;
= >
try
 
{
 
Profile
 
searcherProfile
 '
=
( )
new
* -
Profile
. 5
(
5 6
)
6 7
{
 
idAccesAccount
 "
=
# $"
UserProfileSingleton
% 9
.
9 :
	idAccount
: C
}
 
;
  
verificationResult
 "
=
# $(
friendRequestManagerClient
% ?
.
? @+
VerifyFriendRequestRegistered
@ ]
(
] ^
searcherProfile
^ m
,
m n
profileObtained
o ~
)
~ 
; 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
   
(
   $
CommunicationException
   )$
communicationException
  * @
)
  @ A
{
¡¡ 
logger
¢¢ 
.
¢¢ 
LogFatal
¢¢ 
(
¢¢  $
communicationException
¢¢  6
)
¢¢6 7
;
¢¢7 8
DialogManager
££ 
.
££ #
ShowErrorMessageAlert
££ 3
(
££3 4

Properties
££4 >
.
££> ?
	Resources
££? H
.
££H I)
dialogComunicationException
££I d
)
££d e
;
££e f
}
¤¤ 
return
¥¥  
verificationResult
¥¥ %
;
¥¥% &
}
¦¦ 	
private
¨¨ 
void
¨¨ !
AcceptFriendRequest
¨¨ (
(
¨¨( )
object
¨¨) /
sender
¨¨0 6
,
¨¨6 7
	EventArgs
¨¨8 A
e
¨¨B C
)
¨¨C D
{
©© 	
Button
ªª 
clickedButton
ªª  
=
ªª! "
sender
ªª# )
as
ªª* ,
Button
ªª- 3
;
ªª3 4
ProfileUser
«« 
profileUser
«« #
=
««$ %
clickedButton
««& 3
.
««3 4
DataContext
««4 ?
as
««@ B
ProfileUser
««C N
;
««N O
if
­­ 
(
­­ 
profileUser
­­ 
!=
­­ 
null
­­ #
)
­­# $
{
®® %
SendAcceptFriendRequest
¯¯ '
(
¯¯' (
profileUser
¯¯( 3
)
¯¯3 4
;
¯¯4 5
}
°° 
else
±± 
{
²² 
DialogManager
³³ 
.
³³ #
ShowErrorMessageAlert
³³ 3
(
³³3 4

Properties
³³4 >
.
³³> ?
	Resources
³³? H
.
³³H I,
dialogErrorAtObtainingUserData
³³I g
)
³³g h
;
³³h i
}
´´ 
}
µµ 	
private
¸¸ 
void
¸¸ "
DeclineFriendRequest
¸¸ )
(
¸¸) *
object
¸¸* 0
sender
¸¸1 7
,
¸¸7 8
	EventArgs
¸¸9 B
e
¸¸C D
)
¸¸D E
{
¹¹ 	
Button
ºº 
clickedButton
ºº  
=
ºº! "
sender
ºº# )
as
ºº* ,
Button
ºº- 3
;
ºº3 4
ProfileUser
»» 
profileUser
»» #
=
»»$ %
clickedButton
»»& 3
.
»»3 4
DataContext
»»4 ?
as
»»@ B
ProfileUser
»»C N
;
»»N O
if
½½ 
(
½½ 
profileUser
½½ 
!=
½½ 
null
½½ #
)
½½# $
{
¾¾ &
SendDeclineFriendRequest
¿¿ (
(
¿¿( )
profileUser
¿¿) 4
)
¿¿4 5
;
¿¿5 6
}
ÀÀ 
else
ÁÁ 
{
ÂÂ 
DialogManager
ÃÃ 
.
ÃÃ #
ShowErrorMessageAlert
ÃÃ 3
(
ÃÃ3 4

Properties
ÃÃ4 >
.
ÃÃ> ?
	Resources
ÃÃ? H
.
ÃÃH I,
dialogErrorAtObtainingUserData
ÃÃI g
)
ÃÃg h
;
ÃÃh i
}
ÄÄ 
}
ÅÅ 	
private
ÈÈ 
void
ÈÈ 
SendFriendRequest
ÈÈ &
(
ÈÈ& '
object
ÈÈ' -
sender
ÈÈ. 4
,
ÈÈ4 5
RoutedEventArgs
ÈÈ6 E
e
ÈÈF G
)
ÈÈG H
{
ÉÉ 	
Button
ÊÊ 
clickedButton
ÊÊ  
=
ÊÊ! "
sender
ÊÊ# )
as
ÊÊ* ,
Button
ÊÊ- 3
;
ÊÊ3 4
ProfileUser
ËË 
profileUser
ËË #
=
ËË$ %
clickedButton
ËË& 3
.
ËË3 4
DataContext
ËË4 ?
as
ËË@ B
ProfileUser
ËËC N
;
ËËN O
if
ÌÌ 
(
ÌÌ 
profileUser
ÌÌ 
!=
ÌÌ 
null
ÌÌ "
)
ÌÌ" #
{
ÍÍ !
CreateFriendRequest
ÎÎ #
(
ÎÎ# $
profileUser
ÎÎ$ /
)
ÎÎ/ 0
;
ÎÎ0 1
}
ÏÏ 
else
ÐÐ 
{
ÑÑ 
DialogManager
ÒÒ 
.
ÒÒ #
ShowErrorMessageAlert
ÒÒ 3
(
ÒÒ3 4

Properties
ÒÒ4 >
.
ÒÒ> ?
	Resources
ÒÒ? H
.
ÒÒH I,
dialogErrorAtObtainingUserData
ÒÒI g
)
ÒÒg h
;
ÒÒh i
}
ÓÓ 
}
ÔÔ 	
private
ÖÖ 
void
ÖÖ %
SendAcceptFriendRequest
ÖÖ ,
(
ÖÖ, -
ProfileUser
ÖÖ- 8
userToResponse
ÖÖ9 G
)
ÖÖG H
{
×× 	
LoggerManager
ØØ 
logger
ØØ  
=
ØØ! "
new
ØØ# &
LoggerManager
ØØ' 4
(
ØØ4 5
this
ØØ5 9
.
ØØ9 :
GetType
ØØ: A
(
ØØA B
)
ØØB C
)
ØØC D
;
ØØD E
	HiveProxy
ÙÙ 
.
ÙÙ (
FriendRequestManagerClient
ÙÙ 0(
friendRequestManagerClient
ÙÙ1 K
=
ÙÙL M
new
ÙÙN Q(
FriendRequestManagerClient
ÙÙR l
(
ÙÙl m
)
ÙÙm n
;
ÙÙn o
Profile
ÚÚ 
	playerOne
ÚÚ 
=
ÚÚ 
new
ÚÚ  #
Profile
ÚÚ$ +
(
ÚÚ+ ,
)
ÚÚ, -
{
ÛÛ 
idAccesAccount
ÜÜ 
=
ÜÜ  "
UserProfileSingleton
ÜÜ! 5
.
ÜÜ5 6
	idAccount
ÜÜ6 ?
}
ÝÝ 
;
ÝÝ 
Profile
ÞÞ 
	playerTwo
ÞÞ 
=
ÞÞ 
new
ÞÞ  #
Profile
ÞÞ$ +
(
ÞÞ+ ,
)
ÞÞ, -
{
ßß 
idAccesAccount
àà 
=
àà  
userToResponse
àà! /
.
àà/ 0
	idAccount
àà0 9
}
áá 
;
áá 
try
ââ 
{
ãã 
int
ää 
resultCreation
ää "
=
ää# $(
friendRequestManagerClient
ää% ?
.
ää? @!
AcceptFriendRequest
ää@ S
(
ääS T
	playerOne
ääT ]
,
ää] ^
	playerTwo
ää_ h
)
ääh i
;
ääi j
if
åå 
(
åå 
resultCreation
åå "
==
åå# %
	Constants
åå& /
.
åå/ 0
SuccesOperation
åå0 ?
)
åå? @
{
ææ 
DialogManager
çç !
.
çç! "%
ShowSuccessMessageAlert
çç" 9
(
çç9 :

Properties
çç: D
.
ççD E
	Resources
ççE N
.
ççN O'
dialogAcceptFriendRequest
ççO h
)
ççh i
;
ççi j 
lvw_FriendRequests
èè &
.
èè& '
Items
èè' ,
.
èè, -
Clear
èè- 2
(
èè2 3
)
èè3 4
;
èè4 5
}
éé 
else
êê 
if
êê 
(
êê 
resultCreation
êê '
==
êê( *
	Constants
êê+ 4
.
êê4 5
ErrorOperation
êê5 C
)
êêC D
{
ëë 
DialogManager
ìì !
.
ìì! "#
ShowErrorMessageAlert
ìì" 7
(
ìì7 8

Properties
ìì8 B
.
ììB C
	Resources
ììC L
.
ììL M!
dialogDataBaseError
ììM `
)
ìì` a
;
ììa b
}
íí 
}
îî 
catch
ïï 
(
ïï '
EndpointNotFoundException
ïï ,
endPointException
ïï- >
)
ïï> ?
{
ðð 
logger
ññ 
.
ññ 
LogFatal
ññ 
(
ññ  
endPointException
ññ  1
)
ññ1 2
;
ññ2 3
DialogManager
òò 
.
òò #
ShowErrorMessageAlert
òò 3
(
òò3 4

Properties
òò4 >
.
òò> ?
	Resources
òò? H
.
òòH I%
dialogEndPointException
òòI `
)
òò` a
;
òòa b
}
óó 
catch
ôô 
(
ôô 
TimeoutException
ôô #
timeOutException
ôô$ 4
)
ôô4 5
{
õõ 
logger
öö 
.
öö 
LogWarn
öö 
(
öö 
timeOutException
öö /
)
öö/ 0
;
öö0 1
DialogManager
÷÷ 
.
÷÷ #
ShowErrorMessageAlert
÷÷ 3
(
÷÷3 4

Properties
÷÷4 >
.
÷÷> ?
	Resources
÷÷? H
.
÷÷H I$
dialogTimeOutException
÷÷I _
)
÷÷_ `
;
÷÷` a
}
øø 
catch
ùù 
(
ùù $
CommunicationException
ùù )$
communicationException
ùù* @
)
ùù@ A
{
úú 
logger
ûû 
.
ûû 
LogFatal
ûû 
(
ûû  $
communicationException
ûû  6
)
ûû6 7
;
ûû7 8
DialogManager
üü 
.
üü #
ShowErrorMessageAlert
üü 3
(
üü3 4

Properties
üü4 >
.
üü> ?
	Resources
üü? H
.
üüH I)
dialogComunicationException
üüI d
)
üüd e
;
üüe f
}
ýý 
}
þþ 	
private
 
void
 &
SendDeclineFriendRequest
 -
(
- .
ProfileUser
. 9
userToResponse
: H
)
H I
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 (
FriendRequestManagerClient
 0(
friendRequestManagerClient
1 K
=
L M
new
N Q(
FriendRequestManagerClient
R l
(
l m
)
m n
;
n o
Profile
 
	playerOne
 
=
 
new
  #
Profile
$ +
(
+ ,
)
, -
{
 
idAccesAccount
 
=
  "
UserProfileSingleton
! 5
.
5 6
	idAccount
6 ?
}
 
;
 
Profile
 
	playerTwo
 
=
 
new
  #
Profile
$ +
(
+ ,
)
, -
{
 
idAccesAccount
 
=
  
userToResponse
! /
.
/ 0
	idAccount
0 9
}
 
;
 
try
 
{
 
int
 
resultCreation
 "
=
# $(
friendRequestManagerClient
% ?
.
? @"
DeclineFriendRequest
@ T
(
T U
	playerOne
U ^
,
^ _
	playerTwo
` i
)
i j
;
j k
if
 
(
 
resultCreation
 "
==
# %
	Constants
& /
.
/ 0
SuccesOperation
0 ?
)
? @
{
 
DialogManager
 !
.
! "%
ShowSuccessMessageAlert
" 9
(
9 :

Properties
: D
.
D E
	Resources
E N
.
N O)
dialogDeclinedFriendRequest
O j
)
j k
;
k l 
lvw_FriendRequests
 &
.
& '
Items
' ,
.
, -
Clear
- 2
(
2 3
)
3 4
;
4 5
}
 
else
 
if
 
(
 
resultCreation
 '
==
( *
	Constants
+ 4
.
4 5
ErrorOperation
5 C
)
C D
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M!
dialogDataBaseError
M `
)
` a
;
a b
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
   
.
   
LogWarn
   
(
   
timeOutException
   /
)
  / 0
;
  0 1
DialogManager
¡¡ 
.
¡¡ #
ShowErrorMessageAlert
¡¡ 3
(
¡¡3 4

Properties
¡¡4 >
.
¡¡> ?
	Resources
¡¡? H
.
¡¡H I$
dialogTimeOutException
¡¡I _
)
¡¡_ `
;
¡¡` a
}
¢¢ 
catch
££ 
(
££ $
CommunicationException
££ )$
communicationException
££* @
)
££@ A
{
¤¤ 
logger
¥¥ 
.
¥¥ 
LogFatal
¥¥ 
(
¥¥  $
communicationException
¥¥  6
)
¥¥6 7
;
¥¥7 8
DialogManager
¦¦ 
.
¦¦ #
ShowErrorMessageAlert
¦¦ 3
(
¦¦3 4

Properties
¦¦4 >
.
¦¦> ?
	Resources
¦¦? H
.
¦¦H I)
dialogComunicationException
¦¦I d
)
¦¦d e
;
¦¦e f
}
§§ 
}
¨¨ 	
private
ªª 
void
ªª !
CreateFriendRequest
ªª (
(
ªª( )
ProfileUser
ªª) 4

userToSend
ªª5 ?
)
ªª? @
{
«« 	
LoggerManager
¬¬ 
logger
¬¬  
=
¬¬! "
new
¬¬# &
LoggerManager
¬¬' 4
(
¬¬4 5
this
¬¬5 9
.
¬¬9 :
GetType
¬¬: A
(
¬¬A B
)
¬¬B C
)
¬¬C D
;
¬¬D E
	HiveProxy
­­ 
.
­­ (
FriendRequestManagerClient
­­ 0(
friendRequestManagerClient
­­1 K
=
­­L M
new
­­N Q(
FriendRequestManagerClient
­­R l
(
­­l m
)
­­m n
;
­­n o
Profile
®® 
	playerOne
®® 
=
®® 
new
®®  #
Profile
®®$ +
(
®®+ ,
)
®®, -
{
¯¯ 
idAccesAccount
°° 
=
°°  "
UserProfileSingleton
°°! 5
.
°°5 6
	idAccount
°°6 ?
}
±± 
;
±± 
Profile
²² 
	playerTwo
²² 
=
²² 
new
²²  #
Profile
²²$ +
(
²²+ ,
)
²², -
{
³³ 
idAccesAccount
´´ 
=
´´  

userToSend
´´! +
.
´´+ ,
	idAccount
´´, 5
}
µµ 
;
µµ 
try
¶¶ 
{
·· 
int
¸¸ 
resultCreation
¸¸ "
=
¸¸# $(
friendRequestManagerClient
¸¸% ?
.
¸¸? @!
CreateFriendRequest
¸¸@ S
(
¸¸S T
	playerOne
¸¸T ]
,
¸¸] ^
	playerTwo
¸¸_ h
)
¸¸h i
;
¸¸i j
if
¹¹ 
(
¹¹ 
resultCreation
¹¹ !
==
¹¹" $
	Constants
¹¹% .
.
¹¹. /
SuccesOperation
¹¹/ >
)
¹¹> ?
{
ºº 
DialogManager
»» !
.
»»! "%
ShowSuccessMessageAlert
»»" 9
(
»»9 :

Properties
»»: D
.
»»D E
	Resources
»»E N
.
»»N O'
dialogFriendRequestSended
»»O h
)
»»h i
;
»»i j
lvw_FriendToAdd
¼¼ #
.
¼¼# $
Items
¼¼$ )
.
¼¼) *
Clear
¼¼* /
(
¼¼/ 0
)
¼¼0 1
;
¼¼1 2
}
½½ 
else
¾¾ 
if
¾¾ 
(
¾¾ 
resultCreation
¾¾ &
==
¾¾' )
	Constants
¾¾* 3
.
¾¾3 4
ErrorOperation
¾¾4 B
)
¾¾B C
{
¿¿ 
DialogManager
ÀÀ !
.
ÀÀ! "#
ShowErrorMessageAlert
ÀÀ" 7
(
ÀÀ7 8

Properties
ÀÀ8 B
.
ÀÀB C
	Resources
ÀÀC L
.
ÀÀL M!
dialogDataBaseError
ÀÀM `
)
ÀÀ` a
;
ÀÀa b
}
ÁÁ 
}
ÂÂ 
catch
ÃÃ 
(
ÃÃ '
EndpointNotFoundException
ÃÃ ,
endPointException
ÃÃ- >
)
ÃÃ> ?
{
ÄÄ 
logger
ÅÅ 
.
ÅÅ 
LogFatal
ÅÅ 
(
ÅÅ  
endPointException
ÅÅ  1
)
ÅÅ1 2
;
ÅÅ2 3
DialogManager
ÆÆ 
.
ÆÆ #
ShowErrorMessageAlert
ÆÆ 3
(
ÆÆ3 4

Properties
ÆÆ4 >
.
ÆÆ> ?
	Resources
ÆÆ? H
.
ÆÆH I%
dialogEndPointException
ÆÆI `
)
ÆÆ` a
;
ÆÆa b
}
ÇÇ 
catch
ÈÈ 
(
ÈÈ 
TimeoutException
ÈÈ #
timeOutException
ÈÈ$ 4
)
ÈÈ4 5
{
ÉÉ 
logger
ÊÊ 
.
ÊÊ 
LogWarn
ÊÊ 
(
ÊÊ 
timeOutException
ÊÊ /
)
ÊÊ/ 0
;
ÊÊ0 1
DialogManager
ËË 
.
ËË #
ShowErrorMessageAlert
ËË 3
(
ËË3 4

Properties
ËË4 >
.
ËË> ?
	Resources
ËË? H
.
ËËH I$
dialogTimeOutException
ËËI _
)
ËË_ `
;
ËË` a
}
ÌÌ 
catch
ÍÍ 
(
ÍÍ $
CommunicationException
ÍÍ )$
communicationException
ÍÍ* @
)
ÍÍ@ A
{
ÎÎ 
logger
ÏÏ 
.
ÏÏ 
LogFatal
ÏÏ 
(
ÏÏ  $
communicationException
ÏÏ  6
)
ÏÏ6 7
;
ÏÏ7 8
DialogManager
ÐÐ 
.
ÐÐ #
ShowErrorMessageAlert
ÐÐ 3
(
ÐÐ3 4

Properties
ÐÐ4 >
.
ÐÐ> ?
	Resources
ÐÐ? H
.
ÐÐH I)
dialogComunicationException
ÐÐI d
)
ÐÐd e
;
ÐÐe f
}
ÑÑ 
}
ÒÒ 	
private
ÔÔ 
void
ÔÔ 
DeleteFriendClick
ÔÔ &
(
ÔÔ& '
object
ÔÔ' -
sender
ÔÔ. 4
,
ÔÔ4 5
RoutedEventArgs
ÔÔ6 E
e
ÔÔF G
)
ÔÔG H
{
ÕÕ 	
bool
ÖÖ 
	selection
ÖÖ 
=
ÖÖ 
DialogManager
ÖÖ *
.
ÖÖ* +*
ShowConfirmationMessageAlert
ÖÖ+ G
(
ÖÖG H

Properties
ÖÖH R
.
ÖÖR S
	Resources
ÖÖS \
.
ÖÖ\ ]'
dialogConfirmFriendDelete
ÖÖ] v
)
ÖÖv w
;
ÖÖw x
if
×× 
(
×× 
	selection
×× 
)
×× 
{
ØØ 
Button
ÙÙ 
clickedButton
ÙÙ $
=
ÙÙ% &
sender
ÙÙ' -
as
ÙÙ. 0
Button
ÙÙ1 7
;
ÙÙ7 8
ProfileUser
ÚÚ 
profileUser
ÚÚ '
=
ÚÚ( )
clickedButton
ÚÚ* 7
.
ÚÚ7 8
DataContext
ÚÚ8 C
as
ÚÚD F
ProfileUser
ÚÚG R
;
ÚÚR S
if
ÛÛ 
(
ÛÛ 
profileUser
ÛÛ 
!=
ÛÛ  "
null
ÛÛ# '
)
ÛÛ' (
{
ÜÜ '
SendEliminationFriendShip
ÝÝ -
(
ÝÝ- .
profileUser
ÝÝ. 9
)
ÝÝ9 :
;
ÝÝ: ;
}
ÞÞ 
else
ßß 
{
àà 
DialogManager
áá !
.
áá! "#
ShowErrorMessageAlert
áá" 7
(
áá7 8

Properties
áá8 B
.
ááB C
	Resources
ááC L
.
ááL M,
dialogErrorAtObtainingUserData
ááM k
)
áák l
;
áál m
}
ââ 
}
ãã 
}
ää 	
private
ææ 
void
ææ '
SendEliminationFriendShip
ææ .
(
ææ. /
ProfileUser
ææ/ :
profileUser
ææ; F
)
ææF G
{
çç 	
LoggerManager
èè 
logger
èè  
=
èè! "
new
èè# &
LoggerManager
èè' 4
(
èè4 5
this
èè5 9
.
èè9 :
GetType
èè: A
(
èèA B
)
èèB C
)
èèC D
;
èèD E
	HiveProxy
éé 
.
éé %
FriendshipManagerClient
éé -%
friendShipManagerClient
éé. E
=
ééF G
new
ééH K%
FriendshipManagerClient
ééL c
(
ééc d
)
ééd e
;
éée f
Profile
êê 
removingPlayer
êê "
=
êê# $
new
êê% (
Profile
êê) 0
(
êê0 1
)
êê1 2
{
ëë 
idAccesAccount
ìì 
=
ìì  "
UserProfileSingleton
ìì! 5
.
ìì5 6
	idAccount
ìì6 ?
}
íí 
;
íí 
Profile
îî 
friendToRemove
îî "
=
îî# $
new
îî% (
Profile
îî) 0
(
îî0 1
)
îî1 2
{
ïï 
idAccesAccount
ðð 
=
ðð  
profileUser
ðð! ,
.
ðð, -
	idAccount
ðð- 6
}
ññ 
;
ññ 
try
òò 
{
óó 
int
ôô 
resultCreation
ôô "
=
ôô# $%
friendShipManagerClient
ôô% <
.
ôô< =
DeleteFriend
ôô= I
(
ôôI J
removingPlayer
ôôJ X
,
ôôX Y
friendToRemove
ôôZ h
)
ôôh i
;
ôôi j
if
õõ 
(
õõ 
resultCreation
õõ "
==
õõ# %
	Constants
õõ& /
.
õõ/ 0
SuccesOperation
õõ0 ?
)
õõ? @
{
öö 
DialogManager
÷÷ !
.
÷÷! "%
ShowSuccessMessageAlert
÷÷" 9
(
÷÷9 :

Properties
÷÷: D
.
÷÷D E
	Resources
÷÷E N
.
÷÷N O!
dialogFriendDeleted
÷÷O b
)
÷÷b c
;
÷÷c d
LoadFriendships
øø #
(
øø# $
)
øø$ %
;
øø% &
}
ùù 
else
úú 
if
úú 
(
úú 
resultCreation
úú '
==
úú( *
	Constants
úú+ 4
.
úú4 5
ErrorOperation
úú5 C
)
úúC D
{
ûû 
DialogManager
üü !
.
üü! "#
ShowErrorMessageAlert
üü" 7
(
üü7 8

Properties
üü8 B
.
üüB C
	Resources
üüC L
.
üüL M!
dialogDataBaseError
üüM `
)
üü` a
;
üüa b
}
ýý 
}
þþ 
catch
ÿÿ 
(
ÿÿ '
EndpointNotFoundException
ÿÿ ,
endPointException
ÿÿ- >
)
ÿÿ> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
 
catch
 
(
 $
CommunicationException
 )$
communicationException
* @
)
@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
public
 
void
 !
LoadUserInformation
 '
(
' (
Profile
( /
profile
0 7
,
7 8
bool
9 =

areFriends
> H
)
H I
{
 	
ProfileUser
 
profileUser
 #
=
$ %
new
& )
ProfileUser
* 5
(
5 6
)
6 7
{
 
	idProfile
 
=
 
profile
 #
.
# $
	idProfile
$ -
,
- .
	idAccount
 
=
 
profile
 #
.
# $
idAccesAccount
$ 2
,
2 3
username
 
=
 
profile
 "
.
" #
username
# +
,
+ ,
imageProfile
 
=
 
profile
 &
.
& '
	imagePath
' 0
,
0 1

areFriends
 
=
 

areFriends
 '
}
 
;
 
lvw_FriendToAdd
 
.
 
Items
 !
.
! "
Add
" %
(
% &
profileUser
& 1
)
1 2
;
2 3
}
 	
private
 
sealed
 
class
 
ProfileUser
 (
{
 	
public
 
int
 
	idProfile
  
{
! "
get
$ '
;
' (
set
) ,
;
, -
}
. /
public
   
int
   
	idAccount
    
{
  ! "
get
  # &
;
  & '
set
  ( +
;
  + ,
}
  - .
public
¡¡ 
string
¡¡ 
username
¡¡ "
{
¡¡# $
get
¡¡% (
;
¡¡( )
set
¡¡* -
;
¡¡- .
}
¡¡/ 0
public
¢¢ 
string
¢¢ 
imageProfile
¢¢ &
{
¢¢' (
get
¢¢) ,
;
¢¢, -
set
¢¢. 1
;
¢¢1 2
}
¢¢3 4
public
££ 
bool
££ 
state
££ 
{
££ 
get
££  #
;
££# $
set
££% (
;
££( )
}
££* +
public
¤¤ 
bool
¤¤ 

areFriends
¤¤ "
{
¤¤# $
get
¤¤% (
;
¤¤( )
set
¤¤* -
;
¤¤- .
}
¤¤/ 0
}
¥¥ 	
private
§§ 
void
§§ 
BtnFriends_Click
§§ %
(
§§% &
object
§§& ,
sender
§§- 3
,
§§3 4
RoutedEventArgs
§§5 D
e
§§E F
)
§§F G
{
¨¨ 	
stckp_GameFriends
©© 
.
©© 

Visibility
©© (
=
©©) *

Visibility
©©+ 5
.
©©5 6
Visible
©©6 =
;
©©= >"
stckp_FriendRequests
ªª  
.
ªª  !

Visibility
ªª! +
=
ªª, -

Visibility
ªª. 8
.
ªª8 9
	Collapsed
ªª9 B
;
ªªB C
stck_AddNewFriend
«« 
.
«« 

Visibility
«« (
=
««) *

Visibility
««+ 5
.
««5 6
	Collapsed
««6 ?
;
««? @
LoadFriendships
¬¬ 
(
¬¬ 
)
¬¬ 
;
¬¬ 
}
­­ 	
private
¯¯ 
void
¯¯ %
BtnFriendRequests_Click
¯¯ ,
(
¯¯, -
object
¯¯- 3
sender
¯¯4 :
,
¯¯: ;
RoutedEventArgs
¯¯< K
e
¯¯L M
)
¯¯M N
{
°° 	
stckp_GameFriends
±± 
.
±± 

Visibility
±± (
=
±±) *

Visibility
±±+ 5
.
±±5 6
	Collapsed
±±6 ?
;
±±? @"
stckp_FriendRequests
²²  
.
²²  !

Visibility
²²! +
=
²², -

Visibility
²². 8
.
²²8 9
Visible
²²9 @
;
²²@ A
stck_AddNewFriend
³³ 
.
³³ 

Visibility
³³ (
=
³³) *

Visibility
³³+ 5
.
³³5 6
	Collapsed
³³6 ?
;
³³? @ 
LoadFriendRequests
´´ 
(
´´ 
)
´´  
;
´´  !
}
µµ 	
private
·· 
void
·· 
BtnAdd_Click
·· !
(
··! "
object
··" (
sender
··) /
,
··/ 0
RoutedEventArgs
··1 @
e
··A B
)
··B C
{
¸¸ 	
stckp_GameFriends
¹¹ 
.
¹¹ 

Visibility
¹¹ (
=
¹¹) *

Visibility
¹¹+ 5
.
¹¹5 6
	Collapsed
¹¹6 ?
;
¹¹? @"
stckp_FriendRequests
ºº  
.
ºº  !

Visibility
ºº! +
=
ºº, -

Visibility
ºº. 8
.
ºº8 9
	Collapsed
ºº9 B
;
ººB C
stck_AddNewFriend
»» 
.
»» 

Visibility
»» (
=
»») *

Visibility
»»+ 5
.
»»5 6
Visible
»»6 =
;
»»= >
}
¼¼ 	
private
¾¾ 
void
¾¾ 
Image_MouseDown
¾¾ $
(
¾¾$ %
object
¾¾% +
sender
¾¾, 2
,
¾¾2 3"
MouseButtonEventArgs
¾¾4 H
e
¾¾I J
)
¾¾J K
{
¿¿ 	
MainMenu
ÀÀ 
mainMenu
ÀÀ 
=
ÀÀ 
new
ÀÀ  #
MainMenu
ÀÀ$ ,
(
ÀÀ, -
)
ÀÀ- .
;
ÀÀ. /
this
ÁÁ 
.
ÁÁ 
NavigationService
ÁÁ "
.
ÁÁ" #
Navigate
ÁÁ# +
(
ÁÁ+ ,
mainMenu
ÁÁ, 4
)
ÁÁ4 5
;
ÁÁ5 6
}
ÂÂ 	
private
ÄÄ 
void
ÄÄ 
ReturnMainMenu
ÄÄ #
(
ÄÄ# $
object
ÄÄ$ *
sender
ÄÄ+ 1
,
ÄÄ1 2
RoutedEventArgs
ÄÄ3 B
e
ÄÄC D
)
ÄÄD E
{
ÅÅ 	
MainMenu
ÆÆ 
mainMenu
ÆÆ 
=
ÆÆ 
new
ÆÆ  #
MainMenu
ÆÆ$ ,
(
ÆÆ, -
)
ÆÆ- .
;
ÆÆ. /
this
ÇÇ 
.
ÇÇ 
NavigationService
ÇÇ "
.
ÇÇ" #
Navigate
ÇÇ# +
(
ÇÇ+ ,
mainMenu
ÇÇ, 4
)
ÇÇ4 5
;
ÇÇ5 6
}
ÈÈ 	
public
ÊÊ 
void
ÊÊ $
ObtainConnectedFriends
ÊÊ *
(
ÊÊ* +
string
ÊÊ+ 1
[
ÊÊ1 2
]
ÊÊ2 3
connectedFriends
ÊÊ4 D
)
ÊÊD E
{
ËË 	"
ObservableCollection
ÌÌ  
<
ÌÌ  !
ProfileUser
ÌÌ! ,
>
ÌÌ, -
usersRefreshed
ÌÌ. <
=
ÌÌ= >
new
ÌÌ? B"
ObservableCollection
ÌÌC W
<
ÌÌW X
ProfileUser
ÌÌX c
>
ÌÌc d
(
ÌÌd e
)
ÌÌe f
;
ÌÌf g
for
ÍÍ 
(
ÍÍ 
int
ÍÍ 
indexListView
ÍÍ "
=
ÍÍ# $
$num
ÍÍ% &
;
ÍÍ& '
indexListView
ÍÍ( 5
<
ÍÍ6 7
lvw_FriendsList
ÍÍ8 G
.
ÍÍG H
Items
ÍÍH M
.
ÍÍM N
Count
ÍÍN S
;
ÍÍS T
indexListView
ÍÍU b
++
ÍÍb d
)
ÍÍd e
{
ÎÎ 
ProfileUser
ÏÏ 
profile
ÏÏ #
=
ÏÏ$ %
lvw_FriendsList
ÏÏ& 5
.
ÏÏ5 6
Items
ÏÏ6 ;
[
ÏÏ; <
indexListView
ÏÏ< I
]
ÏÏI J
as
ÏÏK M
ProfileUser
ÏÏN Y
;
ÏÏY Z
if
ÐÐ 
(
ÐÐ 
profile
ÐÐ 
!=
ÐÐ 
null
ÐÐ "
)
ÐÐ" #
{
ÑÑ 
profile
ÒÒ 
.
ÒÒ 
state
ÒÒ !
=
ÒÒ" #
connectedFriends
ÒÒ$ 4
.
ÒÒ4 5
Contains
ÒÒ5 =
(
ÒÒ= >
profile
ÒÒ> E
.
ÒÒE F
username
ÒÒF N
)
ÒÒN O
;
ÒÒO P
}
ÓÓ 
usersRefreshed
ÔÔ 
.
ÔÔ 
Add
ÔÔ "
(
ÔÔ" #
profile
ÔÔ# *
)
ÔÔ* +
;
ÔÔ+ ,
}
ÕÕ 
lvw_FriendsList
ÖÖ 
.
ÖÖ 
Items
ÖÖ !
.
ÖÖ! "
Clear
ÖÖ" '
(
ÖÖ' (
)
ÖÖ( )
;
ÖÖ) *
lvw_FriendsList
×× 
.
×× 
ItemsSource
×× '
=
××( )
usersRefreshed
××* 8
;
××8 9
}
ØØ 	
}
ÙÙ 
}ÚÚ ðÌ
C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Views\EditCredentialsView.xaml.cs
	namespace 	
HiveGameWPFApp
 
. 
Views 
{ 
public 

partial 
class 
EditCredentialsView ,
:- .
Page/ 3
{ 
private 
DispatcherTimer 
_timer  &
;& '
private 
int 
	_timeLeft 
= 
$num  "
;" #
public 
EditCredentialsView "
(" #
)# $
{ 	
InitializeComponent 
(  
)  !
;! "

StartTimer 
( 
) 
; 
FocusFirstTextBox   
(   
)   
;    
InitializeUserData!! 
(!! 
)!!  
;!!  !
}"" 	
public$$ 
void$$ 
InitializeUserData$$ &
($$& '
)$$' (
{%% 	
	lbl_Email&& 
.&& 
Content&& 
=&&  
UserProfileSingleton&&  4
.&&4 5
email&&5 :
;&&: ;
	txt_Email'' 
.'' 
Text'' 
=''  
UserProfileSingleton'' 1
.''1 2
email''2 7
;''7 8
}(( 	
private)) 
void)) 

StartTimer)) 
())  
)))  !
{** 	
_timer++ 
=++ 
new++ 
DispatcherTimer++ (
(++( )
)++) *
;++* +
_timer,, 
.,, 
Interval,, 
=,, 
TimeSpan,, &
.,,& '
FromSeconds,,' 2
(,,2 3
$num,,3 4
),,4 5
;,,5 6
_timer-- 
.-- 
Tick-- 
+=-- 

Timer_Tick-- %
;--% &
_timer.. 
... 
Start.. 
(.. 
).. 
;.. 
}// 	
private00 
void00 

Timer_Tick00 
(00  
object00  &
sender00' -
,00- .
	EventArgs00/ 8
e009 :
)00: ;
{11 	
	_timeLeft22 
--22 
;22 
	txt_Timer33 
.33 
Text33 
=33 

Properties33 '
.33' (
	Resources33( 1
.331 2
	txt_Timer332 ;
+33< =
	_timeLeft33> G
;33G H
if55 
(55 
	_timeLeft55 
<=55 
$num55 
)55 
{66 
_timer77 
.77 
Stop77 
(77 
)77 
;77 
	txt_Timer88 
.88 

Visibility88 $
=88% &

Visibility88' 1
.881 2
	Collapsed882 ;
;88; <
txt_ResendLink99 
.99 

Visibility99 )
=99* +

Visibility99, 6
.996 7
Visible997 >
;99> ?
txt_ResendCodeClick:: #
.::# $

Visibility::$ .
=::/ 0

Visibility::1 ;
.::; <
Visible::< C
;::C D
};; 
}<< 	
private== 
void== 
FocusFirstTextBox== &
(==& '
)==' (
{>> 	
TextBox?? 
firstTextBox??  
=??! "
(??# $
TextBox??$ +
)??+ ,
brd_BubbleOne??, 9
.??9 :
Child??: ?
;??? @
firstTextBox@@ 
.@@ 
Focus@@ 
(@@ 
)@@  
;@@  !
}AA 	
privateCC 
voidCC 
TextBox_TextChangedCC (
(CC( )
objectCC) /
senderCC0 6
,CC6 7 
TextChangedEventArgsCC8 L
eCCM N
)CCN O
{DD 	
TextBoxEE 
currentTextBoxEE "
=EE# $
(EE% &
TextBoxEE& -
)EE- .
senderEE. 4
;EE4 5
ifGG 
(GG 
currentTextBoxGG 
.GG 
TextGG #
.GG# $
LengthGG$ *
==GG+ -
$numGG. /
)GG/ 0
{HH 
MoveToNextTextBoxII !
(II! "
currentTextBoxII" 0
)II0 1
;II1 2
}JJ 
elseKK 
ifKK 
(KK 
currentTextBoxKK #
.KK# $
TextKK$ (
.KK( )
LengthKK) /
==KK0 2
$numKK3 4
)KK4 5
{LL !
MoveToPreviousTextBoxMM %
(MM% &
currentTextBoxMM& 4
)MM4 5
;MM5 6
}NN 
ifPP 
(PP 
AllTextBoxesFilledPP "
(PP" #
)PP# $
)PP$ %
{QQ 
ValidateCodeRR 
(RR 
)RR 
;RR 
}SS 
}TT 	
privateWW 
voidWW 
TextBox_GotFocusWW %
(WW% &
objectWW& ,
senderWW- 3
,WW3 4
RoutedEventArgsWW5 D
eWWE F
)WWF G
{XX 	
TextBoxYY 
currentTextBoxYY "
=YY# $
(YY% &
TextBoxYY& -
)YY- .
senderYY. 4
;YY4 5
BorderZZ 
currentBorderZZ  
=ZZ! "
(ZZ# $
BorderZZ$ *
)ZZ* +
currentTextBoxZZ+ 9
.ZZ9 :
ParentZZ: @
;ZZ@ A
currentBorder[[ 
.[[ 
BorderBrush[[ %
=[[& '
Brushes[[( /
.[[/ 0
Yellow[[0 6
;[[6 7
}\\ 	
private]] 
void]] 
TextBox_LostFocus]] &
(]]& '
object]]' -
sender]]. 4
,]]4 5
RoutedEventArgs]]6 E
e]]F G
)]]G H
{^^ 	
TextBox__ 
currentTextBox__ "
=__# $
(__% &
TextBox__& -
)__- .
sender__. 4
;__4 5
Border`` 
currentBorder``  
=``! "
(``# $
Border``$ *
)``* +
currentTextBox``+ 9
.``9 :
Parent``: @
;``@ A
currentBorderaa 
.aa 
BorderBrushaa %
=aa& '
Brushesaa( /
.aa/ 0
Whiteaa0 5
;aa5 6
}bb 	
privatedd 
voiddd 
MoveToNextTextBoxdd &
(dd& '
TextBoxdd' .
currentTextBoxdd/ =
)dd= >
{ee 	
ifgg 
(gg 
currentTextBoxgg 
==gg !
(gg" #
TextBoxgg# *
)gg* +
brd_BubbleOnegg+ 8
.gg8 9
Childgg9 >
)gg> ?
(hh 
(hh 
TextBoxhh 
)hh 
brd_BubbleTwohh '
.hh' (
Childhh( -
)hh- .
.hh. /
Focushh/ 4
(hh4 5
)hh5 6
;hh6 7
elsejj 
ifjj 
(jj 
currentTextBoxjj #
==jj$ &
(jj' (
TextBoxjj( /
)jj/ 0
brd_BubbleTwojj0 =
.jj= >
Childjj> C
)jjC D
(kk 
(kk 
TextBoxkk 
)kk 
brd_BubbleThreekk )
.kk) *
Childkk* /
)kk/ 0
.kk0 1
Focuskk1 6
(kk6 7
)kk7 8
;kk8 9
elsemm 
ifmm 
(mm 
currentTextBoxmm #
==mm$ &
(mm' (
TextBoxmm( /
)mm/ 0
brd_BubbleThreemm0 ?
.mm? @
Childmm@ E
)mmE F
(nn 
(nn 
TextBoxnn 
)nn 
brd_BubbleFournn (
.nn( )
Childnn) .
)nn. /
.nn/ 0
Focusnn0 5
(nn5 6
)nn6 7
;nn7 8
elsepp 
ifpp 
(pp 
currentTextBoxpp #
==pp$ &
(pp' (
TextBoxpp( /
)pp/ 0
brd_BubbleFourpp0 >
.pp> ?
Childpp? D
)ppD E
(qq 
(qq 
TextBoxqq 
)qq 
brd_BubbleFiveqq (
.qq( )
Childqq) .
)qq. /
.qq/ 0
Focusqq0 5
(qq5 6
)qq6 7
;qq7 8
elsess 
ifss 
(ss 
currentTextBoxss #
==ss$ &
(ss' (
TextBoxss( /
)ss/ 0
brd_BubbleFivess0 >
.ss> ?
Childss? D
)ssD E
(tt 
(tt 
TextBoxtt 
)tt 
brd_BubbleSixtt '
.tt' (
Childtt( -
)tt- .
.tt. /
Focustt/ 4
(tt4 5
)tt5 6
;tt6 7
}uu 	
privateww 
voidww !
MoveToPreviousTextBoxww *
(ww* +
TextBoxww+ 2
currentTextBoxww3 A
)wwA B
{xx 	
ifyy 
(yy 
currentTextBoxyy 
==yy !
(yy" #
TextBoxyy# *
)yy* +
brd_BubbleSixyy+ 8
.yy8 9
Childyy9 >
)yy> ?
(zz 
(zz 
TextBoxzz 
)zz 
brd_BubbleFivezz (
.zz( )
Childzz) .
)zz. /
.zz/ 0
Focuszz0 5
(zz5 6
)zz6 7
;zz7 8
else|| 
if|| 
(|| 
currentTextBox|| #
==||$ &
(||' (
TextBox||( /
)||/ 0
brd_BubbleFive||0 >
.||> ?
Child||? D
)||D E
(}} 
(}} 
TextBox}} 
)}} 
brd_BubbleFour}} (
.}}( )
Child}}) .
)}}. /
.}}/ 0
Focus}}0 5
(}}5 6
)}}6 7
;}}7 8
else 
if 
( 
currentTextBox #
==$ &
(' (
TextBox( /
)/ 0
brd_BubbleFour0 >
.> ?
Child? D
)D E
(
 
(
 
TextBox
 
)
 
brd_BubbleThree
 )
.
) *
Child
* /
)
/ 0
.
0 1
Focus
1 6
(
6 7
)
7 8
;
8 9
else
 
if
 
(
 
currentTextBox
 #
==
$ &
(
' (
TextBox
( /
)
/ 0
brd_BubbleThree
0 ?
.
? @
Child
@ E
)
E F
(
 
(
 
TextBox
 
)
 
brd_BubbleTwo
 '
.
' (
Child
( -
)
- .
.
. /
Focus
/ 4
(
4 5
)
5 6
;
6 7
else
 
if
 
(
 
currentTextBox
 #
==
$ &
(
' (
TextBox
( /
)
/ 0
brd_BubbleTwo
0 =
.
= >
Child
> C
)
C D
(
 
(
 
TextBox
 
)
 
brd_BubbleOne
 '
.
' (
Child
( -
)
- .
.
. /
Focus
/ 4
(
4 5
)
5 6
;
6 7
}
 	
private
 
bool
  
AllTextBoxesFilled
 '
(
' (
)
( )
{
 	
return
 
(
 
(
 
TextBox
 
)
 
brd_BubbleOne
 *
.
* +
Child
+ 0
)
0 1
.
1 2
Text
2 6
.
6 7
Length
7 =
>
> ?
$num
@ A
&&
B D
(
 
(
 
TextBox
 
)
 
brd_BubbleTwo
 *
.
* +
Child
+ 0
)
0 1
.
1 2
Text
2 6
.
6 7
Length
7 =
>
> ?
$num
@ A
&&
B D
(
 
(
 
TextBox
 
)
 
brd_BubbleThree
 ,
.
, -
Child
- 2
)
2 3
.
3 4
Text
4 8
.
8 9
Length
9 ?
>
@ A
$num
B C
&&
D F
(
 
(
 
TextBox
 
)
 
brd_BubbleFour
 +
.
+ ,
Child
, 1
)
1 2
.
2 3
Text
3 7
.
7 8
Length
8 >
>
? @
$num
A B
&&
C E
(
 
(
 
TextBox
 
)
 
brd_BubbleFive
 +
.
+ ,
Child
, 1
)
1 2
.
2 3
Text
3 7
.
7 8
Length
8 >
>
? @
$num
A B
&&
C E
(
 
(
 
TextBox
 
)
 
brd_BubbleSix
 *
.
* +
Child
+ 0
)
0 1
.
1 2
Text
2 6
.
6 7
Length
7 =
>
> ?
$num
@ A
;
A B
}
 	
private
 
void
 
ValidateCode
 !
(
! "
)
" #
{
 	
string
 
enteredCode
 
=
  
GetEnteredCode
! /
(
/ 0
)
0 1
;
1 2
if
 
(
 
IsValidCode
 
(
 
enteredCode
 '
)
' (
)
( )
{
 $
ShowNewPasswordSection
 &
(
& '
)
' (
;
( )
}
 
else
 
{
 
lbl_ErrorMessage
  
.
  !

Visibility
! +
=
, -

Visibility
. 8
.
8 9
Visible
9 @
;
@ A
}
 
}
 	
private
¡¡ 
string
¡¡ 
GetEnteredCode
¡¡ %
(
¡¡% &
)
¡¡& '
{
¢¢ 	
return
££ 
$"
££ 
{
££ 
(
££ 
(
££ 
TextBox
££ 
)
££  
brd_BubbleOne
££  -
.
££- .
Child
££. 3
)
££3 4
.
££4 5
Text
££5 9
}
££9 :
{
££: ;
(
££; <
(
££< =
TextBox
££= D
)
££D E
brd_BubbleTwo
££E R
.
££R S
Child
££S X
)
££X Y
.
££Y Z
Text
££Z ^
}
££^ _
"
££_ `
+
££a b
$"
¤¤ 
{
¤¤ 
(
¤¤ 
(
¤¤ 
TextBox
¤¤ 
)
¤¤  
brd_BubbleThree
¤¤  /
.
¤¤/ 0
Child
¤¤0 5
)
¤¤5 6
.
¤¤6 7
Text
¤¤7 ;
}
¤¤; <
{
¤¤< =
(
¤¤= >
(
¤¤> ?
TextBox
¤¤? F
)
¤¤F G
brd_BubbleFour
¤¤G U
.
¤¤U V
Child
¤¤V [
)
¤¤[ \
.
¤¤\ ]
Text
¤¤] a
}
¤¤a b
"
¤¤b c
+
¤¤d e
$"
¥¥ 
{
¥¥ 
(
¥¥ 
(
¥¥ 
TextBox
¥¥ 
)
¥¥  
brd_BubbleFive
¥¥  .
.
¥¥. /
Child
¥¥/ 4
)
¥¥4 5
.
¥¥5 6
Text
¥¥6 :
}
¥¥: ;
{
¥¥; <
(
¥¥< =
(
¥¥= >
TextBox
¥¥> E
)
¥¥E F
brd_BubbleSix
¥¥F S
.
¥¥S T
Child
¥¥T Y
)
¥¥Y Z
.
¥¥Z [
Text
¥¥[ _
}
¥¥_ `
"
¥¥` a
;
¥¥a b
}
¦¦ 	
private
©© 
bool
©© 
IsValidCode
©©  
(
©©  !
string
©©! '
code
©©( ,
)
©©, -
{
ªª 	
LoggerManager
«« 
logger
««  
=
««! "
new
««# &
LoggerManager
««' 4
(
««4 5
this
««5 9
.
««9 :
GetType
««: A
(
««A B
)
««B C
)
««C D
;
««D E
	HiveProxy
¬¬ 
.
¬¬ ,
EmailVerificationManagerClient
¬¬ 4&
emailVerificationManager
¬¬5 M
=
¬¬N O
new
¬¬P S
	HiveProxy
¬¬T ]
.
¬¬] ^,
EmailVerificationManagerClient
¬¬^ |
(
¬¬| }
)
¬¬} ~
;
¬¬~ 
bool
­­ 
isValid
­­ 
=
­­ 
false
­­  
;
­­  !
try
¯¯ 
{
°° 
UserVerificator
±± 
verificationUser
±±  0
=
±±1 2
new
±±3 6
UserVerificator
±±7 F
(
±±F G
)
±±G H
;
±±H I
verificationUser
²²  
.
²²  !
email
²²! &
=
²²' ("
UserProfileSingleton
²²) =
.
²²= >
email
²²> C
;
²²C D
verificationUser
³³  
.
³³  !
code
³³! %
=
³³& '
code
³³( ,
;
³³, -
isValid
´´ 
=
´´ &
emailVerificationManager
´´ 2
.
´´2 3$
VerifyCodeVerification
´´3 I
(
´´I J
verificationUser
´´J Z
)
´´Z [
;
´´[ \
}
µµ 
catch
¶¶ 
(
¶¶ '
EndpointNotFoundException
¶¶ ,
endPointException
¶¶- >
)
¶¶> ?
{
·· 
logger
¸¸ 
.
¸¸ 
LogFatal
¸¸ 
(
¸¸  
endPointException
¸¸  1
)
¸¸1 2
;
¸¸2 3
DialogManager
¹¹ 
.
¹¹ #
ShowErrorMessageAlert
¹¹ 3
(
¹¹3 4

Properties
¹¹4 >
.
¹¹> ?
	Resources
¹¹? H
.
¹¹H I%
dialogEndPointException
¹¹I `
)
¹¹` a
;
¹¹a b
}
ºº 
catch
»» 
(
»» 
TimeoutException
»» #
timeOutException
»»$ 4
)
»»4 5
{
¼¼ 
logger
½½ 
.
½½ 
LogWarn
½½ 
(
½½ 
timeOutException
½½ /
)
½½/ 0
;
½½0 1
DialogManager
¾¾ 
.
¾¾ #
ShowErrorMessageAlert
¾¾ 3
(
¾¾3 4

Properties
¾¾4 >
.
¾¾> ?
	Resources
¾¾? H
.
¾¾H I$
dialogTimeOutException
¾¾I _
)
¾¾_ `
;
¾¾` a
}
¿¿ 
catch
ÀÀ 
(
ÀÀ $
CommunicationException
ÀÀ )$
communicationException
ÀÀ* @
)
ÀÀ@ A
{
ÁÁ 
logger
ÂÂ 
.
ÂÂ 
LogFatal
ÂÂ 
(
ÂÂ  $
communicationException
ÂÂ  6
)
ÂÂ6 7
;
ÂÂ7 8
DialogManager
ÃÃ 
.
ÃÃ #
ShowErrorMessageAlert
ÃÃ 3
(
ÃÃ3 4

Properties
ÃÃ4 >
.
ÃÃ> ?
	Resources
ÃÃ? H
.
ÃÃH I)
dialogComunicationException
ÃÃI d
)
ÃÃd e
;
ÃÃe f
}
ÄÄ 
return
ÆÆ 
isValid
ÆÆ 
;
ÆÆ 
}
ÇÇ 	
private
ÉÉ 
void
ÉÉ $
ShowNewPasswordSection
ÉÉ +
(
ÉÉ+ ,
)
ÉÉ, -
{
ÊÊ 	
lbl_ErrorMessage
ËË 
.
ËË 

Visibility
ËË '
=
ËË( )

Visibility
ËË* 4
.
ËË4 5
	Collapsed
ËË5 >
;
ËË> ?#
grd_VerificationPanel
ÌÌ !
.
ÌÌ! "

Visibility
ÌÌ" ,
=
ÌÌ- .

Visibility
ÌÌ/ 9
.
ÌÌ9 :
	Collapsed
ÌÌ: C
;
ÌÌC D
grd_EditionPanel
ÍÍ 
.
ÍÍ 

Visibility
ÍÍ '
=
ÍÍ( )

Visibility
ÍÍ* 4
.
ÍÍ4 5
Visible
ÍÍ5 <
;
ÍÍ< =
}
ÎÎ 	
private
ÐÐ 
void
ÐÐ %
BtnConfirmChanges_Click
ÐÐ ,
(
ÐÐ, -
object
ÐÐ- 3
sender
ÐÐ4 :
,
ÐÐ: ;
RoutedEventArgs
ÐÐ< K
e
ÐÐL M
)
ÐÐM N
{
ÑÑ 	
	txt_Email
ÒÒ 
.
ÒÒ 
BorderBrush
ÒÒ !
=
ÒÒ" #
Brushes
ÒÒ$ +
.
ÒÒ+ ,
White
ÒÒ, 1
;
ÒÒ1 2
brd_Password
ÓÓ 
.
ÓÓ 
BorderBrush
ÓÓ $
=
ÓÓ% &
Brushes
ÓÓ' .
.
ÓÓ. /
Yellow
ÓÓ/ 5
;
ÓÓ5 6!
brd_ConfirmPassword
ÔÔ 
.
ÔÔ  
BorderBrush
ÔÔ  +
=
ÔÔ, -
Brushes
ÔÔ. 5
.
ÔÔ5 6
Yellow
ÔÔ6 <
;
ÔÔ< =
if
ÖÖ 
(
ÖÖ 
ValidateFields
ÖÖ 
(
ÖÖ 
)
ÖÖ  
)
ÖÖ  !
{
×× 
if
ØØ 
(
ØØ #
ValidateSamePasswords
ØØ )
(
ØØ) *
)
ØØ* +
)
ØØ+ ,
{
ÙÙ 
if
ÚÚ 
(
ÚÚ (
ValidateExistingCredential
ÚÚ 2
(
ÚÚ2 3
)
ÚÚ3 4
)
ÚÚ4 5
{
ÛÛ 
UpdateCredentials
ÜÜ )
(
ÜÜ) *
)
ÜÜ* +
;
ÜÜ+ ,
}
ÝÝ 
}
ÞÞ 
else
ßß 
{
àà 
DialogManager
áá !
.
áá! "%
ShowWarningMessageAlert
áá" 9
(
áá9 :

Properties
áá: D
.
ááD E
	Resources
ááE N
.
ááN O'
dialogMissmatchesPassword
ááO h
)
ááh i
;
áái j
}
ââ 
}
ãã 
else
ää 
{
åå 
DialogManager
ææ 
.
ææ #
ShowErrorMessageAlert
ææ 3
(
ææ3 4

Properties
ææ4 >
.
ææ> ?
	Resources
ææ? H
.
ææH I
dialogWrongData
ææI X
)
ææX Y
;
ææY Z
}
çç 
}
èè 	
private
êê 
bool
êê 
ValidateFields
êê #
(
êê# $
)
êê$ %
{
ëë 	
bool
ìì 
emailVerification
ìì "
=
ìì# $
	Validator
ìì% .
.
ìì. /
ValidateEmail
ìì/ <
(
ìì< =
	txt_Email
ìì= F
.
ììF G
Text
ììG K
)
ììK L
;
ììL M
bool
íí !
passwordVerificaton
íí $
=
íí% &
	Validator
íí' 0
.
íí0 1
ValidatePassword
íí1 A
(
ííA B
pwb_Password
ííB N
.
ííN O
Password
ííO W
)
ííW X
;
ííX Y
bool
îî )
passwordConfirmVerification
îî ,
=
îî- .
	Validator
îî/ 8
.
îî8 9
ValidatePassword
îî9 I
(
îîI J!
pwb_ConfirmPassword
îîJ ]
.
îî] ^
Password
îî^ f
)
îîf g
;
îîg h
if
ðð 
(
ðð 
!
ðð 
emailVerification
ðð "
)
ðð" #
{
ññ 
	txt_Email
òò 
.
òò 
BorderBrush
òò %
=
òò& '
Brushes
òò( /
.
òò/ 0
Red
òò0 3
;
òò3 4
}
óó 
if
ôô 
(
ôô 
!
ôô !
passwordVerificaton
ôô $
)
ôô$ %
{
õõ 
brd_Password
öö 
.
öö 
BorderBrush
öö (
=
öö) *
Brushes
öö+ 2
.
öö2 3
Red
öö3 6
;
öö6 7
}
÷÷ 
if
øø 
(
øø 
!
øø )
passwordConfirmVerification
øø ,
)
øø, -
{
ùù !
brd_ConfirmPassword
úú #
.
úú# $
BorderBrush
úú$ /
=
úú0 1
Brushes
úú2 9
.
úú9 :
Red
úú: =
;
úú= >
}
ûû 
return
ýý 
emailVerification
ýý $
&&
ýý% '!
passwordVerificaton
ýý( ;
&&
ýý< >)
passwordConfirmVerification
ýý? Z
;
ýýZ [
}
þþ 	
private
 
bool
 #
ValidateSamePasswords
 *
(
* +
)
+ ,
{
 	
bool
 
samePasswords
 
=
  
false
! &
;
& '
if
 
(
 !
pwb_ConfirmPassword
 #
.
# $
Password
$ ,
==
- /
pwb_Password
0 <
.
< =
Password
= E
)
E F
{
 
samePasswords
 
=
 
true
  $
;
$ %
}
 
return
 
samePasswords
  
;
  !
}
 	
private
 
bool
 (
ValidateExistingCredential
 /
(
/ 0
)
0 1
{
 	
bool
  
resultVerification
 #
=
$ %
false
& +
;
+ ,
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 
UserManagerClient
 '
userManagerClient
( 9
=
: ;
new
< ?
	HiveProxy
@ I
.
I J
UserManagerClient
J [
(
[ \
)
\ ]
;
] ^
try
 
{
 
int
 +
resultVerificationCredentials
 1
=
2 3
userManagerClient
4 E
.
E F
VerifyCredentials
F W
(
W X"
UserProfileSingleton
X l
.
l m
username
m u
,
u v
	txt_Emailw 
. 
Text 
) 
; 
if
 
(
 +
resultVerificationCredentials
 1
==
2 4
	Constants
5 >
.
> ?
DataMatches
? J
)
J K
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M*
dialogEmailAlreadyRegistered
M i
)
i j
;
j k 
resultVerification
 &
=
' (
false
) .
;
. /
}
 
else
 
if
 
(
 +
resultVerificationCredentials
 6
==
7 9
	Constants
: C
.
C D
NoDataMatches
D Q
)
Q R
{
  
resultVerification
 &
=
' (
true
) -
;
- .
}
 
else
 
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M!
dialogDataBaseError
M `
)
` a
;
a b 
resultVerification
   &
=
  ' (
false
  ) .
;
  . /
}
¡¡ 
}
¢¢ 
catch
££ 
(
££ '
EndpointNotFoundException
££ ,
endPointException
££- >
)
££> ?
{
¤¤ 
logger
¥¥ 
.
¥¥ 
LogFatal
¥¥ 
(
¥¥  
endPointException
¥¥  1
)
¥¥1 2
;
¥¥2 3
DialogManager
¦¦ 
.
¦¦ #
ShowErrorMessageAlert
¦¦ 3
(
¦¦3 4

Properties
¦¦4 >
.
¦¦> ?
	Resources
¦¦? H
.
¦¦H I%
dialogEndPointException
¦¦I `
)
¦¦` a
;
¦¦a b
}
§§ 
catch
¨¨ 
(
¨¨ 
TimeoutException
¨¨ #
timeOutException
¨¨$ 4
)
¨¨4 5
{
©© 
logger
ªª 
.
ªª 
LogWarn
ªª 
(
ªª 
timeOutException
ªª /
)
ªª/ 0
;
ªª0 1
DialogManager
«« 
.
«« #
ShowErrorMessageAlert
«« 3
(
««3 4

Properties
««4 >
.
««> ?
	Resources
««? H
.
««H I$
dialogTimeOutException
««I _
)
««_ `
;
««` a
}
¬¬ 
catch
­­ 
(
­­ $
CommunicationException
­­ )$
communicationException
­­* @
)
­­@ A
{
®® 
logger
¯¯ 
.
¯¯ 
LogFatal
¯¯ 
(
¯¯  $
communicationException
¯¯  6
)
¯¯6 7
;
¯¯7 8
DialogManager
°° 
.
°° #
ShowErrorMessageAlert
°° 3
(
°°3 4

Properties
°°4 >
.
°°> ?
	Resources
°°? H
.
°°H I)
dialogComunicationException
°°I d
)
°°d e
;
°°e f
}
±± 
return
²²  
resultVerification
²² %
;
²²% &
}
³³ 	
private
µµ 
void
µµ 
UpdateCredentials
µµ &
(
µµ& '
)
µµ' (
{
¶¶ 	
LoggerManager
·· 
logger
··  
=
··! "
new
··# &
LoggerManager
··' 4
(
··4 5
this
··5 9
.
··9 :
GetType
··: A
(
··A B
)
··B C
)
··C D
;
··D E
	HiveProxy
¸¸ 
.
¸¸ 
UserManagerClient
¸¸ '
userManagerClient
¸¸( 9
=
¸¸: ;
new
¸¸< ?
	HiveProxy
¸¸@ I
.
¸¸I J
UserManagerClient
¸¸J [
(
¸¸[ \
)
¸¸\ ]
;
¸¸] ^
try
ºº 
{
»» 
AccessAccount
¼¼ 
oldAccesAccount
¼¼ -
=
¼¼. /
new
¼¼0 3
AccessAccount
¼¼4 A
(
¼¼A B
)
¼¼B C
{
½½ 
idAccesAccount
¾¾ "
=
¾¾# $"
UserProfileSingleton
¾¾% 9
.
¾¾9 :
	idAccount
¾¾: C
,
¾¾C D
email
¿¿ 
=
¿¿ "
UserProfileSingleton
¿¿ 0
.
¿¿0 1
email
¿¿1 6
,
¿¿6 7
password
ÀÀ 
=
ÀÀ "
UserProfileSingleton
ÀÀ 3
.
ÀÀ3 4
password
ÀÀ4 <
}
ÁÁ 
;
ÁÁ 
string
ÂÂ 
passwordToEncrypt
ÂÂ (
=
ÂÂ) *
pwb_Password
ÂÂ+ 7
.
ÂÂ7 8
Password
ÂÂ8 @
;
ÂÂ@ A
string
ÃÃ 
passwordEncripted
ÃÃ (
=
ÃÃ) *
Hasher
ÃÃ+ 1
.
ÃÃ1 2

hashToSHA2
ÃÃ2 <
(
ÃÃ< =
passwordToEncrypt
ÃÃ= N
)
ÃÃN O
;
ÃÃO P
AccessAccount
ÄÄ 
newAccesAccount
ÄÄ -
=
ÄÄ. /
new
ÄÄ0 3
AccessAccount
ÄÄ4 A
(
ÄÄA B
)
ÄÄB C
{
ÅÅ 
idAccesAccount
ÆÆ "
=
ÆÆ# $"
UserProfileSingleton
ÆÆ% 9
.
ÆÆ9 :
	idAccount
ÆÆ: C
,
ÆÆC D
email
ÇÇ 
=
ÇÇ 
	txt_Email
ÇÇ %
.
ÇÇ% &
Text
ÇÇ& *
,
ÇÇ* +
password
ÈÈ 
=
ÈÈ 
passwordEncripted
ÈÈ 0
}
ÉÉ 
;
ÉÉ 
int
ÊÊ 
updateResult
ÊÊ  
=
ÊÊ! "
userManagerClient
ÊÊ# 4
.
ÊÊ4 5$
UpdateLoginCredentials
ÊÊ5 K
(
ÊÊK L
oldAccesAccount
ÊÊL [
,
ÊÊ[ \
newAccesAccount
ÊÊ] l
)
ÊÊl m
;
ÊÊm n
if
ËË 
(
ËË 
updateResult
ËË  
==
ËË! #
	Constants
ËË$ -
.
ËË- .
SuccesOperation
ËË. =
)
ËË= >
{
ÌÌ 
DialogManager
ÍÍ !
.
ÍÍ! "%
ShowSuccessMessageAlert
ÍÍ" 9
(
ÍÍ9 :

Properties
ÍÍ: D
.
ÍÍD E
	Resources
ÍÍE N
.
ÍÍN O
dialogUpdatedData
ÍÍO `
)
ÍÍ` a
;
ÍÍa b"
UserProfileSingleton
ÎÎ (
.
ÎÎ( )
Instance
ÎÎ) 1
.
ÎÎ1 2
ResetSingleton
ÎÎ2 @
(
ÎÎ@ A
)
ÎÎA B
;
ÎÎB C
DisconnectPlayer
ÏÏ $
(
ÏÏ$ %
)
ÏÏ% &
;
ÏÏ& '
ReturnToLoginView
ÐÐ %
(
ÐÐ% &
)
ÐÐ& '
;
ÐÐ' (
}
ÑÑ 
else
ÒÒ 
{
ÓÓ 
DialogManager
ÔÔ !
.
ÔÔ! "#
ShowErrorMessageAlert
ÔÔ" 7
(
ÔÔ7 8

Properties
ÔÔ8 B
.
ÔÔB C
	Resources
ÔÔC L
.
ÔÔL M!
dialogDataBaseError
ÔÔM `
)
ÔÔ` a
;
ÔÔa b
}
ÕÕ 
}
ÖÖ 
catch
×× 
(
×× '
EndpointNotFoundException
×× ,
endPointException
××- >
)
××> ?
{
ØØ 
logger
ÙÙ 
.
ÙÙ 
LogFatal
ÙÙ 
(
ÙÙ  
endPointException
ÙÙ  1
)
ÙÙ1 2
;
ÙÙ2 3
DialogManager
ÚÚ 
.
ÚÚ #
ShowErrorMessageAlert
ÚÚ 3
(
ÚÚ3 4

Properties
ÚÚ4 >
.
ÚÚ> ?
	Resources
ÚÚ? H
.
ÚÚH I%
dialogEndPointException
ÚÚI `
)
ÚÚ` a
;
ÚÚa b
}
ÛÛ 
catch
ÜÜ 
(
ÜÜ 
TimeoutException
ÜÜ #
timeOutException
ÜÜ$ 4
)
ÜÜ4 5
{
ÝÝ 
logger
ÞÞ 
.
ÞÞ 
LogWarn
ÞÞ 
(
ÞÞ 
timeOutException
ÞÞ /
)
ÞÞ/ 0
;
ÞÞ0 1
DialogManager
ßß 
.
ßß #
ShowErrorMessageAlert
ßß 3
(
ßß3 4

Properties
ßß4 >
.
ßß> ?
	Resources
ßß? H
.
ßßH I$
dialogTimeOutException
ßßI _
)
ßß_ `
;
ßß` a
}
àà 
catch
áá 
(
áá $
CommunicationException
áá )$
communicationException
áá* @
)
áá@ A
{
ââ 
logger
ãã 
.
ãã 
LogFatal
ãã 
(
ãã  $
communicationException
ãã  6
)
ãã6 7
;
ãã7 8
DialogManager
ää 
.
ää #
ShowErrorMessageAlert
ää 3
(
ää3 4

Properties
ää4 >
.
ää> ?
	Resources
ää? H
.
ääH I)
dialogComunicationException
ääI d
)
ääd e
;
ääe f
}
åå 
}
ææ 	
private
èè 
void
èè 
DisconnectPlayer
èè %
(
èè% &
)
èè& '
{
éé 	
LoggerManager
êê 
logger
êê  
=
êê! "
new
êê# &
LoggerManager
êê' 4
(
êê4 5
this
êê5 9
.
êê9 :
GetType
êê: A
(
êêA B
)
êêB C
)
êêC D
;
êêD E
	HiveProxy
ëë 
.
ëë &
UserSessionManagerClient
ëë .&
userSessionManagerClient
ëë/ G
=
ëëH I
new
ëëJ M&
UserSessionManagerClient
ëëN f
(
ëëf g
)
ëëg h
;
ëëh i
try
ìì 
{
íí 
UserSession
îî 
userSession
îî '
=
îî( )
new
îî* -
UserSession
îî. 9
(
îî9 :
)
îî: ;
{
ïï 
	idAccount
ðð 
=
ðð "
UserProfileSingleton
ðð  4
.
ðð4 5
	idAccount
ðð5 >
,
ðð> ?
username
ññ 
=
ññ "
UserProfileSingleton
ññ 3
.
ññ3 4
username
ññ4 <
,
ññ< =
}
òò 
;
òò &
userSessionManagerClient
óó (
.
óó( )

Disconnect
óó) 3
(
óó3 4
userSession
óó4 ?
,
óó? @
false
óó@ E
)
óóE F
;
óóF G
}
ôô 
catch
õõ 
(
õõ '
EndpointNotFoundException
õõ ,
endPointException
õõ- >
)
õõ> ?
{
öö 
logger
÷÷ 
.
÷÷ 
LogFatal
÷÷ 
(
÷÷  
endPointException
÷÷  1
)
÷÷1 2
;
÷÷2 3
DialogManager
øø 
.
øø #
ShowErrorMessageAlert
øø 3
(
øø3 4

Properties
øø4 >
.
øø> ?
	Resources
øø? H
.
øøH I%
dialogEndPointException
øøI `
)
øø` a
;
øøa b
}
ùù 
catch
úú 
(
úú 
TimeoutException
úú #
timeOutException
úú$ 4
)
úú4 5
{
ûû 
logger
üü 
.
üü 
LogWarn
üü 
(
üü 
timeOutException
üü /
)
üü/ 0
;
üü0 1
DialogManager
ýý 
.
ýý #
ShowErrorMessageAlert
ýý 3
(
ýý3 4

Properties
ýý4 >
.
ýý> ?
	Resources
ýý? H
.
ýýH I$
dialogTimeOutException
ýýI _
)
ýý_ `
;
ýý` a
}
þþ 
catch
ÿÿ 
(
ÿÿ $
CommunicationException
ÿÿ )$
communicationException
ÿÿ* @
)
ÿÿ@ A
{
 
logger
 
.
 
LogFatal
 
(
  $
communicationException
  6
)
6 7
;
7 8
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I)
dialogComunicationException
I d
)
d e
;
e f
}
 
}
 	
private
 
void
 !
BtnResendCode_Click
 (
(
( )
object
) /
sender
0 6
,
6 7"
MouseButtonEventArgs
8 L
e
M N
)
N O
{
 	
LoggerManager
 
logger
  
=
! "
new
# &
LoggerManager
' 4
(
4 5
this
5 9
.
9 :
GetType
: A
(
A B
)
B C
)
C D
;
D E
	HiveProxy
 
.
 ,
EmailVerificationManagerClient
 4&
emailVerificationManager
5 M
=
N O
new
P S
	HiveProxy
T ]
.
] ^,
EmailVerificationManagerClient
^ |
(
| }
)
} ~
;
~ 
try
 
{
 
int
 
resultEmailSend
 #
=
$ %&
emailVerificationManager
& >
.
> ?#
SendVerificationEmail
? T
(
T U"
UserProfileSingleton
U i
.
i j
email
j o
)
o p
;
p q
if
 
(
 
resultEmailSend
 #
==
$ &
	Constants
' 0
.
0 1
SuccesOperation
1 @
)
@ A
{
 
DialogManager
 !
.
! "%
ShowSuccessMessageAlert
" 9
(
9 :

Properties
: D
.
D E
	Resources
E N
.
N O,
dialogEmailVerificationMessage
O m
)
m n
;
n o
}
 
else
 
{
 
DialogManager
 !
.
! "#
ShowErrorMessageAlert
" 7
(
7 8

Properties
8 B
.
B C
	Resources
C L
.
L M$
dialogCouldntSendEmail
M c
)
c d
;
d e
}
 
}
 
catch
 
(
 '
EndpointNotFoundException
 ,
endPointException
- >
)
> ?
{
 
logger
 
.
 
LogFatal
 
(
  
endPointException
  1
)
1 2
;
2 3
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I%
dialogEndPointException
I `
)
` a
;
a b
}
 
catch
 
(
 
TimeoutException
 #
timeOutException
$ 4
)
4 5
{
 
logger
 
.
 
LogWarn
 
(
 
timeOutException
 /
)
/ 0
;
0 1
DialogManager
 
.
 #
ShowErrorMessageAlert
 3
(
3 4

Properties
4 >
.
> ?
	Resources
? H
.
H I$
dialogTimeOutException
I _
)
_ `
;
` a
}
   
catch
¡¡ 
(
¡¡ $
CommunicationException
¡¡ )$
communicationException
¡¡* @
)
¡¡@ A
{
¢¢ 
logger
££ 
.
££ 
LogFatal
££ 
(
££  $
communicationException
££  6
)
££6 7
;
££7 8
DialogManager
¤¤ 
.
¤¤ #
ShowErrorMessageAlert
¤¤ 3
(
¤¤3 4

Properties
¤¤4 >
.
¤¤> ?
	Resources
¤¤? H
.
¤¤H I)
dialogComunicationException
¤¤I d
)
¤¤d e
;
¤¤e f
}
¥¥ 
}
¦¦ 	
private
©© 
void
©© #
BtnCancelChange_Click
©© *
(
©©* +
object
©©+ 1
sender
©©2 8
,
©©8 9
RoutedEventArgs
©©: I
e
©©J K
)
©©K L
{
ªª 	
MainMenu
«« 
mainMenu
«« 
=
«« 
new
««  #
MainMenu
««$ ,
(
««, -
)
««- .
;
««. /
this
¬¬ 
.
¬¬ 
NavigationService
¬¬ "
.
¬¬" #
Navigate
¬¬# +
(
¬¬+ ,
mainMenu
¬¬, 4
)
¬¬4 5
;
¬¬5 6
}
­­ 	
public
¯¯ 
void
¯¯ 
ReturnToLoginView
¯¯ %
(
¯¯% &
)
¯¯& '
{
°° 	
DisconnectPlayer
±± 
(
±± 
)
±± 
;
±± 
	LoginView
²² 
	loginView
²² 
=
²²  !
new
²²" %
	LoginView
²²& /
(
²²/ 0
)
²²0 1
;
²²1 2
this
³³ 
.
³³ 
NavigationService
³³ "
.
³³" #
Navigate
³³# +
(
³³+ ,
	loginView
³³, 5
)
³³5 6
;
³³6 7
}
´´ 	
private
¶¶ 
void
¶¶ 
Image_MouseDown
¶¶ $
(
¶¶$ %
object
¶¶% +
sender
¶¶, 2
,
¶¶2 3"
MouseButtonEventArgs
¶¶4 H
e
¶¶I J
)
¶¶J K
{
·· 	
ReturnToLoginView
¸¸ 
(
¸¸ 
)
¸¸ 
;
¸¸  
}
¹¹ 	
private
»» 
void
»» &
TextBox_PreviewMouseDown
»» -
(
»»- .
object
»». 4
sender
»»5 ;
,
»»; <"
MouseButtonEventArgs
»»= Q
e
»»R S
)
»»S T
{
¼¼ 	
e
½½ 
.
½½ 
Handled
½½ 
=
½½ 
true
½½ 
;
½½ 
}
¾¾ 	
}
¿¿ 
}ÀÀ Í
lC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Settings.cs
	namespace 	
HiveGameWPFApp
 
. 

Properties #
{$ %
public		 

sealed		 
partial		 
class		 
Settings		  (
{		) *
public 
Settings 
( 
) 
{ 
} 	
private 
void '
SettingChangingEventHandler 0
(0 1
object1 7
sender8 >
,> ?
System@ F
.F G
ConfigurationG T
.T U$
SettingChangingEventArgsU m
en o
)o p
{q r
} 	
private 
void &
SettingsSavingEventHandler /
(/ 0
object0 6
sender7 =
,= >
System? E
.E F
ComponentModelF T
.T U
CancelEventArgsU d
ee f
)f g
{h i
} 	
} 
} p
sC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\Validator.cs
	namespace

 	
HiveGameWPFApp


 
.

 
Logic

 
{ 
public 

static 
class 
	Validator !
{ 
private 
static 
Regex 
_passwordRegex +
=, -
new. 1
Regex2 7
(7 8
$str	8 
,
 
RegexOptions
 
.
 
None
 
,
 
TimeSpan
 §
.
§ ¨
FromMilliseconds
¨ ¸
(
¸ ¹
$num
¹ ½
)
½ ¾
)
¾ ¿
;
¿ À
private 
static 
Regex 
_usernameRegex +
=, -
new. 1
Regex2 7
(7 8
$str8 P
,P Q
RegexOptionsQ ]
.] ^
None^ b
,b c
TimeSpand l
.l m
FromMillisecondsm }
(} ~
$num	~ 
)
 
)
 
;
 
private 
static 
Regex 
_nicknameRegex +
=, -
new. 1
Regex2 7
(7 8
$str8 P
,P Q
RegexOptionsR ^
.^ _
None_ c
,c d
TimeSpane m
.m n
FromMillisecondsn ~
(~ 
$num	 
)
 
)
 
;
 
private 
static 
Regex 

_dateRegex '
=( )
new* -
Regex. 3
(3 4
$str4 k
,k l
RegexOptionsm y
.y z
Nonez ~
,~ 
TimeSpan
 
.
 
FromMilliseconds
 
(
 
$num
 
)
 
)
  
;
  ¡
private 
static 
Regex  
_codeLobbyMatchRegex 1
=2 3
new4 7
Regex8 =
(= >
$str> K
,K L
RegexOptionsM Y
.Y Z
NoneZ ^
,^ _
TimeSpan` h
.h i
FromMillisecondsi y
(y z
$numz ~
)~ 
)	 
;
 
private 
static 
Regex 
_stateRegex (
=) *
new+ .
Regex/ 4
(4 5
$str5 M
,M N
RegexOptionsO [
.[ \
None\ `
,` a
TimeSpanb j
.j k
FromMillisecondsk {
({ |
$num	| 
)
 
)
 
;
 
private 
static 
Regex 

_textRegex '
=( )
new* -
Regex. 3
(3 4
$str4 L
,L M
RegexOptionsN Z
.Z [
None[ _
,_ `
TimeSpana i
.i j
FromMillisecondsj z
(z {
$num{ 
)	 
)
 
;
 
private 
static 
Regex 
_emailRegex (
=) *
new+ .
Regex/ 4
(4 5
$str	5  
,
  ¡
RegexOptions
¡ ­
.
­ ®
None
® ²
,
² ³
TimeSpan
³ »
.
» ¼
FromMilliseconds
¼ Ì
(
Ì Í
$num
Í Ñ
)
Ñ Ò
)
Ò Ó
;
Ó Ô
public 
static 
bool  
ValidateRegexPattern /
(/ 0
string0 6
data7 ;
,; <
Regex= B
regexC H
)H I
{ 	
bool 
isValid 
= 
false  
;  !
try 
{ 
isValid 
= 
regex 
.  
IsMatch  '
(' (
data( ,
), -
;- .
} 
catch 
( &
RegexMatchTimeoutException -
)- .
{   
isValid!! 
=!! 
false!! 
;!!  
}"" 
return## 
isValid## 
;## 
}$$ 	
public&& 
static&& 
bool&& 
ValidateDescription&& .
(&&. /
string&&/ 5
description&&6 A
)&&A B
{'' 	
bool(( 
isValid(( 
=(( 
false((  
;((  !
string)) 
cleanedDescription)) %
=))& '
Regex))( -
.))- .
Replace)). 5
())5 6
description))6 A
.))A B
Trim))B F
())F G
)))G H
,))H I
$str))J P
,))P Q
$str))R T
,))T U
RegexOptions))V b
.))b c
None))c g
,))g h
TimeSpan))i q
.))q r
FromMilliseconds	))r 
(
)) 
$num
)) 
)
)) 
)
)) 
;
)) 
if** 
(** 
!** 
string** 
.** 
IsNullOrEmpty** %
(**% &
cleanedDescription**& 8
)**8 9
&&**: < 
ValidateRegexPattern**= Q
(**Q R
cleanedDescription**R d
,**d e

_textRegex**e o
)**o p
)**p q
{++ 
isValid,, 
=,, 
true,, 
;,, 
}-- 
return.. 
isValid.. 
;.. 
}// 	
public11 
static11 
bool11 
ValidatePassword11 +
(11+ ,
string11, 2
password113 ;
)11; <
{22 	
bool33 
isValid33 
=33 
false33  
;33  !
string44 
cleanedPassword44 "
=44# $
Regex44% *
.44* +
Replace44+ 2
(442 3
password443 ;
.44; <
Trim44< @
(44@ A
)44A B
,44B C
$str44D J
,44J K
$str44L N
,44N O
RegexOptions44P \
.44\ ]
None44] a
,44a b
TimeSpan44c k
.44k l
FromMilliseconds44l |
(44| }
$num	44} 
)
44 
)
44 
;
44 
if55 
(55 
!55 
string55 
.55 
IsNullOrWhiteSpace55 *
(55* +
cleanedPassword55+ :
)55: ;
&&55< > 
ValidateRegexPattern55? S
(55S T
cleanedPassword55T c
,55c d
_passwordRegex55e s
)55s t
)55t u
{66 
isValid77 
=77 
true77 
;77 
}88 
return99 
isValid99 
;99 
}:: 	
public<< 
static<< 
bool<< 
ValidateUsername<< +
(<<+ ,
string<<, 2
username<<3 ;
)<<; <
{== 	
bool>> 
isValid>> 
=>> 
false>>  
;>>  !
string?? 
cleanedUsername?? "
=??# $
Regex??% *
.??* +
Replace??+ 2
(??2 3
username??3 ;
.??; <
Trim??< @
(??@ A
)??A B
,??B C
$str??D J
,??J K
$str??L N
,??N O
RegexOptions??P \
.??\ ]
None??] a
,??a b
TimeSpan??c k
.??k l
FromMilliseconds??l |
(??| }
$num	??} 
)
?? 
)
?? 
;
?? 
if@@ 
(@@ 
!@@ 
string@@ 
.@@ 
IsNullOrWhiteSpace@@ *
(@@* +
cleanedUsername@@+ :
)@@: ;
&&@@< > 
ValidateRegexPattern@@? S
(@@S T
cleanedUsername@@T c
,@@c d
_usernameRegex@@e s
)@@s t
)@@t u
{AA 
isValidBB 
=BB 
trueBB 
;BB 
}CC 
returnDD 
isValidDD 
;DD 
}EE 	
publicGG 
staticGG 
boolGG 
ValidateEmailGG (
(GG( )
stringGG) /
emailGG0 5
)GG5 6
{HH 	
boolII 
isValidII 
=II 
falseII  
;II  !
stringJJ 
cleanedEmailJJ 
=JJ  !
RegexJJ" '
.JJ' (
ReplaceJJ( /
(JJ/ 0
emailJJ0 5
.JJ5 6
TrimJJ6 :
(JJ: ;
)JJ; <
,JJ< =
$strJJ> D
,JJD E
$strJJF H
,JJH I
RegexOptionsJJJ V
.JJV W
NoneJJW [
,JJ[ \
TimeSpanJJ] e
.JJe f
FromMillisecondsJJf v
(JJv w
$numJJw z
)JJz {
)JJ{ |
;JJ| }
ifKK 
(KK 
!KK 
stringKK 
.KK 
IsNullOrWhiteSpaceKK *
(KK* +
cleanedEmailKK+ 7
)KK7 8
&&KK8 :
cleanedEmailKK: F
.KKF G
LengthKKG M
<KKM N
$numKKN Q
&&KKQ S 
ValidateRegexPatternKKT h
(KKh i
cleanedEmailKKi u
,KKu v
_emailRegex	KKw 
)
KK 
)
KK 
{LL 
isValidMM 
=MM 
trueMM 
;MM 
}NN 
returnOO 
isValidOO 
;OO 
}PP 	
publicRR 
staticRR 
boolRR 
ValidateNickNameRR +
(RR+ ,
stringRR, 2
nickNameRR3 ;
)RR; <
{SS 	
boolTT 
isValidTT 
=TT 
falseTT  
;TT  !
stringUU 
cleanedNickNameUU "
=UU# $
RegexUU% *
.UU* +
ReplaceUU+ 2
(UU2 3
nickNameUU3 ;
.UU; <
TrimUU< @
(UU@ A
)UUA B
,UUB C
$strUUD J
,UUJ K
$strUUL N
,UUN O
RegexOptionsUUP \
.UU\ ]
NoneUU] a
,UUa b
TimeSpanUUc k
.UUk l
FromMillisecondsUUl |
(UU| }
$num	UU} 
)
UU 
)
UU 
;
UU 
ifVV 
(VV 
!VV 
stringVV 
.VV 
IsNullOrWhiteSpaceVV )
(VV) *
cleanedNickNameVV* 9
)VV9 :
&&VV; = 
ValidateRegexPatternVV> R
(VVR S
cleanedNickNameVVS b
,VVb c
_nicknameRegexVVd r
)VVr s
)VVs t
{WW 
isValidXX 
=XX 
trueXX 
;XX 
}YY 
returnZZ 
isValidZZ 
;ZZ 
}[[ 	
public]] 
static]] 
bool]] 
ValidateDate]] '
(]]' (
string]]( .
date]]/ 3
)]]3 4
{^^ 	
bool__ 
isValid__ 
=__ 
false__  
;__  !
if`` 
(`` 
!`` 
string`` 
.`` 
IsNullOrWhiteSpace`` )
(``) *
date``* .
)``. /
&&``/ 1 
ValidateRegexPattern``2 F
(``F G
date``G K
,``K L

_dateRegex``M W
)``W X
)``X Y
{aa 
isValidbb 
=bb 
truebb 
;bb 
}cc 
returndd 
isValiddd 
;dd 
}ee 	
publicgg 
staticgg 
boolgg 
ValidateCodegg '
(gg' (
stringgg( .
	codeLobbygg/ 8
)gg8 9
{hh 	
boolii 
isValidii 
=ii 
falseii  
;ii  !
stringjj 
codeCleanedjj 
=jj  
Regexjj! &
.jj& '
Replacejj' .
(jj. /
	codeLobbyjj/ 8
.jj8 9
Trimjj9 =
(jj= >
)jj> ?
,jj? @
$strjjA G
,jjG H
$strjjI K
,jjK L
RegexOptionsjjM Y
.jjY Z
NonejjZ ^
,jj^ _
TimeSpanjj` h
.jjh i
FromMillisecondsjji y
(jjy z
$numjjz }
)jj} ~
)jj~ 
;	jj 
ifkk 
(kk 
!kk 
stringkk 
.kk 
IsNullOrWhiteSpacekk *
(kk* +
codeCleanedkk+ 6
)kk6 7
&&kk8 : 
ValidateRegexPatternkk; O
(kkO P
codeCleanedkkP [
,kk[ \ 
_codeLobbyMatchRegexkk] q
)kkq r
)kkr s
{ll 
isValidmm 
=mm 
truemm 
;mm 
}nn 
returnoo 
isValidoo 
;oo 
}pp 	
publicrr 
staticrr 
boolrr 
ValidateStaterr (
(rr( )
stringrr) /
staterr0 5
)rr5 6
{ss 	
booltt 
isValidtt 
=tt 
falsett  
;tt  !
stringuu 
stateCleaneduu 
=uu  !
Regexuu" '
.uu' (
Replaceuu( /
(uu/ 0
stateuu0 5
.uu5 6
Trimuu6 :
(uu: ;
)uu; <
,uu< =
$struu> D
,uuD E
$struuF H
,uuH I
RegexOptionsuuJ V
.uuV W
NoneuuW [
,uu[ \
TimeSpanuu] e
.uue f
FromMillisecondsuuf v
(uuv w
$numuuw z
)uuz {
)uu{ |
;uu| }
ifvv 
(vv 
!vv 
stringvv 
.vv 
IsNullOrWhiteSpacevv *
(vv* +
stateCleanedvv+ 7
)vv7 8
&&vv9 ; 
ValidateRegexPatternvv< P
(vvP Q
stateCleanedvvQ ]
,vv] ^
_stateRegexvv_ j
)vvj k
)vvk l
{ww 
isValidxx 
=xx 
truexx 
;xx 
}yy 
returnzz 
isValidzz 
;zz 
}{{ 	
}|| 
}}} Ð$
~C:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\UserProfileSingleton.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{		 
public

 

class

  
UserProfileSingleton

 &
{ 
private 
static 
readonly  
UserProfileSingleton  4
_singletonInstance5 G
=H I
newJ M 
UserProfileSingletonN b
(b c
)c d
;d e
public 
static 
string 
username %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
static 
string 
password %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
static 
string 
email "
{# $
get& )
;) *
set+ .
;. /
}0 1
public 
static 
int 
	idAccount #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
static 
int 
	idProfile #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
static 
string 
nickname %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
static 
string 

imageRoute '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
static 
DateTime 
createdDate *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
static 
int 
idAssociatedAccount -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
static 
string 
description (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
static  
UserProfileSingleton *
Instance+ 3
=>4 6
_singletonInstance7 I
;I J
public 
void 
CreateInstance "
(" #
Profile# *
profile+ 2
)2 3
{ 	
username 
= 
profile 
. 
username '
;' (
password 
= 
profile 
. 
password '
;' (
email 
= 
profile 
. 
email !
;! "
	idAccount   
=   
profile   
.    
	idAccount    )
;  ) *
	idProfile!! 
=!! 
profile!! 
.!!  
	idProfile!!  )
;!!) *
nickname"" 
="" 
profile"" 
."" 
nickname"" '
;""' (

imageRoute## 
=## 
profile##  
.##  !
	imagePath##! *
;##* +
createdDate$$ 
=$$ 
profile$$ !
.$$! "
createdDate$$" -
;$$- .
idAssociatedAccount%% 
=%%  !
profile%%" )
.%%) *
	idAccount%%* 3
;%%3 4
description&& 
=&& 
profile&& !
.&&! "
description&&" -
;&&- .
}'' 	
public)) 
void)) 
ResetSingleton)) "
())" #
)))# $
{** 	
username++ 
=++ 
null++ 
;++ 
password,, 
=,, 
null,, 
;,, 
email-- 
=-- 
null-- 
;-- 
	idAccount.. 
=.. 
$num.. 
;.. 
	idProfile// 
=// 
$num// 
;// 
nickname00 
=00 
null00 
;00 

imageRoute11 
=11 
null11 
;11 
createdDate22 
=22 
DateTime22 "
.22" #
MinValue22# +
;22+ ,
idAssociatedAccount33 
=33  !
$num33" #
;33# $
description44 
=44 
null44 
;44 
}55 	
}66 
}77 Ð
sC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\GamePiece.cs
	namespace		 	
HiveGameWPFApp		
 
.		 
Logic		 
{

 
public 

partial 
class 
	GamePiece "
{ 
public 
Piece 
Piece 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
PieceNumber 
{  
get" %
;% &
set' *
;* +
}, -
public 
string 
	ImagePath 
{  !
get" %
;% &
set' *
;* +
}, -
public 
Point 
Position 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 

PlayerName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
	GamePiece 
( 
Piece 
piece $
,$ %
string& ,
	imagePath- 6
,6 7
Point8 =
position> F
,F G
stringH N

playernameO Y
,Y Z
int[ ^
pieceNumber_ j
)j k
{ 	
Piece 
= 
piece 
; 
	ImagePath 
= 
	imagePath !
;! "
Position 
= 
position 
;  

PlayerName 
= 

playername #
;# $
this 
. 
PieceNumber 
= 
pieceNumber *
;* +
} 	
public 
	GamePiece 
( 
) 
{ 	
}   	
}"" 
}## Ä
zC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\ProfileGenerator.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{ 
public		 

static		 
class		 
ProfileGenerator		 (
{

 
private 
static 
readonly 
Random  &
_random' .
=/ 0
new1 4
Random5 ;
(; <
)< =
;= >
public 
static 
string &
RandomDescriptionGenerator 7
(7 8
)8 9
{ 	
string 
[ 
] 
defaultDescriptions (
=) *
{+ ,
$str- B
,B C
$strC k
,k l
$str	l 
+
 
$str )
,) *
$str* O
,O P
$strP q
,q r
$str	r 
+
 
$str 2
+2 3
$str3 [
}\ ]
;] ^
int 
randomIndex 
= 
_random %
.% &
Next& *
(* +
defaultDescriptions+ >
.> ?
Length? E
)E F
;F G
return 
defaultDescriptions &
[& '
randomIndex' 2
]2 3
;3 4
} 	
public 
static 
string #
RandomChooserAvatarIcon 4
(4 5
)5 6
{ 	
string 
[ 
] 
defaultAvatars #
=$ %
{& '
$str( E
,E F
$strG d
,d e
$str	f 
,
 
$str -
,- .
$str/ L
,L M
$strN k
}l m
;m n
int 
randomIndex 
= 
_random %
.% &
Next& *
(* +
defaultAvatars+ 9
.9 :
Length: @
)@ A
;A B
return 
defaultAvatars !
[! "
randomIndex" -
]- .
;. /
} 	
public   
static   
string   !
RandomChooserUsername   2
(  2 3
)  3 4
{!! 	
int## 
randomIndexNumber## !
=##" #
_random##$ +
.##+ ,
Next##, 0
(##0 1
$num##1 2
,##2 3
$num##3 :
)##: ;
;##; <
string$$ 
defaultUsername$$ "
=$$# $
$str$$% ,
+$$, -
randomIndexNumber$$- >
;$$> ?
return%% 
defaultUsername%% "
;%%" #
}&& 	
}'' 
}(( ¬
oC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\Piece.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{		 
public

 

abstract

 
class

 
Piece

 
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
Point 
Position 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 

PlayerName  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
public 

class 
Queen 
: 
Piece 
{ 
public 
Queen 
( 
) 
{ 	
Name 
= 
$str 
; 

PlayerName 
= 
$str 
; 
} 	
} 
public 

class 
Spider 
: 
Piece 
{ 
public 
Spider 
( 
) 
{ 	
Name   
=   
$str   
;   

PlayerName!! 
=!! 
$str!! 
;!! 
}"" 	
}%% 
public&& 

class&& 
Beetle&& 
:&& 
Piece&& 
{'' 
public(( 
Beetle(( 
((( 
)(( 
{)) 	
Name** 
=** 
$str** 
;** 

PlayerName++ 
=++ 
$str++ 
;++ 
},, 	
}.. 
public// 

class// 
Ant// 
:// 
Piece// 
{00 
public11 
Ant11 
(11 
)11 
{22 	
Name33 
=33 
$str33 
;33 

PlayerName44 
=44 
$str44 
;44 
}55 	
}77 
public88 

class88 
Grasshopper88 
:88 
Piece88 $
{99 
public:: 
Grasshopper:: 
(:: 
):: 
{;; 	
Name== 
=== 
$str==  
;==  !

PlayerName>> 
=>> 
$str>> 
;>> 
}?? 	
}AA 
}CC ¦

xC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\MatchSingleton.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{ 
public		 

class		 
MatchSingleton		 
{

 
private 
static 
readonly 
MatchSingleton  .
_SingletonInstance/ A
=B C
newD G
MatchSingletonH V
(V W
)W X
;X Y
public 
static 
string 
	codeMatch &
{' (
get* -
;- .
set/ 2
;2 3
}4 5
public 
static 
MatchSingleton $
Instance% -
=>. 0
_SingletonInstance1 C
;C D
public 
void 
CreateInstance "
(" #
string# )
code* .
). /
{ 	
	codeMatch 
= 
code 
; 
} 	
public 
void 
ResetSingleton "
(" #
)# $
{ 	
	codeMatch 
= 
null 
; 
} 	
} 
} 
wC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\LoggerManager.cs
	namespace		 	
HiveGameWPFApp		
 
.		 
Logic		 
{

 
public 

class 
LoggerManager 
{ 
public 
ILog 
Logger 
{ 
get  
;  !
set" %
;% &
}' (
public 
LoggerManager 
( 
Type !
type" &
)& '
{ 	
Logger 
= 

LogManager 
.  
	GetLogger  )
() *
type* .
). /
;/ 0
} 	
public 
static 
ILog 
	GetLogger $
($ %
Type% )
type* .
). /
{ 	
return 

LogManager 
. 
	GetLogger '
(' (
type( ,
), -
;- .
} 	
public 
void 
LogInfo 
( 
string "
message# *
)* +
{ 	
Logger 
. 
Info 
( 
message 
)  
;  !
} 	
public 
void 
LogError 
( 
string #
message$ +
,+ ,
	Exception- 6
ex7 9
)9 :
{ 	
Logger   
.   
Error   
(   
message    
,    !
ex  " $
)  $ %
;  % &
}!! 	
public## 
void## 
LogError## 
(## 
	Exception## &
ex##' )
)##) *
{$$ 	
Logger%% 
.%% 
Error%% 
(%% 
ex%% 
)%% 
;%% 
}&& 	
public'' 
void'' 
LogFatal'' 
('' 
	Exception'' &
ex''' )
)'') *
{(( 	
Logger)) 
.)) 
Fatal)) 
()) 
ex)) 
))) 
;)) 
}** 	
public++ 
void++ 
LogWarn++ 
(++ 
	Exception++ %
ex++& (
)++( )
{,, 	
Logger-- 
.-- 
Warn-- 
(-- 
ex-- 
)-- 
;-- 
}.. 	
public00 
void00 
LogDebug00 
(00 
	Exception00 &
ex00' )
)00) *
{11 	
Logger22 
.22 
Debug22 
(22 
ex22 
)22 
;22 
}33 	
}44 
}55 
pC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\Hasher.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{		 
public

 

static

 
class

 
Hasher

 
{ 
public 
static 
string 

hashToSHA2 '
(' (
string( .

textToHash/ 9
)9 :
{ 	
StringBuilder 
stringHashBuilder +
=, -
new. 1
StringBuilder2 ?
(? @
)@ A
;A B
byte 
[ 
] 

inputBytes 
= 
Encoding  (
.( )
UTF8) -
.- .
GetBytes. 6
(6 7

textToHash7 A
)A B
;B C
using 
( 
SHA256 
sha256  
=! "
SHA256# )
.) *
Create* 0
(0 1
)1 2
)2 3
{ 
byte 
[ 
] 
	hashBytes  
=! "
sha256# )
.) *
ComputeHash* 5
(5 6

inputBytes6 @
)@ A
;A B
string 
hexaDecimalFormat (
=) *
$str+ /
;/ 0
for 
( 
int 

indexBytes "
=# $
$num% &
;& '

indexBytes) 3
<4 5
	hashBytes6 ?
.? @
Length@ F
;F G

indexBytesH R
++R T
)T U
{ 
stringHashBuilder %
.% &
Append& ,
(, -
	hashBytes- 6
[6 7

indexBytes7 A
]A B
.B C
ToStringC K
(K L
hexaDecimalFormatL ]
)] ^
)^ _
;_ `
} 
} 
return 
stringHashBuilder $
.$ %
ToString% -
(- .
). /
;/ 0
} 	
}!! 
}"" Ø
wC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\DialogManager.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{ 
public 

static 
class 
DialogManager %
{ 
public 
static 
void !
ShowErrorMessageAlert 0
(0 1
string1 7
errorMessage8 D
)D E
{ 	

MessageBox		 
.		 
Show		 
(		 
errorMessage		 (
,		( )

Properties		* 4
.		4 5
	Resources		5 >
.		> ?
dialogTitleError		? O
,		O P
MessageBoxButton		Q a
.		a b
OK		b d
,		d e
MessageBoxImage		f u
.		u v
Error		v {
)		{ |
;		| }
}

 	
public 
static 
void #
ShowWarningMessageAlert 2
(2 3
string3 9
warningMessage: H
)H I
{ 	

MessageBox 
. 
Show 
( 
warningMessage *
,* +

Properties, 6
.6 7
	Resources7 @
.@ A
dialogTitleWarningA S
,S T
MessageBoxButtonU e
.e f
OKf h
,h i
MessageBoxImagej y
.y z
Warning	z 
)
 
;
 
} 	
public 
static 
void #
ShowSuccessMessageAlert 2
(2 3
string3 9
successMessage: H
)H I
{ 	

MessageBox 
. 
Show 
( 
successMessage *
,* +

Properties, 6
.6 7
	Resources7 @
.@ A
dialogTitleSuccesA R
,R S
MessageBoxButtonT d
.d e
OKe g
,g h
MessageBoxImagei x
.x y
Information	y 
)
 
;
 
} 	
public 
static 
bool (
ShowConfirmationMessageAlert 7
(7 8
string8 >
confirmMessage? M
)M N
{ 	
MessageBoxResult 
result #
=$ %

MessageBox& 0
.0 1
Show1 5
(5 6
confirmMessage6 D
,D E

PropertiesF P
.P Q
	ResourcesQ Z
.Z [#
dialogTitleConfirmation[ r
,r s
MessageBoxButton	t 
.
 
OKCancel
 
,
 
MessageBoxImage
 
.
 
Question
 §
)
§ ¨
;
¨ ©
return 
result 
== 
MessageBoxResult -
.- .
OK. 0
;0 1
} 	
} 
} ¬
sC:\Users\chris\OneDrive\Escritorio\Hive\chris979712\HiveGameClient\HiveGameClient\HiveGameWPFApp\Logic\Constants.cs
	namespace 	
HiveGameWPFApp
 
. 
Logic 
{ 
public		 

static		 
class		 
	Constants		 !
{

 
public 
const 
int 
ErrorOperation '
=( )
-* +
$num+ ,
;, -
public 
const 
int 
SuccesOperation (
=) *
$num+ ,
;, -
public 
const 
int 
NoDataMatches &
=' (
$num) *
;* +
public 
const 
int 
DataMatches $
=% &
$num' (
;( )
public 
const 
int 
DefaultGuestId '
=( )
$num* +
;+ ,
public 
const 
string 
DefaultImagePlayer .
=/ 0
$str1 4
;4 5
public 
const 
string 
DefaultImageGuest -
=. /
$str0 3
;3 4
private 
static 
bool 

_isInMatch &
=' (
false) .
;. /
public 
static 
bool 
	IsInMatch $
{ 	
get 
=> 

_isInMatch 
; 
set 
=> 

_isInMatch 
= 
value  %
;% &
} 	
}   
}!! 